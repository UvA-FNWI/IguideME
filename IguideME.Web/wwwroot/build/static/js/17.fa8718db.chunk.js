(this.webpackJsonpiguideme=this.webpackJsonpiguideme||[]).push([[17],{198:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(7),a=n(10),i=n(11),l=n(12),c=n(3),o=n(17),s=n(82),u=n(6),d=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,null,[{key:"getStudents",value:function(){return Object(c.a)()?Object(u.a)(s.a):this.client.get("students").then((function(e){return e.data}))}}]),n}(o.a)},203:function(e,t,n){"use strict";var r=n(67),a=n(7),i=n(10),l=n(11),c=n(12),o=n(0),s=n.n(o),u=n(235),d=n(428),m=n(81),p=n(994),f=n(54),h=n(198),g=n(3),v=n(52),E=(n(204),Object(v.b)((function(e){return{course:e.course,user:e.user}}))),b=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).state={loaded:!1,students:[]},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.studentPickView&&h.a.getStudents().then((function(t){return e.setState({students:t,loaded:!0})})),this.setState({loaded:!0})}},{key:"renderInner",value:function(){var e=this;if(this.props.studentPickView){var t=this.state,n=t.students,a=t.loaded;return s.a.createElement(u.a,{id:"studentPicker",isLoading:!a,options:n.sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(e){return{label:e.name,value:e.login_id}})),placeholder:"Choose a student",onChange:function(t){return e.props.setStudent(t?n.find((function(e){return e.login_id===t.value})):null)},isClearable:!0,styles:{control:function(e,t){return Object(r.a)(Object(r.a)({},e),{},{backgroundColor:"transparent",color:"white",border:"1px solid white"})},singleValue:function(e,t){return Object(r.a)(Object(r.a)({},e),{},{color:"white"})}}})}return s.a.createElement("div",{id:"inner"},s.a.createElement("h2",null,this.props.course?this.props.course.course_name:"Loading course..."))}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{id:"adminHeader"},this.props.studentPickView?s.a.createElement(f.b,{to:"/admin",style:{float:"right"}},s.a.createElement("h3",null,"Admin Panel")):s.a.createElement("div",{style:{float:"right",padding:20}},s.a.createElement(d.a,{title:"Reload data"},s.a.createElement(m.a,{id:"reload",shape:"circle",style:{backgroundColor:"rgba(255, 255, 255, 0.5)",color:"white"},icon:s.a.createElement(p.a,null)}))),s.a.createElement("div",{id:"navbarContent"},s.a.createElement("div",{id:"brand"},s.a.createElement(f.b,{to:"/"},s.a.createElement("h1",null,"IGuideME"))),this.renderInner())),Object(g.a)()&&s.a.createElement("div",{id:"debugNotice"},"Application is running in ",s.a.createElement("strong",null,"demo")," mode. Changes will not be saved!"))}}]),n}(o.Component);t.a=E(b)},204:function(e,t,n){},733:function(e,t,n){},734:function(e,t,n){},735:function(e,t,n){},736:function(e,t,n){},737:function(e,t,n){},759:function(e,t,n){},760:function(e,t,n){},761:function(e,t,n){},762:function(e,t,n){},777:function(e,t,n){},781:function(e,t,n){},782:function(e,t,n){},985:function(e,t,n){"use strict";n.r(t);var r=n(7),a=n(10),i=n(11),l=n(12),c=n(0),o=n.n(c),s=n(115),u=n(83),d=n(203),m=n(5),p=n.n(m),f=n(32),h=n(210),g=n(13),v=n(627),E=n(183),b=(n(733),function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props.peerGrades,t=function(e){return Math.round(100*e)/100};return o.a.createElement("div",{className:"peerComparison"},o.a.createElement("span",{className:"title"},"Peer Comparison"),e?o.a.createElement("div",{className:"distribution"},o.a.createElement("div",{className:"min"},o.a.createElement("small",null,"min."),o.a.createElement("br",null),t(e.min)),o.a.createElement("div",{className:"avg"},o.a.createElement("small",null,"avg."),o.a.createElement("br",null),t(e.avg)),o.a.createElement("div",{className:"max"},o.a.createElement("small",null,"max."),o.a.createElement("br",null),t(e.max))):o.a.createElement("p",null,"Not available"))}}]),n}(c.Component)),y=n(303),O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=e.map((function(e){return e.average}));return 0===n.length?null:Math.round(y.mean(n)*Math.pow(10,t))/Math.pow(10,t)},j=function(e,t,n){return"BINARY"===e.content?n.length>0?Math.round(n.filter((function(e){return parseFloat(e.grade)>.8})).length/t.length*100):0:Math.round(n.length/t.length*100)},x=n(711),w=n(995),_=n(996),C=(n(734),function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).state={loading:!0,passed:!1},e.setup=function(){var t=e.props.grade;e.setState({loading:!1,passed:parseFloat(t)>=5.5})},e}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.setup()}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.passed,r=this.props.grade;return o.a.createElement("div",{className:"gradeStatistic"},o.a.createElement(x.a,{title:"Grade",value:r,loading:t,prefix:n?o.a.createElement(w.a,{className:"pass"}):o.a.createElement(_.a,{className:"fail"})}))}}]),n}(c.Component)),k=(n(735),function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).state={loaded:!1},e.getHeader=function(){var t=e.props,n=t.tile,r=t.tileEntries,a=t.submissions,i=t.userGrades,l=t.discussions,c=t.learningOutcomes,s=O(i);switch(n.type){case"DISCUSSIONS":return o.a.createElement("span",{style:{textAlign:"center"}},o.a.createElement("strong",null,l.length)," discussion",1!==l.length&&"s")}switch(n.content){case"LEARNING_OUTCOMES":var u=c.filter((function(e){return e.success})).length;return o.a.createElement("span",{style:{textAlign:"center"}},o.a.createElement("strong",null,u,o.a.createElement("small",null,"/",c.length))," completed");case"PREDICTION":return o.a.createElement(C,{grade:s?s.toString():"-"});case"BINARY":case"ENTRIES":return o.a.createElement(o.a.Fragment,null,!!s&&o.a.createElement(v.a,{percent:j(n,r,a)}),o.a.createElement(C,{grade:s?s.toString():"-"}));default:return null}},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.tile,n=e.peerGrades,r=e.userGrades;return o.a.createElement("div",{className:"tile",onClick:function(){window.dispatchEvent(new CustomEvent("selectTile",{detail:{tile:t,userGrades:r}}))}},o.a.createElement("div",{className:"wrapper"},o.a.createElement("div",{className:"content"},o.a.createElement("h2",null,t.title),o.a.createElement(E.b,{direction:"vertical",style:{width:"100%"}},this.getHeader())),o.a.createElement(b,{peerGrades:n.find((function(e){return e.tileID===t.id}))})))}}]),n}(c.Component)),S=(n(736),function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.tileGroup,n=e.tileEntries,r=e.tiles,a=e.student,i=e.tilesGradeSummary,l=e.peerGrades,c=e.submissions,s=e.discussions,u=e.learningOutcomes;return o.a.createElement("div",{className:"tileGroup"},o.a.createElement("h2",null,t.title),o.a.createElement("div",{className:"tileWrapper"},r.sort((function(e,t){return e.position-t.position})).map((function(e){return o.a.createElement(k,{tile:e,tileEntries:n.filter((function(t){return t.tile_id===e.id})),discussions:s,student:a,submissions:c.filter((function(t){return n.filter((function(t){return t.tile_id===e.id})).map((function(e){return e.id})).includes(t.entry_id)})),userGrades:i.filter((function(t){return t.tile.id===e.id})),peerGrades:l.filter((function(t){return t.tileID===e.id})),learningOutcomes:u,key:e.id})}))))}}]),n}(c.Component)),I=n(315),N=n.n(I),G=n(46),A=n(39),T=n(966),M=n(967),P=n(357),R=(n(737),function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.submissions,n=e.tileEntries;return o.a.createElement("div",{id:"binaryEntries"},o.a.createElement(T.a,{gutter:[5,5]},t.map((function(e){var t="0"!==e.grade.slice(0,1),r=n.find((function(t){return t.id===e.entry_id}));return o.a.createElement(M.a,{key:e.entry_id,xs:12,md:8,lg:6},o.a.createElement("div",{className:"entry ".concat(t?"success":"fail")},o.a.createElement("h2",null,r?r.title:null),t?o.a.createElement("span",null,o.a.createElement(P.a,null)," Present"):o.a.createElement("span",null,"Absent")))}))))}}]),n}(c.Component)),D=n(81),L=n(993),F=n(369),U=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.tileEntry,n=e.submission;"string"===typeof n.meta?JSON.parse(n.meta||"{}"):n.meta;return o.a.createElement("div",{className:"tileEntry"},o.a.createElement("h2",null,t.title),o.a.createElement(F.a,{style:{margin:"5px 0"}}),o.a.createElement(C,{grade:n.grade}),!1)}}]),n}(c.Component),Y=n(316),z=(n(759),function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.tile,n=e.tileEntries,r=e.submissions;if(t.graph_view){var a={labels:r.map((function(e,t){var r,a=n.find((function(t){return t.id===e.entry_id}));return null!==(r=null===a||void 0===a?void 0:a.title)&&void 0!==r?r:"???"})),datasets:[{label:t.title+" grades",data:r.map((function(e){return e.grade})),fill:!1,borderColor:"rgba(75,192,192,1)"}]};return o.a.createElement("div",{id:"tileEntriesGraph",style:{minHeight:"60vh"}},o.a.createElement("div",null,o.a.createElement(Y.Line,{options:{legend:{display:!1}},width:500,data:a})))}return o.a.createElement("div",{id:"tileEntriesList"},o.a.createElement(T.a,{gutter:[10,10]},n.map((function(e){var t=r.find((function(t){return t.entry_id===e.id}));return t?o.a.createElement(M.a,{key:e.id,xs:24,sm:12,md:8,lg:6,className:"entryCol"},o.a.createElement(U,{submission:t,tileEntry:e})):null}))))}}]),n}(c.Component)),B=(n(760),n(34)),W=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.predictions,r=t.tileEntries,a=B.b.getState().tiles,i=a.filter((function(e){return"BINARY"===e.content})).length+1,l=Object(h.a)(r);try{var c=function(){var t=e.value,n=a.find((function(e){return e.id===t.tile_id}));return n?"BINARY"===n.content?"continue":void(i+=1):"continue"};for(l.s();!(e=l.n()).done;)c()}catch(m){l.e(m)}finally{l.f()}var s=function(e){return Math.round(100*e)/100},u=Array.from(Array(i).keys()).map((function(e){return 5-4.5/i*e}));if(0===n.length)return o.a.createElement("div",{id:"gradePrediction"},o.a.createElement("h2",null,"No predictions available."),o.a.createElement("p",null,"Try again later when more grades are available."));var d=n.sort((function(e,t){return e.graded_components-t.graded_components}));return o.a.createElement("div",{id:"gradePrediction"},o.a.createElement("h3",null,"Your predicted grade is a ",o.a.createElement("strong",null,s(d[d.length-1].grade))),o.a.createElement(Y.Bar,{options:{legend:{display:!1},scales:{xAxes:[{id:"x",type:"category"}],yAxes:[{id:"y",type:"linear",position:"left",ticks:{beginAtZero:!0,min:0,max:10}}]}},width:500,data:function(e){var t=e.getContext("2d"),n=t.createLinearGradient(0,0,0,350);n.addColorStop(0,"#FFF"),n.addColorStop(1,"rgb(90, 50, 255)");var r=t.createLinearGradient(0,0,0,350);return r.addColorStop(1,"#FFF"),r.addColorStop(0,"rgb(90, 50, 255)"),{labels:d.map((function(e){return e.graded_components+" graded components"})),datasets:[{label:"Predicted grade",type:"line",backgroundColor:"rgb(90, 50, 255)",borderColor:"rgb(90, 50, 255)",hoverBorderColor:"rgb(90, 50, 255)",fill:!1,tension:0,data:d.map((function(e){return s(e.grade)})),yAxisID:"y",xAxisID:"x"},{label:"UpperConfidence",type:"line",backgroundColor:n,borderColor:"transparent",pointRadius:0,fill:0,tension:0,data:d.map((function(e,t){return e.grade+u[t+3]})),yAxisID:"y",xAxisID:"x"},{label:"LowerConfidence",type:"line",backgroundColor:r,borderColor:"transparent",pointRadius:0,fill:0,tension:0,data:d.map((function(e,t){return e.grade-u[t+3]})),yAxisID:"y",xAxisID:"x"}]}}}),o.a.createElement("p",null,"Grade predictions will grow more accurate as the course progresses."))}}]),n}(c.Component),H=(n(761),function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props.discussions;return o.a.createElement("div",{id:"discussionsList"},o.a.createElement(T.a,{gutter:[10,10]},e.map((function(e){return o.a.createElement(M.a,{key:e.id,xs:24,md:12,lg:8},o.a.createElement("div",{className:"discussion"},o.a.createElement("h2",null,e.title),o.a.createElement("small",null,e.posted_at),o.a.createElement(F.a,null),o.a.createElement("p",{dangerouslySetInnerHTML:{__html:e.message}})))}))))}}]),n}(c.Component)),V=n(713),q=n(992),J=(n(762),function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.learningOutcomes,n=e.tileEntries;return o.a.createElement("div",{id:"learningOutcomes"},o.a.createElement("div",{style:{margin:"0 auto",maxWidth:"400px",width:"100%"}},t.map((function(e,t){return o.a.createElement("div",{key:e.goal.id,style:{margin:"5px 0"}},o.a.createElement(V.a.Ribbon,{text:e.success?"Completed":"Not completed",color:e.success?"green":"red"},o.a.createElement(q.a,{title:"Goal ".concat(t),size:"small"},o.a.createElement("strong",null,e.goal.title),o.a.createElement("br",null),e.goal.requirements.map((function(e){var t=n.find((function(t){return t.id===e.entry_id}));return o.a.createElement("span",null,t?t.title:"???"," ",function(e){switch(e){case"lte":return"\u2264";case"gte":return"\u2265";default:return"="}}(e.expression)," ",e.value,o.a.createElement("br",null))})))))}))))}}]),n}(c.Component)),Z=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).content=function(){var t=e.props,n=t.tile,r=t.submissions,a=t.tileEntries,i=t.predictions,l=t.discussions,c=t.learningOutcomes;switch(n.content){case"BINARY":return o.a.createElement(R,{submissions:r.filter((function(e){return a.filter((function(e){return e.tile_id===n.id})).map((function(e){return e.id})).includes(e.entry_id)})),tileEntries:a.filter((function(e){return e.tile_id===n.id}))});case"ENTRIES":switch(n.type){case"DISCUSSIONS":return o.a.createElement(H,{discussions:l,tile:n});default:return o.a.createElement(z,{submissions:r.filter((function(e){return a.filter((function(e){return e.tile_id===n.id})).map((function(e){return e.id})).includes(e.entry_id)})),tileEntries:a.filter((function(e){return e.tile_id===n.id})),discussions:l,tile:n})}case"PREDICTION":return o.a.createElement(W,{tileEntries:a,predictions:i});case"LEARNING_OUTCOMES":return o.a.createElement(J,{learningOutcomes:c,tileEntries:a});default:return null}},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props.tile;return o.a.createElement("div",{style:{padding:20}},o.a.createElement(D.a,{type:"ghost",icon:o.a.createElement(L.a,null),onClick:function(){window.dispatchEvent(new CustomEvent("selectTile",{detail:void 0}))}},"Return to dashboard"),o.a.createElement("h1",{style:{margin:"10px 0"}},e.title),this.content())}}]),n}(c.Component),$=n(181),K=n(999),Q=n(1e3),X=n(67),ee=n(763),te=(n(303),function(e,t,n){var r=2*Math.PI/e.length,a=new Array(e.length).fill({x:0,y:0,tile:void 0}),i=new Array(e.length+1).fill("").reduce((function(i,l,c){if(c>e.length)return i;var o=t(n(e[c-1]),e[c-1].tile)*Math.sin(c*r),s=t(n(e[c-1]),e[c-1].tile)*Math.cos(c*r);return a[c-1]={x:o,y:s,tile:e[c-1].tile},i+="".concat(o||0,",").concat(s||0," ")}));return{points:a,pointString:i}}),ne=function(e,t){return e>1?"start":e<-.1?"end":"middle"},re=n(981),ae=n(779),ie=n(778),le=n(780),ce=(n(777),"#d9d9d9"),oe="#ff9933",se=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.tilesGradeSummary,n=e.peerGrades,r=50,a=75,i=75,l=50;return o.a.createElement("div",{id:"tileRadial"},o.a.createElement("h2",{style:{textAlign:"center"}},"What requires my attention?"),o.a.createElement("br",null),o.a.createElement("div",{style:{width:"100%"}},o.a.createElement(ee.SizeMe,{monitorWidth:!0,refreshMode:"throttle",refreshRate:40},(function(e){var c=e.size;if((c.width||0)<50||!c.width)return o.a.createElement("span",null,"Can't display radar");var s=c.width-a-i,u=c.width-r-l,d=Math.min(s,u)/2,m=(Object(re.a)().range([0,2*Math.PI]).domain([360,0]),function(e,r){var a=t.filter((function(e){return e.tile.id===r.id})),i=n.filter((function(e){return e.tileID===r.id}));return Object(re.a)({range:[0,d],domain:[0,"BINARY"===r.content?100:Math.max(10,Math.max.apply(Math,Object(f.a)(a.map((function(e){return e.average}))).concat(Object(f.a)(i.map((function(e){return e.avg}))))))]})(e)}),p=(function(e,t){Object(f.a)(new Array(e+1)).map((function(n,r){return{angle:r*(t/e)}}))}(t.length,360),new ie.a({x:0,y:0})),h=function(e,t){var n=2*Math.PI/e;return Object(f.a)(new Array(e)).map((function(e,r){return{x:t*Math.sin(r*n),y:t*Math.cos(r*n)}}))}(t.length,d),g=te(t,(function(e,t){return m(e,t)}),(function(e){return e.average})),v=te(Object(f.a)(t).map((function(e){var t,r=n.find((function(t){return t.tileID===e.tile.id}));return Object(X.a)(Object(X.a)({},e),{},{average:null!==(t=null===r||void 0===r?void 0:r.avg)&&void 0!==t?t:0})})),(function(e,t){return m(e,t)}),(function(e){return e.average}));return o.a.createElement("svg",{width:"".concat(100,"%"),height:"".concat(c.width||0,"px")},o.a.createElement("rect",{width:"".concat(c.width||0,"px"),height:"".concat(c.width||0,"px"),fill:"#FAF7E9",rx:14}),o.a.createElement(ae.a,{top:c.width/2-r,left:c.width/2},Object(f.a)(new Array(t.length)).map((function(e,t){return o.a.createElement(le.a,{key:"radar-line-".concat(t),from:p,to:h[t],stroke:ce})})),o.a.createElement("polygon",{opacity:1,points:v.pointString,fill:"rgba(255, 0, 0, 0.3)",fillOpacity:.3,stroke:"red",strokeWidth:1,style:{transition:"opacity .4s ease-in-out",zIndex:90}}),v.points.map((function(e,t){return o.a.createElement("circle",{key:"peer-point-".concat(t),cx:e.x,cy:e.y,r:2,opacity:1,fill:"red",style:{transition:"opacity .4s ease-in-out",zIndex:90},onClick:function(){window.dispatchEvent(new CustomEvent("selectTile",{detail:{tile:e.tile}}))}})})),h.map((function(e,n){return o.a.createElement(o.a.Fragment,{key:n},o.a.createElement(le.a,{key:"radar-line-".concat(n),from:0===n?h[h.length-1]:h[n-1],to:h[n],stroke:ce}),t[0===n?t.length-1:n-1].tile.title.split(" ").map((function(t,n){return o.a.createElement("text",{x:e.x>0?e.x+10:e.x-10,y:e.y>0?e.y+10+12*n:e.y-10-12*n,textAnchor:ne(e.x,e.y),style:{whiteSpace:"pre-wrap"},key:"$x:{x};j:".concat(n)},t)})))})),o.a.createElement("polygon",{points:g.pointString,fill:oe,fillOpacity:.3,stroke:oe,strokeWidth:1,style:{zIndex:100}}),g.points.map((function(e,t){return o.a.createElement("circle",{key:"radar-point-".concat(t),cx:String(e.x),cy:String(e.y),r:4,fill:"#f5810c",style:{zIndex:100},onClick:function(){window.dispatchEvent(new CustomEvent("selectTile",{detail:{tile:e.tile}}))}})}))),o.a.createElement("circle",{cy:(c.width||0)-20,cx:20,fill:oe,r:5}),o.a.createElement("text",{y:(c.width||0)-15,x:30},"You"),o.a.createElement("circle",{cy:(c.width||0)-20,cx:80,fill:"red",r:5}),o.a.createElement("text",{y:(c.width||0)-15,x:90},"Peers"))}))))}}]),n}(c.Component),ue=n(52),de=(n(781),n(102)),me=n(54),pe=n(997),fe=n(998),he=n(93),ge=Object(ue.b)((function(e){return{course:e.course,tiles:e.tiles}}))(function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i)))._isMounted=!1,e.state={notifications:[]},e.loadNotifications=function(t){var n=t.student;n&&he.a.getNotifications(n.login_id).then((function(t){e._isMounted&&e.setState({notifications:t})}))},e._getTileTitle=function(t){var n,r;return null!==(n=null===(r=e.props.tiles.find((function(e){return e.id===t})))||void 0===r?void 0:r.title)&&void 0!==n?n:""},e}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.loadNotifications(this.props)}},{key:"componentWillReceiveProps",value:function(e,t){var n,r;(null===(n=e.student)||void 0===n?void 0:n.login_id)!==(null===(r=this.props.student)||void 0===r?void 0:r.login_id)&&this.loadNotifications(e)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.props,n=t.course,r=t.student,a=(t.tiles,this.state.notifications),i=a.filter((function(e){return"outperforming peers"===e.status})).sort((function(t,n){return e._getTileTitle(t.tile_id).localeCompare(e._getTileTitle(n.tile_id))})),l=a.filter((function(e){return"closing the gap"===e.status})).sort((function(t,n){return e._getTileTitle(t.tile_id).localeCompare(e._getTileTitle(n.tile_id))})),c=a.filter((function(e){return"more effort required"===e.status})).sort((function(t,n){return e._getTileTitle(t.tile_id).localeCompare(e._getTileTitle(n.tile_id))}));return o.a.createElement("div",{id:"userProfile"},o.a.createElement(T.a,null,o.a.createElement(M.a,{xs:24,style:{textAlign:"center"}},o.a.createElement(me.b,{to:"/goal-grade"},o.a.createElement(D.a,{size:"large",color:"primary"},"Goal Grade"))),o.a.createElement(M.a,{xs:24,md:8,lg:6},o.a.createElement("h3",null,r&&r.name),o.a.createElement("strong",null,n&&n.course_name)),o.a.createElement(M.a,{xs:24,md:0},o.a.createElement(F.a,null)),o.a.createElement(M.a,{xs:24,md:16,lg:18},i.length>0&&o.a.createElement("div",null,o.a.createElement(pe.a,null)," ","You are outperforming your peers in:",o.a.createElement("ul",{style:{boxSizing:"border-box",paddingLeft:30}},i.map((function(t,n){return o.a.createElement("li",{key:n},e._getTileTitle(t.tile_id))})))),l.length>0&&o.a.createElement("div",null,o.a.createElement(fe.a,null)," ","You are closing the gap to your peers in:",o.a.createElement("ul",{style:{boxSizing:"border-box",paddingLeft:30}},l.map((function(t,n){return o.a.createElement("li",{key:n},e._getTileTitle(t.tile_id))})))),c.length>0&&o.a.createElement("div",null,o.a.createElement(_.a,null)," ","You have to put more effort in:",o.a.createElement("ul",{style:{boxSizing:"border-box",paddingLeft:30}},c.map((function(t){return o.a.createElement("li",null,e._getTileTitle(t.tile_id))})))),o.a.createElement("div",{style:{textAlign:"right"}},o.a.createElement(me.b,{to:"/consent"},"Informed Consent")))),o.a.createElement("br",null),o.a.createElement("div",{style:{textAlign:"center"}},o.a.createElement("small",null,"IGuideME is a product by the University of Amsterdam.")))}}]),n}(c.Component)),ve=n(303),Ee={loadPredictions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"self";return de.a.loadPredictions(e)}},be=Object(ue.b)((function(e){return{dashboardColumns:e.dashboardColumns,tiles:e.tiles,tileGroups:e.tileGroups,tileEntries:e.tileEntries,predictions:e.predictions}}),Ee)(function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).state={tilesGradeSummary:[],peerGrades:[],userSubmissions:[],loaded:!0,displayTile:void 0,discussions:[],learningOutcomes:[],viewType:"radar"},e.setup=function(){var t=Object(g.a)(p.a.mark((function t(n){var r,a,i,l,c,o,s,u,d,m,g,v,E,b,y,O=arguments;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=O.length>1&&void 0!==O[1]?O[1]:[],a=n.tiles,i=n.student,l=n.tileEntries,c=n.predictions,i){t.next=4;break}return t.abrupt("return");case 4:e.setState({loaded:!1}),o=[],s=[],u=Object(h.a)(a.filter((function(e){return"DISCUSSIONS"===e.type}))),t.prev=8,u.s();case 10:if((d=u.n()).done){t.next=18;break}return m=d.value,t.next=14,G.a.getDiscussions(m.id,i.login_id).then((function(e){return e}));case 14:g=t.sent,o.push.apply(o,Object(f.a)(g));case 16:t.next=10;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(8),u.e(t.t0);case 23:return t.prev=23,u.f(),t.finish(23);case 26:v=Object(h.a)(a.filter((function(e){return"LEARNING_OUTCOMES"===e.content}))),t.prev=27,v.s();case 29:if((E=v.n()).done){t.next=37;break}return b=E.value,t.next=33,G.a.getUserGoals(b.id,i.login_id).then((function(e){return e}));case 33:y=t.sent,s.push.apply(s,Object(f.a)(y));case 35:t.next=29;break;case 37:t.next=42;break;case 39:t.prev=39,t.t1=t.catch(27),v.e(t.t1);case 42:return t.prev=42,v.f(),t.finish(42);case 45:G.a.getSubmissions(i.login_id).then((function(t){var n=a.filter((function(e){return"PREDICTION"!==e.content&&"LEARNING_OUTCOMES"!==e.content&&"DISCUSSIONS"!==e.type})).map((function(e){return{tile:e,average:"binary"===e.content.toLowerCase()?t.filter((function(t){return l.filter((function(n){return n.tile_id===e.id&&parseFloat(t.grade)>.1})).map((function(e){return e.id})).includes(t.entry_id)})).length/t.filter((function(t){return l.filter((function(t){return t.tile_id===e.id})).map((function(e){return e.id})).includes(t.entry_id)})).length*100:ve.mean(t.filter((function(t){return l.filter((function(t){return t.tile_id===e.id})).map((function(e){return e.id})).includes(t.entry_id)})).map((function(e){return parseFloat(e.grade)})))}}));if(a.filter((function(e){return"PREDICTION"===e.content})).length>0){var u=(r.length>0?r:c).sort((function(e,t){return t.graded_components-e.graded_components}));n.push({tile:a.find((function(e){return"PREDICTION"==e.content})),average:u.length>0?u[0].grade:0})}e.setState({discussions:o,learningOutcomes:s,tilesGradeSummary:n,userSubmissions:t},(function(){G.a.getPeerResults(i.login_id).then((function(t){return e.setState({peerGrades:t,loaded:!0})})).catch((function(){return e.setState({loaded:!0})}))}))}));case 46:case"end":return t.stop()}}),t,null,[[8,20,23,26],[27,39,42,45]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("selectTile",(function(t){if(t.detail){var n=t.detail;e.setState({displayTile:n})}else e.setState({displayTile:void 0})})),this.setup(this.props)}},{key:"componentWillReceiveProps",value:function(e,t){var n,r,a=this;(null===(n=e.student)||void 0===n?void 0:n.login_id)!==(null===(r=this.props.student)||void 0===r?void 0:r.login_id)&&e.student&&this.props.loadPredictions(e.student.login_id).then((function(t){var n=t.payload;a.setup(e,n)})),e.predictions.length!==this.props.predictions.length&&this.setup(e)}},{key:"render",value:function(){var e=this,t=this.state,n=t.loaded,r=t.displayTile,a=t.viewType,i=t.tilesGradeSummary,l=t.peerGrades,c=t.userSubmissions,s=t.discussions,u=t.learningOutcomes,d=this.props,m=d.tiles,p=d.tileGroups,f=d.dashboardColumns,h=d.tileEntries,g=d.student,v=d.predictions;return n&&g?r?o.a.createElement(Z,{tile:r.tile,tileEntries:h,discussions:s,predictions:v,submissions:c,learningOutcomes:u}):o.a.createElement("div",{id:"studentDashboard"},o.a.createElement($.a.Group,{value:a,buttonStyle:"solid",onChange:function(t){return e.setState({viewType:t.target.value})}},o.a.createElement($.a.Button,{value:"radar"},o.a.createElement(K.a,null)," Radar"),o.a.createElement($.a.Button,{value:"grid"},o.a.createElement(Q.a,null)," Grid")),"grid"===a?o.a.createElement(N.a,null,o.a.createElement("div",null,f.map((function(e){return o.a.createElement("div",{className:"column ".concat(e.container_width),key:e.id},p.filter((function(t){return t.column_id===e.id})).sort((function(e,t){return e.position-t.position})).map((function(e){return o.a.createElement(S,{tileGroup:e,tiles:m.filter((function(t){return t.group_id===e.id})),discussions:s,tileEntries:h.filter((function(t){return m.filter((function(t){return t.group_id===e.id})).map((function(e){return e.id})).includes(t.tile_id)})),student:g,tilesGradeSummary:i.filter((function(t){return t.tile.group_id===e.id})),peerGrades:l,submissions:c,learningOutcomes:u,key:e.id})})))})))):o.a.createElement(se,{tiles:m,tileEntries:h,student:g,tilesGradeSummary:i,peerGrades:l}),o.a.createElement(ge,{student:this.props.student})):o.a.createElement(A.a,{small:!0})}}]),n}(c.Component)),ye=n(962),Oe=n(1001),je=(n(782),function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return this.props.student?o.a.createElement(be,{student:this.props.student}):o.a.createElement("div",{id:"getStarted"},o.a.createElement(ye.a,{icon:o.a.createElement(Oe.a,null),title:o.a.createElement("div",null,o.a.createElement("h2",null,"Pick a student to start!"),o.a.createElement("h1",{id:"brand"},"IGuideME"))}))}}]),n}(c.Component)),xe=n(40),we=n(14),_e=Object(ue.b)((function(e){return{user:e.user,predictions:e.predictions}})),Ce=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).state={student:null,goalGrade:void 0},e}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.isAdmin?this.setState({goalGrade:10}):(xe.a.getUser().then((function(t){return e.setState({student:t})})),xe.a.getGoalGrade().then((function(t){return e.setState({goalGrade:t})})))}},{key:"render",value:function(){var e=this,t=this.props.isAdmin,n=this.state,r=n.student,a=n.goalGrade;return void 0===a?o.a.createElement(A.a,null):-1===a?o.a.createElement(we.a,{to:"goal-grade"}):o.a.createElement("div",{id:"app"},t&&o.a.createElement(d.a,{studentPickView:!0,setStudent:function(t){e.setState({student:t},(function(){return window.dispatchEvent(new CustomEvent("selectTile",{detail:void 0}))}))}}),t?o.a.createElement(je,{student:r}):null===r?o.a.createElement("h1",null,"Your account has not yet been processed, try again tomorrow!"):o.a.createElement(be,{student:r||void 0}))}}]),n}(c.Component);t.default=Object(s.a)(Object(u.a)(_e(Ce)))}}]);
//# sourceMappingURL=17.fa8718db.chunk.js.map