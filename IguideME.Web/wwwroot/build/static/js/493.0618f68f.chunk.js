"use strict";(self.webpackChunkiguideme=self.webpackChunkiguideme||[]).push([[493],{4525:function(t,e,n){n.d(e,{Z:function(){return w}});var s=n(15671),r=n(43144),i=n(60136),a=n(54062),o=n(72791),d=n(28286),c=n(49109),l=n(64880),u=n(58686),m=n(19603),h=n(29529),x=n(78222),p=n(68961),f=n(55240),j=n(56200),Z=n(68409),v=n(30836),y=n(34633),S=n(6314),g=n(9150),b=n(752),k=n(36090),I=n(91523),T=n(60364),O=n(80184),z=(0,T.$j)((function(t){return{user:t.user}})),C=function(t){(0,i.Z)(n,t);var e=(0,a.Z)(n);function n(){return(0,s.Z)(this,n),e.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){var t=this.props.user;return(0,O.jsxs)("div",{id:"adminMenu",children:[(0,O.jsxs)("div",{id:"user",children:[(0,O.jsx)("h3",{children:t?t.name:"Loading profile..."}),(0,O.jsxs)("strong",{children:[(0,O.jsx)(h.Z,{})," Instructor"]})]}),(0,O.jsxs)(k.Z,{selectedKeys:[this.props.menuKey],children:[(0,O.jsx)(k.Z.Item,{icon:(0,O.jsx)(x.Z,{}),children:(0,O.jsx)(I.rU,{to:"/admin",children:"Datamart"})},"datamart"),(0,O.jsx)(k.Z.Item,{icon:(0,O.jsx)(p.Z,{}),children:(0,O.jsx)(I.rU,{to:"/admin/tiles",children:"Tiles"})},"tiles"),(0,O.jsx)(k.Z.Item,{icon:(0,O.jsx)(f.Z,{}),children:(0,O.jsx)(I.rU,{to:"/admin/dashboard",children:"Dashboard"})},"dashboard"),(0,O.jsx)(k.Z.Item,{icon:(0,O.jsx)(j.Z,{}),children:(0,O.jsx)(I.rU,{to:"/admin/student-overview",children:"Student Overview"})},"studentOverview"),(0,O.jsxs)(k.Z.SubMenu,{icon:(0,O.jsx)(Z.Z,{}),title:"Grades",children:[(0,O.jsx)(k.Z.Item,{icon:(0,O.jsx)(v.Z,{}),children:(0,O.jsx)(I.rU,{to:"/admin/grade-predictor",children:"Predictor"})},"gradePredictor"),(0,O.jsx)(k.Z.Item,{icon:(0,O.jsx)(y.Z,{}),children:(0,O.jsx)(I.rU,{to:"/admin/grade-analyzer",children:"Analyzer"})},"gradeAnalyzer")]},"submenu"),(0,O.jsx)(k.Z.Item,{icon:(0,O.jsx)(S.Z,{}),children:(0,O.jsx)(I.rU,{to:"/admin/data-wizard",children:"Data Wizard"})},"dataWizard"),(0,O.jsx)(k.Z.Item,{icon:(0,O.jsx)(g.Z,{}),children:(0,O.jsx)(I.rU,{to:"/admin/notification-centre",children:"Notification Centre"})},"notificationCentre"),(0,O.jsx)(k.Z.Item,{icon:(0,O.jsx)(b.Z,{}),children:(0,O.jsx)(I.rU,{to:"/admin/settings",children:"Settings"})},"settings")]})]})}}]),n}(o.Component),E=z(C),N=function(t){(0,i.Z)(n,t);var e=(0,a.Z)(n);function n(){return(0,s.Z)(this,n),e.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){var t=this.props,e=t.isAdmin,n=t.menuKey;return e?(0,O.jsxs)("div",{id:"admin",children:[(0,O.jsx)(c.Z,{}),(0,O.jsxs)(u.Z,{children:[(0,O.jsx)(m.Z,{xs:4,children:(0,O.jsx)(E,{menuKey:n})}),(0,O.jsx)(m.Z,{xs:20,id:"wrapper",className:"".concat("settings"!==n&&"noOverflow"),children:this.props.children})]})]}):(0,O.jsx)(l.l_,{to:"/"})}}]),n}(o.Component),w=(0,d.u)(N)},23493:function(t,e,n){n.r(e),n.d(e,{default:function(){return N}});var s=n(15671),r=n(43144),i=n(60136),a=n(54062),o=n(72791),d=n(92143),c=n(37083),l=n(62865),u=n(4525),m=n(74165),h=n(15861),x=n(50419),p=n(58686),f=n(19603),j=n(75594),Z=n(21830),v=n.n(Z),y=n(80184),S=function(t){(0,i.Z)(n,t);var e=(0,a.Z)(n);function n(){return(0,s.Z)(this,n),e.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){var t=this.props,e=t.startSync,n=t.abortSync,s=t.elapsed;return(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{children:(0,y.jsxs)(d.Zb,{width:208,height:208,elevation:3,className:"clock-wrapper",style:{borderRadius:"208px"},children:[(0,y.jsx)(d.Zb,{flat:!0,width:208,height:208,style:{borderRadius:"208px"},className:"clock-dashed ".concat(s?"clock-dashed--animating":"")}),(0,y.jsx)("span",{className:"elapsed-time",children:(0,y.jsxs)("h3",{children:[(0,y.jsx)("small",{children:"elapsed time"}),(0,y.jsx)("br",{}),s||"Idle"]})})]})}),(0,y.jsx)("br",{}),(0,y.jsxs)(p.Z,{gutter:10,children:[(0,y.jsx)(f.Z,{xs:12,children:(0,y.jsx)(d.zx,{color:"rgb(0, 185, 120)",disabled:void 0!==s,block:!0,onClick:e,children:"synchronize"})}),(0,y.jsx)(f.Z,{xs:12,children:(0,y.jsx)(d.zx,{disabled:void 0===s,color:"rgb(255, 110, 90)",block:!0,onClick:function(){v().fire({title:"Do you really want to abort the synchronization?",text:"It will be unsuccessful!",icon:"warning",focusCancel:!0,showCancelButton:!0,confirmButtonText:"Abort",cancelButtonText:"Cancel",customClass:{}}).then((function(t){t.value&&(n(),v().fire("Synchronization aborted!","The synchronization has stopped and the most recent data will be used instead.","error"))}))},children:"abort"})})]})]})}}]),n}(o.Component),g=n(72426),b=n.n(g),k=function(t){return t.BOOT_UP="tasks.boot-up",t.STUDENTS="tasks.students",t.QUIZZES="tasks.quizzes",t.DISCUSSIONS="tasks.discussions",t.ASSIGNMENTS="tasks.assignments",t.SUBMISSIONS="tasks.submissions",t.GRADE_PREDICTOR="tasks.grade-predictor",t.PEER_GROUPS="tasks.peer-groups",t.NOTIFICATIONS="tasks.notifications",t.DONE="tasks.done",t}({}),I=function(t){if(t)return b()(b().utc().diff(t)).utcOffset(0).format("HH:mm:ss")},T=[{id:k.BOOT_UP,title:"Boot-up",description:"Establish a connection."},{id:k.STUDENTS,title:"Students",description:"Register enrolled students."},{id:k.QUIZZES,title:"Quizzes",description:"Obtain available quizzes."},{id:k.DISCUSSIONS,title:"Discussions",description:"Obtain posted discussions."},{id:k.ASSIGNMENTS,title:"Assignments",description:"Obtain available assignments."},{id:k.SUBMISSIONS,title:"Submissions",description:"Obtain submissions from students."},{id:k.GRADE_PREDICTOR,title:"Grade Prediction",description:"Predict grade per student."},{id:k.PEER_GROUPS,title:"Peer Groups",description:"Assign student peer groups."},{id:k.NOTIFICATIONS,title:"Notifications",description:"Send performance notifications to the students."}],O=n(12740),z=n(95909),C=n(68438),E=function(t){(0,i.Z)(n,t);var e=(0,a.Z)(n);function n(){var t;(0,s.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).interval=void 0,t.state={loaded:!1,start:void 0,elapsedTime:void 0,datamartError:!1,currentTask:null,completedTasks:[],currentTasks:[]},t.badgeStyle=function(e){var n=t.state.currentTask,s=T.findIndex((function(t){return t.id===e})),r=T.findIndex((function(t){return t.id===n}));return console.log("state:",t.state),console.log("task:",e),t.props.prevsuccess&&void 0===t.state.start||s<r?{color:"success",text:"Completed"}:s===r?{color:"warning",text:"In-progress"}:{color:"error",text:"Unstarted"}},t.startSync=function(){t.setState({datamartError:!1}),O.Z.startNewSync().then((function(e){e?(x.ZP.success("Sync started!"),t.setState({start:b().utc()}),t.pollSync()):t.setState({datamartError:!0})}))},t.pollSync=function(){t.interval=setInterval((0,h.Z)((0,m.Z)().mark((function e(){return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.Z.getStatus().then((function(e){var n=Object.keys(e).find((function(t){return e[t].progressInformation!==k.DONE}));if(!n)return t.setState({start:void 0}),void clearInterval(t.interval);t.setState({elapsedTime:I(b().utc(e[n].startTime)),currentTask:e[n].progressInformation})}));case 2:case"end":return e.stop()}}),e)}))),1e3)},t.abortSync=function(){t.interval&&clearInterval(t.interval),t.setState({start:void 0,completedTasks:[],currentTasks:[]})},t}return(0,r.Z)(n,[{key:"componentDidMount",value:function(){this.setState({loaded:!0})}},{key:"componentWillUnmount",value:function(){(0,C.f)()&&localStorage.removeItem("debugHandshake")}},{key:"render",value:function(){var t=this,e=this.state,n=e.loaded,s=e.datamartError;return n?(0,y.jsxs)(p.Z,{gutter:[20,20],children:[(0,y.jsxs)(f.Z,{xs:24,md:12,lg:9,children:[(0,y.jsx)(S,{startSync:this.startSync,abortSync:this.abortSync,elapsed:I(this.state.start)}),s&&(0,y.jsx)(d.bZ,{type:"error",outlined:!0,style:{marginTop:20},children:"Failed to reach datamart. Try again later!"})]}),(0,y.jsx)(f.Z,{xs:24,md:12,lg:15,children:(0,y.jsx)(d.Zb,{elevation:1,style:{padding:10,backgroundColor:"rgb(246, 248, 250)"},children:(0,y.jsx)(p.Z,{gutter:[10,10],children:T.map((function(e){return(0,y.jsx)(f.Z,{xs:24,lg:12,children:(0,y.jsx)(d.Zb,{style:{display:"flex",alignItems:"center"},elevation:1,children:(0,y.jsxs)(d.Zb,{flat:!0,style:{width:"100%",padding:20},children:[(0,y.jsx)(j.Z,{status:t.badgeStyle(e.id).color,text:t.badgeStyle(e.id).text,style:{float:"right"}}),(0,y.jsx)("h4",{style:{margin:0},children:e.title}),(0,y.jsx)(d.YS,{secondary:!0,component:"span",children:e.description})]})})},e.id)}))})})})]}):(0,y.jsx)(z.Z,{small:!0})}}]),n}(o.Component),N=function(t){(0,i.Z)(n,t);var e=(0,a.Z)(n);function n(){var t;(0,s.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).state={loaded:!1,synchronizations:[]},t}return(0,r.Z)(n,[{key:"componentDidMount",value:function(){var t=this;O.Z.getSynchronizations().then((function(e){return t.setState({synchronizations:e.sort((function(t,e){return b()(t.start_timestamp,"MM/DD/YYYY HH:mm:ss").isBefore(b()(e.start_timestamp,"MM/DD/YYYY HH:mm:ss"))?1:-1})),loaded:!0})}))}},{key:"render",value:function(){var t=this.state,e=t.loaded,n=t.synchronizations,s="MMMM Do[,] YYYY [at] HH:mm",r=e?n.filter((function(t){return"COMPLETE"===t.status})):[],i=r.length>0?r[0]:null,a=n.map((function(t){var e=b()(t.start_timestamp);if(null===t.end_timestamp)return{start_timestamp:e.format(s),end_timestamp:null,duration:null,status:t.status};var n=b()(t.end_timestamp),r=b()(n.diff(e)).format("m[m] s[s]");return{start_timestamp:e.format(s),end_timestamp:n.format(s),duration:r,status:t.status}}));return(0,y.jsx)(u.Z,{menuKey:"datamart",children:(0,y.jsxs)("div",{id:"datamart",children:[(0,y.jsx)("h1",{children:"Datamart"}),e?i?(0,y.jsxs)("p",{children:["The latest successful synchronization took place on",(0,y.jsxs)("b",{children:[" ",b()(i.start_timestamp).format(s)," "]}),(0,y.jsxs)("small",{children:["(",b()(i.start_timestamp).fromNow(),")"]}),". Syncs run automatically at 03:00AM (UTC time)."]}):(0,y.jsx)("p",{children:"No historic syncs available."}):(0,y.jsxs)("div",{children:[(0,y.jsx)(c.Z,{})," Retrieving latest synchronization..."]}),(0,y.jsx)(d.iz,{dense:!0,style:{margin:"10px 0"}}),(0,y.jsx)(E,{prevsuccess:!(!a||!a[0])&&"COMPLETE"===a[0].status}),e&&(0,y.jsxs)(o.Fragment,{children:[(0,y.jsx)("h1",{style:{marginTop:20},children:"Historic versions"}),(0,y.jsx)(d.iz,{dense:!0,style:{margin:"10px 0"}}),(0,y.jsx)(l.Z,{scroll:{x:240},dataSource:a,columns:[{title:"Start timestamp",dataIndex:"start_timestamp",key:"start_timestamp"},{title:"End timestamp",dataIndex:"end_timestamp",key:"end_timestamp"},{title:"Duration",dataIndex:"duration",key:"duration"},{title:"Status",dataIndex:"status",key:"status",render:function(t,e){return(0,y.jsx)("code",{children:t})}}]})]})]})})}}]),n}(o.Component)}}]);
//# sourceMappingURL=493.0618f68f.chunk.js.map