"use strict";(self.webpackChunkiguideme=self.webpackChunkiguideme||[]).push([[660],{90785:function(t,r,e){e.d(r,{Z:function(){return V}});var o=e(87462),n=e(29439),s=e(4942),i=e(37557),a=e(68944),u=e(82621),h=e(11532),c=e(60732),f=e(10187),l=e(35796),m=e(83844),v=e(29966),p=e(81694),w=e.n(p),g=e(15207),d=e(72791),y=e(71929),b=e(69019),M=e(61113),k=e(15671),x=e(43144),E=e(60136),S=e(95212),N=function(t){(0,E.Z)(e,t);var r=(0,S.Z)(e);function e(){var t;return(0,k.Z)(this,e),(t=r.apply(this,arguments)).state={error:void 0,info:{componentStack:""}},t}return(0,x.Z)(e,[{key:"componentDidCatch",value:function(t,r){this.setState({error:t,info:r})}},{key:"render",value:function(){var t=this.props,r=t.message,e=t.description,o=t.children,n=this.state,s=n.error,i=n.info,a=i&&i.componentStack?i.componentStack:null,u="undefined"===typeof r?(s||"").toString():r,h="undefined"===typeof e?a:e;return s?d.createElement(V,{type:"error",message:u,description:d.createElement("pre",null,h)}):o}}]),e}(d.Component),C=N,R=function(t,r){var e={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.indexOf(o)<0&&(e[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(t);n<o.length;n++)r.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(t,o[n])&&(e[o[n]]=t[o[n]])}return e},Z={success:i.Z,info:m.Z,error:u.Z,warning:f.Z},I={success:a.Z,info:v.Z,error:h.Z,warning:l.Z},T=function(t){var r=t.description,e=t.icon,o=t.prefixCls,n=t.type,i=(r?I:Z)[n]||null;return e?(0,M.wm)(e,d.createElement("span",{className:"".concat(o,"-icon")},e),(function(){return{className:w()("".concat(o,"-icon"),(0,s.Z)({},e.props.className,e.props.className))}})):d.createElement(i,{className:"".concat(o,"-icon")})},A=function(t){var r=t.isClosable,e=t.closeText,o=t.prefixCls,n=t.closeIcon,s=t.handleClose;return r?d.createElement("button",{type:"button",onClick:s,className:"".concat(o,"-close-icon"),tabIndex:0},e?d.createElement("span",{className:"".concat(o,"-close-text")},e):n):null},P=function(t){var r,e=t.description,i=t.prefixCls,a=t.message,u=t.banner,h=t.className,f=void 0===h?"":h,l=t.style,m=t.onMouseEnter,v=t.onMouseLeave,p=t.onClick,M=t.afterClose,k=t.showIcon,x=t.closable,E=t.closeText,S=t.closeIcon,N=void 0===S?d.createElement(c.Z,null):S,C=t.action,Z=R(t,["description","prefixCls","message","banner","className","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action"]),I=d.useState(!1),P=(0,n.Z)(I,2),V=P[0],q=P[1],j=d.useRef(),z=d.useContext(y.E_),F=z.getPrefixCls,O=z.direction,D=F("alert",i),L=function(t){var r;q(!0),null===(r=Z.onClose)||void 0===r||r.call(Z,t)},_=!!E||x,U=function(){var t=Z.type;return void 0!==t?t:u?"warning":"info"}(),W=!(!u||void 0!==k)||k,Y=w()(D,"".concat(D,"-").concat(U),(r={},(0,s.Z)(r,"".concat(D,"-with-description"),!!e),(0,s.Z)(r,"".concat(D,"-no-icon"),!W),(0,s.Z)(r,"".concat(D,"-banner"),!!u),(0,s.Z)(r,"".concat(D,"-rtl"),"rtl"===O),r),f),B=(0,b.Z)(Z);return d.createElement(g.Z,{visible:!V,motionName:"".concat(D,"-motion"),motionAppear:!1,motionEnter:!1,onLeaveStart:function(t){return{maxHeight:t.offsetHeight}},onLeaveEnd:M},(function(t){var r=t.className,n=t.style;return d.createElement("div",(0,o.Z)({ref:j,"data-show":!V,className:w()(Y,r),style:(0,o.Z)((0,o.Z)({},l),n),onMouseEnter:m,onMouseLeave:v,onClick:p,role:"alert"},B),W?d.createElement(T,{description:e,icon:Z.icon,prefixCls:D,type:U}):null,d.createElement("div",{className:"".concat(D,"-content")},a?d.createElement("div",{className:"".concat(D,"-message")},a):null,e?d.createElement("div",{className:"".concat(D,"-description")},e):null),C?d.createElement("div",{className:"".concat(D,"-action")},C):null,d.createElement(A,{isClosable:!!_,closeText:E,prefixCls:D,closeIcon:N,handleClose:L}))}))};P.ErrorBoundary=C;var V=P},44091:function(t,r,e){e.d(r,{Z:function(){return Z}});var o=e(87462),n=e(4942),s=e(67575),i=e(60732),a=e(81694),u=e.n(a),h=e(1413),c=e(45987),f=e(15671),l=e(43144),m=e(97326),v=e(60136),p=e(95212),w=e(72791),g=["className","prefixCls","style","active","status","iconPrefix","icon","wrapperStyle","stepNumber","disabled","description","title","subTitle","progressDot","stepIcon","tailContent","icons","stepIndex","onStepClick","onClick"];function d(t){return"string"===typeof t}var y=function(t){(0,v.Z)(e,t);var r=(0,p.Z)(e);function e(){var t;(0,f.Z)(this,e);for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];return t=r.call.apply(r,[this].concat(s)),(0,n.Z)((0,m.Z)(t),"onClick",(function(){var r=t.props,e=r.onClick,o=r.onStepClick,n=r.stepIndex;e&&e.apply(void 0,arguments),o(n)})),t}return(0,l.Z)(e,[{key:"renderIconNode",value:function(){var t,r,e=this.props,o=e.prefixCls,s=e.progressDot,i=e.stepIcon,a=e.stepNumber,h=e.status,c=e.title,f=e.description,l=e.icon,m=e.iconPrefix,v=e.icons,p=u()("".concat(o,"-icon"),"".concat(m,"icon"),(t={},(0,n.Z)(t,"".concat(m,"icon-").concat(l),l&&d(l)),(0,n.Z)(t,"".concat(m,"icon-check"),!l&&"finish"===h&&(v&&!v.finish||!v)),(0,n.Z)(t,"".concat(m,"icon-cross"),!l&&"error"===h&&(v&&!v.error||!v)),t)),g=w.createElement("span",{className:"".concat(o,"-icon-dot")});return r=s?"function"===typeof s?w.createElement("span",{className:"".concat(o,"-icon")},s(g,{index:a-1,status:h,title:c,description:f})):w.createElement("span",{className:"".concat(o,"-icon")},g):l&&!d(l)?w.createElement("span",{className:"".concat(o,"-icon")},l):v&&v.finish&&"finish"===h?w.createElement("span",{className:"".concat(o,"-icon")},v.finish):v&&v.error&&"error"===h?w.createElement("span",{className:"".concat(o,"-icon")},v.error):l||"finish"===h||"error"===h?w.createElement("span",{className:p}):w.createElement("span",{className:"".concat(o,"-icon")},a),i&&(r=i({index:a-1,status:h,title:c,description:f,node:r})),r}},{key:"render",value:function(){var t,r=this.props,e=r.className,s=r.prefixCls,i=r.style,a=r.active,f=r.status,l=void 0===f?"wait":f,m=(r.iconPrefix,r.icon),v=(r.wrapperStyle,r.stepNumber,r.disabled),p=r.description,d=r.title,y=r.subTitle,b=(r.progressDot,r.stepIcon,r.tailContent),M=(r.icons,r.stepIndex,r.onStepClick),k=r.onClick,x=(0,c.Z)(r,g),E=u()("".concat(s,"-item"),"".concat(s,"-item-").concat(l),e,(t={},(0,n.Z)(t,"".concat(s,"-item-custom"),m),(0,n.Z)(t,"".concat(s,"-item-active"),a),(0,n.Z)(t,"".concat(s,"-item-disabled"),!0===v),t)),S=(0,h.Z)({},i),N={};return M&&!v&&(N.role="button",N.tabIndex=0,N.onClick=this.onClick),w.createElement("div",(0,o.Z)({},x,{className:E,style:S}),w.createElement("div",(0,o.Z)({onClick:k},N,{className:"".concat(s,"-item-container")}),w.createElement("div",{className:"".concat(s,"-item-tail")},b),w.createElement("div",{className:"".concat(s,"-item-icon")},this.renderIconNode()),w.createElement("div",{className:"".concat(s,"-item-content")},w.createElement("div",{className:"".concat(s,"-item-title")},d,y&&w.createElement("div",{title:"string"===typeof y?y:void 0,className:"".concat(s,"-item-subtitle")},y)),p&&w.createElement("div",{className:"".concat(s,"-item-description")},p))))}}]),e}(w.Component),b=["prefixCls","style","className","children","direction","type","labelPlacement","iconPrefix","status","size","current","progressDot","stepIcon","initial","icons","onChange","items"],M=function(t){(0,v.Z)(e,t);var r=(0,p.Z)(e);function e(){var t;(0,f.Z)(this,e);for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];return t=r.call.apply(r,[this].concat(s)),(0,n.Z)((0,m.Z)(t),"onStepClick",(function(r){var e=t.props,o=e.onChange,n=e.current;o&&n!==r&&o(r)})),t}return(0,l.Z)(e,[{key:"render",value:function(){var t,r=this,e=this.props,s=e.prefixCls,i=e.style,a=void 0===i?{}:i,f=e.className,l=(e.children,e.direction),m=e.type,v=e.labelPlacement,p=e.iconPrefix,g=e.status,d=e.size,M=e.current,k=e.progressDot,x=e.stepIcon,E=e.initial,S=e.icons,N=e.onChange,C=e.items,R=void 0===C?[]:C,Z=(0,c.Z)(e,b),I="navigation"===m,T=k?"vertical":v,A=u()(s,"".concat(s,"-").concat(l),f,(t={},(0,n.Z)(t,"".concat(s,"-").concat(d),d),(0,n.Z)(t,"".concat(s,"-label-").concat(T),"horizontal"===l),(0,n.Z)(t,"".concat(s,"-dot"),!!k),(0,n.Z)(t,"".concat(s,"-navigation"),I),t));return w.createElement("div",(0,o.Z)({className:A,style:a},Z),R.filter((function(t){return t})).map((function(t,e){var n=(0,h.Z)({},t),i=E+e;return"error"===g&&e===M-1&&(n.className="".concat(s,"-next-error")),n.status||(n.status=i===M?g:i<M?"finish":"wait"),w.createElement(y,(0,o.Z)({},n,{active:i===M,stepNumber:i+1,stepIndex:i,key:i,prefixCls:s,iconPrefix:p,wrapperStyle:a,progressDot:k,stepIcon:x,icons:S,onStepClick:N&&r.onStepClick}))})))}}]),e}(w.Component);(0,n.Z)(M,"Step",y),(0,n.Z)(M,"defaultProps",{type:"default",prefixCls:"rc-steps",iconPrefix:"rc",direction:"horizontal",labelPlacement:"horizontal",initial:0,current:0,status:"process",size:"",progressDot:!1});var k=M,x=e(71929),E=e(52832),S=e(28817),N=e(85501);var C=function(t,r){var e={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.indexOf(o)<0&&(e[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(t);n<o.length;n++)r.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(t,o[n])&&(e[o[n]]=t[o[n]])}return e},R=function(t){var r,e=t.percent,a=t.size,h=t.className,c=t.direction,f=t.items,l=t.responsive,m=void 0===l||l,v=t.current,p=void 0===v?0:v,g=t.children,d=C(t,["percent","size","className","direction","items","responsive","current","children"]),y=(0,E.Z)(m).xs,b=w.useContext(x.E_),M=b.getPrefixCls,R=b.direction,Z=w.useCallback((function(){return m&&y?"vertical":c}),[y,c]),I=M("steps",t.prefixCls),T=M("",t.iconPrefix),A=function(t,r){return t||function(t){return t.filter((function(t){return t}))}((0,N.Z)(r).map((function(t){if(w.isValidElement(t)){var r=t.props;return(0,o.Z)({},r)}return null})))}(f,g),P=u()((r={},(0,n.Z)(r,"".concat(I,"-rtl"),"rtl"===R),(0,n.Z)(r,"".concat(I,"-with-progress"),void 0!==e),r),h),V={finish:w.createElement(s.Z,{className:"".concat(I,"-finish-icon")}),error:w.createElement(i.Z,{className:"".concat(I,"-error-icon")})};return w.createElement(k,(0,o.Z)({icons:V},d,{current:p,size:a,items:A,direction:Z(),stepIcon:function(t){var r=t.node;if("process"===t.status&&void 0!==e){var o="small"===a?32:40;return w.createElement("div",{className:"".concat(I,"-progress-icon")},w.createElement(S.Z,{type:"circle",percent:e,width:o,strokeWidth:4,format:function(){return null}}),r)}return r},prefixCls:I,iconPrefix:T,className:P}))};R.Step=k.Step;var Z=R},78322:function(t,r,e){e.d(r,{Z:function(){return B}});var o=e(15671),n=e(43144),s=e(82963),i=e(60136),a=e(95212),u=Object.prototype.toString;function h(t){return u.call(t).endsWith("Array]")}function c(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!h(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var e=r.fromIndex,o=void 0===e?0:e,n=r.toIndex,s=void 0===n?t.length:n;if(o<0||o>=t.length||!Number.isInteger(o))throw new Error("fromIndex must be a positive integer smaller than length");if(s<=o||s>t.length||!Number.isInteger(s))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var i=t[o],a=o+1;a<s;a++)t[a]>i&&(i=t[a]);return i}function f(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!h(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var e=r.fromIndex,o=void 0===e?0:e,n=r.toIndex,s=void 0===n?t.length:n;if(o<0||o>=t.length||!Number.isInteger(o))throw new Error("fromIndex must be a positive integer smaller than length");if(s<=o||s>t.length||!Number.isInteger(s))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var i=t[o],a=o+1;a<s;a++)t[a]<i&&(i=t[a]);return i}function l(t){var r,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!h(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==e.output){if(!h(e.output))throw new TypeError("output option must be an array if specified");r=e.output}else r=new Array(t.length);var o=f(t),n=c(t);if(o===n)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var s=e.min,i=void 0===s?e.autoMinMax?o:0:s,a=e.max,u=void 0===a?e.autoMinMax?n:1:a;if(i>=u)throw new RangeError("min option must be smaller than max option");for(var l=(u-i)/(n-o),m=0;m<t.length;m++)r[m]=(t[m]-o)*l+i;return r}var m=" ".repeat(2),v=" ".repeat(4);function p(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=r.maxRows,o=void 0===e?15:e,n=r.maxColumns,s=void 0===n?10:n,i=r.maxNumSize,a=void 0===i?8:i,u=r.padMinus,h=void 0===u?"auto":u;return"".concat(t.constructor.name," {\n").concat(m,"[\n").concat(v).concat(w(t,o,s,a,h),"\n").concat(m,"]\n").concat(m,"rows: ").concat(t.rows,"\n").concat(m,"columns: ").concat(t.columns,"\n}")}function w(t,r,e,o,n){var s=t.rows,i=t.columns,a=Math.min(s,r),u=Math.min(i,e),h=[];if("auto"===n){n=!1;t:for(var c=0;c<a;c++)for(var f=0;f<u;f++)if(t.get(c,f)<0){n=!0;break t}}for(var l=0;l<a;l++){for(var m=[],p=0;p<u;p++)m.push(g(t.get(l,p),o,n));h.push("".concat(m.join(" ")))}return u!==i&&(h[h.length-1]+=" ... ".concat(i-e," more columns")),a!==s&&h.push("... ".concat(s-r," more rows")),h.join("\n".concat(v))}function g(t,r,e){return(t>=0&&e?" ".concat(d(t,r-1)):d(t,r)).padEnd(r)}function d(t,r){var e=t.toString();if(e.length<=r)return e;var o=t.toFixed(r);if(o.length>r&&(o=t.toFixed(Math.max(0,r-(o.length-r)))),o.length<=r&&!o.startsWith("0.000")&&!o.startsWith("-0.000"))return o;var n=t.toExponential(r);return n.length>r&&(n=t.toExponential(Math.max(0,r-(n.length-r)))),n.slice(0)}function y(t,r,e){var o=e?t.rows:t.rows-1;if(r<0||r>o)throw new RangeError("Row index out of range")}function b(t,r,e){var o=e?t.columns:t.columns-1;if(r<0||r>o)throw new RangeError("Column index out of range")}function M(t,r){if(r.to1DArray&&(r=r.to1DArray()),r.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return r}function k(t,r){if(r.to1DArray&&(r=r.to1DArray()),r.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return r}function x(t,r,e,o,n){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(S("startRow",r),S("endRow",e),S("startColumn",o),S("endColumn",n),r>e||o>n||r<0||r>=t.rows||e<0||e>=t.rows||o<0||o>=t.columns||n<0||n>=t.columns)throw new RangeError("Submatrix indices are out of range")}function E(t){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=[],o=0;o<t;o++)e.push(r);return e}function S(t,r){if("number"!==typeof r)throw new TypeError("".concat(t," must be a number"))}function N(t){if(t.isEmpty())throw new Error("Empty matrix has no elements to index")}function C(t,r,e){for(var o=t.rows,n=t.columns,s=[],i=0;i<o;i++){for(var a=0,u=0,h=0,c=0;c<n;c++)a+=h=t.get(i,c)-e[i],u+=h*h;r?s.push((u-a*a/n)/(n-1)):s.push((u-a*a/n)/n)}return s}function R(t,r,e){for(var o=t.rows,n=t.columns,s=[],i=0;i<n;i++){for(var a=0,u=0,h=0,c=0;c<o;c++)a+=h=t.get(c,i)-e[i],u+=h*h;r?s.push((u-a*a/o)/(o-1)):s.push((u-a*a/o)/o)}return s}function Z(t,r,e){for(var o=t.rows,n=t.columns,s=o*n,i=0,a=0,u=0,h=0;h<o;h++)for(var c=0;c<n;c++)i+=u=t.get(h,c)-e,a+=u*u;return r?(a-i*i/s)/(s-1):(a-i*i/s)/s}function I(t,r){for(var e=0;e<t.rows;e++)for(var o=0;o<t.columns;o++)t.set(e,o,t.get(e,o)-r[e])}function T(t,r){for(var e=0;e<t.rows;e++)for(var o=0;o<t.columns;o++)t.set(e,o,t.get(e,o)-r[o])}function A(t,r){for(var e=0;e<t.rows;e++)for(var o=0;o<t.columns;o++)t.set(e,o,t.get(e,o)-r)}function P(t){for(var r=[],e=0;e<t.rows;e++){for(var o=0,n=0;n<t.columns;n++)o+=Math.pow(t.get(e,n),2)/(t.columns-1);r.push(Math.sqrt(o))}return r}function V(t,r){for(var e=0;e<t.rows;e++)for(var o=0;o<t.columns;o++)t.set(e,o,t.get(e,o)/r[e])}function q(t){for(var r=[],e=0;e<t.columns;e++){for(var o=0,n=0;n<t.rows;n++)o+=Math.pow(t.get(n,e),2)/(t.rows-1);r.push(Math.sqrt(o))}return r}function j(t,r){for(var e=0;e<t.rows;e++)for(var o=0;o<t.columns;o++)t.set(e,o,t.get(e,o)/r[o])}function z(t){for(var r=t.size-1,e=0,o=0;o<t.columns;o++)for(var n=0;n<t.rows;n++)e+=Math.pow(t.get(n,o),2)/r;return Math.sqrt(e)}function F(t,r){for(var e=0;e<t.rows;e++)for(var o=0;o<t.columns;o++)t.set(e,o,t.get(e,o)/r)}var O=function(){function t(){(0,o.Z)(this,t)}return(0,n.Z)(t,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(t){if("function"!==typeof t)throw new TypeError("callback must be a function");for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)t.call(this,r,e);return this}},{key:"to1DArray",value:function(){for(var t=[],r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)t.push(this.get(r,e));return t}},{key:"to2DArray",value:function(){for(var t=[],r=0;r<this.rows;r++){t.push([]);for(var e=0;e<this.columns;e++)t[r].push(this.get(r,e))}return t}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return 1===this.rows}},{key:"isColumnVector",value:function(){return 1===this.columns}},{key:"isVector",value:function(){return 1===this.rows||1===this.columns}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return 0===this.rows||0===this.columns}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var r=0;r<=t;r++)if(this.get(t,r)!==this.get(r,t))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var t=0,r=0,e=-1,o=!0,n=!1;t<this.rows&&o;){for(r=0,n=!1;r<this.columns&&!1===n;)0===this.get(t,r)?r++:1===this.get(t,r)&&r>e?(n=!0,e=r):(o=!1,n=!0);t++}return o}},{key:"isReducedEchelonForm",value:function(){for(var t=0,r=0,e=-1,o=!0,n=!1;t<this.rows&&o;){for(r=0,n=!1;r<this.columns&&!1===n;)0===this.get(t,r)?r++:1===this.get(t,r)&&r>e?(n=!0,e=r):(o=!1,n=!0);for(var s=r+1;s<this.rows;s++)0!==this.get(t,s)&&(o=!1);t++}return o}},{key:"echelonForm",value:function(){for(var t=this.clone(),r=0,e=0;r<t.rows&&e<t.columns;){for(var o=r,n=r;n<t.rows;n++)t.get(n,e)>t.get(o,e)&&(o=n);if(0===t.get(o,e))e++;else{t.swapRows(r,o);for(var s=t.get(r,e),i=e;i<t.columns;i++)t.set(r,i,t.get(r,i)/s);for(var a=r+1;a<t.rows;a++){var u=t.get(a,e)/t.get(r,e);t.set(a,e,0);for(var h=e+1;h<t.columns;h++)t.set(a,h,t.get(a,h)-t.get(r,h)*u)}r++,e++}}return t}},{key:"reducedEchelonForm",value:function(){for(var t=this.echelonForm(),r=t.columns,e=t.rows,o=e-1;o>=0;)if(0===t.maxRow(o))o--;else{for(var n=0,s=!1;n<e&&!1===s;)1===t.get(o,n)?s=!0:n++;for(var i=0;i<o;i++)for(var a=t.get(i,n),u=n;u<r;u++){var h=t.get(i,u)-a*t.get(o,u);t.set(i,u,h)}o--}return t}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==typeof t)throw new TypeError("options must be an object");var r=t.rows,e=void 0===r?1:r,o=t.columns,n=void 0===o?1:o;if(!Number.isInteger(e)||e<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(n)||n<=0)throw new TypeError("columns must be a positive integer");for(var s=new L(this.rows*e,this.columns*n),i=0;i<e;i++)for(var a=0;a<n;a++)s.setSubMatrix(this,this.rows*i,this.columns*a);return s}},{key:"fill",value:function(t){for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,t);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(t){y(this,t);for(var r=[],e=0;e<this.columns;e++)r.push(this.get(t,e));return r}},{key:"getRowVector",value:function(t){return L.rowVector(this.getRow(t))}},{key:"setRow",value:function(t,r){y(this,t),r=M(this,r);for(var e=0;e<this.columns;e++)this.set(t,e,r[e]);return this}},{key:"swapRows",value:function(t,r){y(this,t),y(this,r);for(var e=0;e<this.columns;e++){var o=this.get(t,e);this.set(t,e,this.get(r,e)),this.set(r,e,o)}return this}},{key:"getColumn",value:function(t){b(this,t);for(var r=[],e=0;e<this.rows;e++)r.push(this.get(e,t));return r}},{key:"getColumnVector",value:function(t){return L.columnVector(this.getColumn(t))}},{key:"setColumn",value:function(t,r){b(this,t),r=k(this,r);for(var e=0;e<this.rows;e++)this.set(e,t,r[e]);return this}},{key:"swapColumns",value:function(t,r){b(this,t),b(this,r);for(var e=0;e<this.rows;e++){var o=this.get(e,t);this.set(e,t,this.get(e,r)),this.set(e,r,o)}return this}},{key:"addRowVector",value:function(t){t=M(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)+t[e]);return this}},{key:"subRowVector",value:function(t){t=M(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)-t[e]);return this}},{key:"mulRowVector",value:function(t){t=M(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)*t[e]);return this}},{key:"divRowVector",value:function(t){t=M(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)/t[e]);return this}},{key:"addColumnVector",value:function(t){t=k(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)+t[r]);return this}},{key:"subColumnVector",value:function(t){t=k(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)-t[r]);return this}},{key:"mulColumnVector",value:function(t){t=k(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)*t[r]);return this}},{key:"divColumnVector",value:function(t){t=k(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)/t[r]);return this}},{key:"mulRow",value:function(t,r){y(this,t);for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)*r);return this}},{key:"mulColumn",value:function(t,r){b(this,t);for(var e=0;e<this.rows;e++)this.set(e,t,this.get(e,t)*r);return this}},{key:"max",value:function(t){if(this.isEmpty())return NaN;switch(t){case"row":for(var r=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),e=0;e<this.rows;e++)for(var o=0;o<this.columns;o++)this.get(e,o)>r[e]&&(r[e]=this.get(e,o));return r;case"column":for(var n=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),s=0;s<this.rows;s++)for(var i=0;i<this.columns;i++)this.get(s,i)>n[i]&&(n[i]=this.get(s,i));return n;case void 0:for(var a=this.get(0,0),u=0;u<this.rows;u++)for(var h=0;h<this.columns;h++)this.get(u,h)>a&&(a=this.get(u,h));return a;default:throw new Error("invalid option: ".concat(t))}}},{key:"maxIndex",value:function(){N(this);for(var t=this.get(0,0),r=[0,0],e=0;e<this.rows;e++)for(var o=0;o<this.columns;o++)this.get(e,o)>t&&(t=this.get(e,o),r[0]=e,r[1]=o);return r}},{key:"min",value:function(t){if(this.isEmpty())return NaN;switch(t){case"row":for(var r=new Array(this.rows).fill(Number.POSITIVE_INFINITY),e=0;e<this.rows;e++)for(var o=0;o<this.columns;o++)this.get(e,o)<r[e]&&(r[e]=this.get(e,o));return r;case"column":for(var n=new Array(this.columns).fill(Number.POSITIVE_INFINITY),s=0;s<this.rows;s++)for(var i=0;i<this.columns;i++)this.get(s,i)<n[i]&&(n[i]=this.get(s,i));return n;case void 0:for(var a=this.get(0,0),u=0;u<this.rows;u++)for(var h=0;h<this.columns;h++)this.get(u,h)<a&&(a=this.get(u,h));return a;default:throw new Error("invalid option: ".concat(t))}}},{key:"minIndex",value:function(){N(this);for(var t=this.get(0,0),r=[0,0],e=0;e<this.rows;e++)for(var o=0;o<this.columns;o++)this.get(e,o)<t&&(t=this.get(e,o),r[0]=e,r[1]=o);return r}},{key:"maxRow",value:function(t){if(y(this,t),this.isEmpty())return NaN;for(var r=this.get(t,0),e=1;e<this.columns;e++)this.get(t,e)>r&&(r=this.get(t,e));return r}},{key:"maxRowIndex",value:function(t){y(this,t),N(this);for(var r=this.get(t,0),e=[t,0],o=1;o<this.columns;o++)this.get(t,o)>r&&(r=this.get(t,o),e[1]=o);return e}},{key:"minRow",value:function(t){if(y(this,t),this.isEmpty())return NaN;for(var r=this.get(t,0),e=1;e<this.columns;e++)this.get(t,e)<r&&(r=this.get(t,e));return r}},{key:"minRowIndex",value:function(t){y(this,t),N(this);for(var r=this.get(t,0),e=[t,0],o=1;o<this.columns;o++)this.get(t,o)<r&&(r=this.get(t,o),e[1]=o);return e}},{key:"maxColumn",value:function(t){if(b(this,t),this.isEmpty())return NaN;for(var r=this.get(0,t),e=1;e<this.rows;e++)this.get(e,t)>r&&(r=this.get(e,t));return r}},{key:"maxColumnIndex",value:function(t){b(this,t),N(this);for(var r=this.get(0,t),e=[0,t],o=1;o<this.rows;o++)this.get(o,t)>r&&(r=this.get(o,t),e[0]=o);return e}},{key:"minColumn",value:function(t){if(b(this,t),this.isEmpty())return NaN;for(var r=this.get(0,t),e=1;e<this.rows;e++)this.get(e,t)<r&&(r=this.get(e,t));return r}},{key:"minColumnIndex",value:function(t){b(this,t),N(this);for(var r=this.get(0,t),e=[0,t],o=1;o<this.rows;o++)this.get(o,t)<r&&(r=this.get(o,t),e[0]=o);return e}},{key:"diag",value:function(){for(var t=Math.min(this.rows,this.columns),r=[],e=0;e<t;e++)r.push(this.get(e,e));return r}},{key:"norm",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"frobenius",r=0;if("max"===t)return this.max();if("frobenius"===t){for(var e=0;e<this.rows;e++)for(var o=0;o<this.columns;o++)r+=this.get(e,o)*this.get(e,o);return Math.sqrt(r)}throw new RangeError("unknown norm type: ".concat(t))}},{key:"cumulativeSum",value:function(){for(var t=0,r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)t+=this.get(r,e),this.set(r,e,t);return this}},{key:"dot",value:function(r){t.isMatrix(r)&&(r=r.to1DArray());var e=this.to1DArray();if(e.length!==r.length)throw new RangeError("vectors do not have the same size");for(var o=0,n=0;n<e.length;n++)o+=e[n]*r[n];return o}},{key:"mmul",value:function(t){t=L.checkMatrix(t);for(var r=this.rows,e=this.columns,o=t.columns,n=new L(r,o),s=new Float64Array(e),i=0;i<o;i++){for(var a=0;a<e;a++)s[a]=t.get(a,i);for(var u=0;u<r;u++){for(var h=0,c=0;c<e;c++)h+=this.get(u,c)*s[c];n.set(u,i,h)}}return n}},{key:"strassen2x2",value:function(t){t=L.checkMatrix(t);var r=new L(2,2),e=this.get(0,0),o=t.get(0,0),n=this.get(0,1),s=t.get(0,1),i=this.get(1,0),a=t.get(1,0),u=this.get(1,1),h=t.get(1,1),c=(e+u)*(o+h),f=(i+u)*o,l=e*(s-h),m=u*(a-o),v=(e+n)*h,p=c+m-v+(n-u)*(a+h),w=l+v,g=f+m,d=c-f+l+(i-e)*(o+s);return r.set(0,0,p),r.set(0,1,w),r.set(1,0,g),r.set(1,1,d),r}},{key:"strassen3x3",value:function(t){t=L.checkMatrix(t);var r=new L(3,3),e=this.get(0,0),o=this.get(0,1),n=this.get(0,2),s=this.get(1,0),i=this.get(1,1),a=this.get(1,2),u=this.get(2,0),h=this.get(2,1),c=this.get(2,2),f=t.get(0,0),l=t.get(0,1),m=t.get(0,2),v=t.get(1,0),p=t.get(1,1),w=t.get(1,2),g=t.get(2,0),d=t.get(2,1),y=t.get(2,2),b=(e-s)*(-l+p),M=(-e+s+i)*(f-l+p),k=(s+i)*(-f+l),x=e*f,E=(-e+u+h)*(f-m+w),S=(-e+u)*(m-w),N=(u+h)*(-f+m),C=(-n+h+c)*(p+g-d),R=(n-c)*(p-d),Z=n*g,I=(h+c)*(-g+d),T=(-n+i+a)*(w+g-y),A=(n-a)*(w-y),P=(i+a)*(-g+y),V=x+Z+o*v,q=(e+o+n-s-i-h-c)*p+M+k+x+C+Z+I,j=x+E+N+(e+o+n-i-a-u-h)*w+Z+T+P,z=b+i*(-f+l+v-p-w-g+y)+M+x+Z+T+A,F=b+M+k+x+a*d,O=Z+T+A+P+s*m,D=x+E+S+h*(-f+m+v-p-w-g+d)+C+R+Z,_=C+R+Z+I+u*l,U=x+E+S+N+c*y;return r.set(0,0,V),r.set(0,1,q),r.set(0,2,j),r.set(1,0,z),r.set(1,1,F),r.set(1,2,O),r.set(2,0,D),r.set(2,1,_),r.set(2,2,U),r}},{key:"mmulStrassen",value:function(r){r=L.checkMatrix(r);var e=this.clone(),o=e.rows,n=e.columns,s=r.rows,i=r.columns;function a(r,e,o){var n=r.rows,s=r.columns;if(n===e&&s===o)return r;var i=t.zeros(e,o);return i=i.setSubMatrix(r,0,0)}n!==s&&console.warn("Multiplying ".concat(o," x ").concat(n," and ").concat(s," x ").concat(i," matrix: dimensions do not match."));var u=Math.max(o,s),h=Math.max(n,i);return function r(e,o,n,s){if(n<=512||s<=512)return e.mmul(o);n%2===1&&s%2===1?(e=a(e,n+1,s+1),o=a(o,n+1,s+1)):n%2===1?(e=a(e,n+1,s),o=a(o,n+1,s)):s%2===1&&(e=a(e,n,s+1),o=a(o,n,s+1));var i=parseInt(e.rows/2,10),u=parseInt(e.columns/2,10),h=e.subMatrix(0,i-1,0,u-1),c=o.subMatrix(0,i-1,0,u-1),f=e.subMatrix(0,i-1,u,e.columns-1),l=o.subMatrix(0,i-1,u,o.columns-1),m=e.subMatrix(i,e.rows-1,0,u-1),v=o.subMatrix(i,o.rows-1,0,u-1),p=e.subMatrix(i,e.rows-1,u,e.columns-1),w=o.subMatrix(i,o.rows-1,u,o.columns-1),g=r(t.add(h,p),t.add(c,w),i,u),d=r(t.add(m,p),c,i,u),y=r(h,t.sub(l,w),i,u),b=r(p,t.sub(v,c),i,u),M=r(t.add(h,f),w,i,u),k=r(t.sub(m,h),t.add(c,l),i,u),x=r(t.sub(f,p),t.add(v,w),i,u),E=t.add(g,b);E.sub(M),E.add(x);var S=t.add(y,M),N=t.add(d,b),C=t.sub(g,d);C.add(y),C.add(k);var R=t.zeros(2*E.rows,2*E.columns);return(R=(R=(R=(R=R.setSubMatrix(E,0,0)).setSubMatrix(S,E.rows,0)).setSubMatrix(N,0,E.columns)).setSubMatrix(C,E.rows,E.columns)).subMatrix(0,n-1,0,s-1)}(e=a(e,u,h),r=a(r,u,h),u,h)}},{key:"scaleRows",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==typeof t)throw new TypeError("options must be an object");var r=t.min,e=void 0===r?0:r,o=t.max,n=void 0===o?1:o;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(e>=n)throw new RangeError("min must be smaller than max");for(var s=new L(this.rows,this.columns),i=0;i<this.rows;i++){var a=this.getRow(i);a.length>0&&l(a,{min:e,max:n,output:a}),s.setRow(i,a)}return s}},{key:"scaleColumns",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==typeof t)throw new TypeError("options must be an object");var r=t.min,e=void 0===r?0:r,o=t.max,n=void 0===o?1:o;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(e>=n)throw new RangeError("min must be smaller than max");for(var s=new L(this.rows,this.columns),i=0;i<this.columns;i++){var a=this.getColumn(i);a.length&&l(a,{min:e,max:n,output:a}),s.setColumn(i,a)}return s}},{key:"flipRows",value:function(){for(var t=Math.ceil(this.columns/2),r=0;r<this.rows;r++)for(var e=0;e<t;e++){var o=this.get(r,e),n=this.get(r,this.columns-1-e);this.set(r,e,n),this.set(r,this.columns-1-e,o)}return this}},{key:"flipColumns",value:function(){for(var t=Math.ceil(this.rows/2),r=0;r<this.columns;r++)for(var e=0;e<t;e++){var o=this.get(e,r),n=this.get(this.rows-1-e,r);this.set(e,r,n),this.set(this.rows-1-e,r,o)}return this}},{key:"kroneckerProduct",value:function(t){t=L.checkMatrix(t);for(var r=this.rows,e=this.columns,o=t.rows,n=t.columns,s=new L(r*o,e*n),i=0;i<r;i++)for(var a=0;a<e;a++)for(var u=0;u<o;u++)for(var h=0;h<n;h++)s.set(o*i+u,n*a+h,this.get(i,a)*t.get(u,h));return s}},{key:"kroneckerSum",value:function(t){if(t=L.checkMatrix(t),!this.isSquare()||!t.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var r=this.rows,e=t.rows,o=this.kroneckerProduct(L.eye(e,e)),n=L.eye(r,r).kroneckerProduct(t);return o.add(n)}},{key:"transpose",value:function(){for(var t=new L(this.columns,this.rows),r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)t.set(e,r,this.get(r,e));return t}},{key:"sortRows",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,r=0;r<this.rows;r++)this.setRow(r,this.getRow(r).sort(t));return this}},{key:"sortColumns",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,r=0;r<this.columns;r++)this.setColumn(r,this.getColumn(r).sort(t));return this}},{key:"subMatrix",value:function(t,r,e,o){x(this,t,r,e,o);for(var n=new L(r-t+1,o-e+1),s=t;s<=r;s++)for(var i=e;i<=o;i++)n.set(s-t,i-e,this.get(s,i));return n}},{key:"subMatrixRow",value:function(t,r,e){if(void 0===r&&(r=0),void 0===e&&(e=this.columns-1),r>e||r<0||r>=this.columns||e<0||e>=this.columns)throw new RangeError("Argument out of range");for(var o=new L(t.length,e-r+1),n=0;n<t.length;n++)for(var s=r;s<=e;s++){if(t[n]<0||t[n]>=this.rows)throw new RangeError("Row index out of range: ".concat(t[n]));o.set(n,s-r,this.get(t[n],s))}return o}},{key:"subMatrixColumn",value:function(t,r,e){if(void 0===r&&(r=0),void 0===e&&(e=this.rows-1),r>e||r<0||r>=this.rows||e<0||e>=this.rows)throw new RangeError("Argument out of range");for(var o=new L(e-r+1,t.length),n=0;n<t.length;n++)for(var s=r;s<=e;s++){if(t[n]<0||t[n]>=this.columns)throw new RangeError("Column index out of range: ".concat(t[n]));o.set(s-r,n,this.get(s,t[n]))}return o}},{key:"setSubMatrix",value:function(t,r,e){if((t=L.checkMatrix(t)).isEmpty())return this;x(this,r,r+t.rows-1,e,e+t.columns-1);for(var o=0;o<t.rows;o++)for(var n=0;n<t.columns;n++)this.set(r+o,e+n,t.get(o,n));return this}},{key:"selection",value:function(t,r){!function(t,r){if(!h(r))throw new TypeError("row indices must be an array");for(var e=0;e<r.length;e++)if(r[e]<0||r[e]>=t.rows)throw new RangeError("row indices are out of range")}(this,t),function(t,r){if(!h(r))throw new TypeError("column indices must be an array");for(var e=0;e<r.length;e++)if(r[e]<0||r[e]>=t.columns)throw new RangeError("column indices are out of range")}(this,r);for(var e=new L(t.length,r.length),o=0;o<t.length;o++)for(var n=t[o],s=0;s<r.length;s++){var i=r[s];e.set(o,s,this.get(n,i))}return e}},{key:"trace",value:function(){for(var t=Math.min(this.rows,this.columns),r=0,e=0;e<t;e++)r+=this.get(e,e);return r}},{key:"clone",value:function(){for(var t=new L(this.rows,this.columns),r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)t.set(r,e,this.get(r,e));return t}},{key:"sum",value:function(t){switch(t){case"row":return function(t){for(var r=E(t.rows),e=0;e<t.rows;++e)for(var o=0;o<t.columns;++o)r[e]+=t.get(e,o);return r}(this);case"column":return function(t){for(var r=E(t.columns),e=0;e<t.rows;++e)for(var o=0;o<t.columns;++o)r[o]+=t.get(e,o);return r}(this);case void 0:return function(t){for(var r=0,e=0;e<t.rows;e++)for(var o=0;o<t.columns;o++)r+=t.get(e,o);return r}(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"product",value:function(t){switch(t){case"row":return function(t){for(var r=E(t.rows,1),e=0;e<t.rows;++e)for(var o=0;o<t.columns;++o)r[e]*=t.get(e,o);return r}(this);case"column":return function(t){for(var r=E(t.columns,1),e=0;e<t.rows;++e)for(var o=0;o<t.columns;++o)r[o]*=t.get(e,o);return r}(this);case void 0:return function(t){for(var r=1,e=0;e<t.rows;e++)for(var o=0;o<t.columns;o++)r*=t.get(e,o);return r}(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"mean",value:function(t){var r=this.sum(t);switch(t){case"row":for(var e=0;e<this.rows;e++)r[e]/=this.columns;return r;case"column":for(var o=0;o<this.columns;o++)r[o]/=this.rows;return r;case void 0:return r/this.size;default:throw new Error("invalid option: ".concat(t))}}},{key:"variance",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===typeof t&&(r=t,t=void 0),"object"!==typeof r)throw new TypeError("options must be an object");var e=r,o=e.unbiased,n=void 0===o||o,s=e.mean,i=void 0===s?this.mean(t):s;if("boolean"!==typeof n)throw new TypeError("unbiased must be a boolean");switch(t){case"row":if(!h(i))throw new TypeError("mean must be an array");return C(this,n,i);case"column":if(!h(i))throw new TypeError("mean must be an array");return R(this,n,i);case void 0:if("number"!==typeof i)throw new TypeError("mean must be a number");return Z(this,n,i);default:throw new Error("invalid option: ".concat(t))}}},{key:"standardDeviation",value:function(t,r){"object"===typeof t&&(r=t,t=void 0);var e=this.variance(t,r);if(void 0===t)return Math.sqrt(e);for(var o=0;o<e.length;o++)e[o]=Math.sqrt(e[o]);return e}},{key:"center",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===typeof t&&(r=t,t=void 0),"object"!==typeof r)throw new TypeError("options must be an object");var e=r,o=e.center,n=void 0===o?this.mean(t):o;switch(t){case"row":if(!h(n))throw new TypeError("center must be an array");return I(this,n),this;case"column":if(!h(n))throw new TypeError("center must be an array");return T(this,n),this;case void 0:if("number"!==typeof n)throw new TypeError("center must be a number");return A(this,n),this;default:throw new Error("invalid option: ".concat(t))}}},{key:"scale",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===typeof t&&(r=t,t=void 0),"object"!==typeof r)throw new TypeError("options must be an object");var e=r.scale;switch(t){case"row":if(void 0===e)e=P(this);else if(!h(e))throw new TypeError("scale must be an array");return V(this,e),this;case"column":if(void 0===e)e=q(this);else if(!h(e))throw new TypeError("scale must be an array");return j(this,e),this;case void 0:if(void 0===e)e=z(this);else if("number"!==typeof e)throw new TypeError("scale must be a number");return F(this,e),this;default:throw new Error("invalid option: ".concat(t))}}},{key:"toString",value:function(t){return p(this,t)}}],[{key:"from1DArray",value:function(t,r,e){if(t*r!==e.length)throw new RangeError("data length does not match given dimensions");for(var o=new L(t,r),n=0;n<t;n++)for(var s=0;s<r;s++)o.set(n,s,e[n*r+s]);return o}},{key:"rowVector",value:function(t){for(var r=new L(1,t.length),e=0;e<t.length;e++)r.set(0,e,t[e]);return r}},{key:"columnVector",value:function(t){for(var r=new L(t.length,1),e=0;e<t.length;e++)r.set(e,0,t[e]);return r}},{key:"zeros",value:function(t,r){return new L(t,r)}},{key:"ones",value:function(t,r){return new L(t,r).fill(1)}},{key:"rand",value:function(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!==typeof e)throw new TypeError("options must be an object");for(var o=e.random,n=void 0===o?Math.random:o,s=new L(t,r),i=0;i<t;i++)for(var a=0;a<r;a++)s.set(i,a,n());return s}},{key:"randInt",value:function(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!==typeof e)throw new TypeError("options must be an object");var o=e.min,n=void 0===o?0:o,s=e.max,i=void 0===s?1e3:s,a=e.random,u=void 0===a?Math.random:a;if(!Number.isInteger(n))throw new TypeError("min must be an integer");if(!Number.isInteger(i))throw new TypeError("max must be an integer");if(n>=i)throw new RangeError("min must be smaller than max");for(var h=i-n,c=new L(t,r),f=0;f<t;f++)for(var l=0;l<r;l++){var m=n+Math.round(u()*h);c.set(f,l,m)}return c}},{key:"eye",value:function(t,r,e){void 0===r&&(r=t),void 0===e&&(e=1);for(var o=Math.min(t,r),n=this.zeros(t,r),s=0;s<o;s++)n.set(s,s,e);return n}},{key:"diag",value:function(t,r,e){var o=t.length;void 0===r&&(r=o),void 0===e&&(e=r);for(var n=Math.min(o,r,e),s=this.zeros(r,e),i=0;i<n;i++)s.set(i,i,t[i]);return s}},{key:"min",value:function(t,r){t=this.checkMatrix(t),r=this.checkMatrix(r);for(var e=t.rows,o=t.columns,n=new L(e,o),s=0;s<e;s++)for(var i=0;i<o;i++)n.set(s,i,Math.min(t.get(s,i),r.get(s,i)));return n}},{key:"max",value:function(t,r){t=this.checkMatrix(t),r=this.checkMatrix(r);for(var e=t.rows,o=t.columns,n=new this(e,o),s=0;s<e;s++)for(var i=0;i<o;i++)n.set(s,i,Math.max(t.get(s,i),r.get(s,i)));return n}},{key:"checkMatrix",value:function(r){return t.isMatrix(r)?r:new L(r)}},{key:"isMatrix",value:function(t){return null!=t&&"Matrix"===t.klass}}]),t}();function D(t,r){return t-r}O.prototype.klass="Matrix","undefined"!==typeof Symbol&&(O.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return p(this)}),O.random=O.rand,O.randomInt=O.randInt,O.diagonal=O.diag,O.prototype.diagonal=O.prototype.diag,O.identity=O.eye,O.prototype.negate=O.prototype.neg,O.prototype.tensorProduct=O.prototype.kroneckerProduct;var L=function(t){(0,i.Z)(e,t);var r=(0,a.Z)(e);function e(t,n){var i;if((0,o.Z)(this,e),i=r.call(this),e.isMatrix(t))return(0,s.Z)(i,t.clone());if(Number.isInteger(t)&&t>=0){if(i.data=[],!(Number.isInteger(n)&&n>=0))throw new TypeError("nColumns must be a positive integer");for(var a=0;a<t;a++)i.data.push(new Float64Array(n))}else{if(!h(t))throw new TypeError("First argument must be a positive number or an array");var u=t;if("number"!==typeof(n=(t=u.length)?u[0].length:0))throw new TypeError("Data must be a 2D array with at least one element");i.data=[];for(var c=0;c<t;c++){if(u[c].length!==n)throw new RangeError("Inconsistent array dimensions");if(!u[c].every((function(t){return"number"===typeof t})))throw new TypeError("Input data contains non-numeric values");i.data.push(Float64Array.from(u[c]))}}return i.rows=t,i.columns=n,i}return(0,n.Z)(e,[{key:"set",value:function(t,r,e){return this.data[t][r]=e,this}},{key:"get",value:function(t,r){return this.data[t][r]}},{key:"removeRow",value:function(t){return y(this,t),this.data.splice(t,1),this.rows-=1,this}},{key:"addRow",value:function(t,r){return void 0===r&&(r=t,t=this.rows),y(this,t,!0),r=Float64Array.from(M(this,r)),this.data.splice(t,0,r),this.rows+=1,this}},{key:"removeColumn",value:function(t){b(this,t);for(var r=0;r<this.rows;r++){for(var e=new Float64Array(this.columns-1),o=0;o<t;o++)e[o]=this.data[r][o];for(var n=t+1;n<this.columns;n++)e[n-1]=this.data[r][n];this.data[r]=e}return this.columns-=1,this}},{key:"addColumn",value:function(t,r){"undefined"===typeof r&&(r=t,t=this.columns),b(this,t,!0),r=k(this,r);for(var e=0;e<this.rows;e++){for(var o=new Float64Array(this.columns+1),n=0;n<t;n++)o[n]=this.data[e][n];for(o[n++]=r[e];n<this.columns+1;n++)o[n]=this.data[e][n-1];this.data[e]=o}return this.columns+=1,this}}]),e}(O);!function(t,r){t.prototype.add=function(t){return"number"===typeof t?this.addS(t):this.addM(t)},t.prototype.addS=function(t){for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)+t);return this},t.prototype.addM=function(t){if(t=r.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var o=0;o<this.columns;o++)this.set(e,o,this.get(e,o)+t.get(e,o));return this},t.add=function(t,e){return new r(t).add(e)},t.prototype.sub=function(t){return"number"===typeof t?this.subS(t):this.subM(t)},t.prototype.subS=function(t){for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)-t);return this},t.prototype.subM=function(t){if(t=r.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var o=0;o<this.columns;o++)this.set(e,o,this.get(e,o)-t.get(e,o));return this},t.sub=function(t,e){return new r(t).sub(e)},t.prototype.subtract=t.prototype.sub,t.prototype.subtractS=t.prototype.subS,t.prototype.subtractM=t.prototype.subM,t.subtract=t.sub,t.prototype.mul=function(t){return"number"===typeof t?this.mulS(t):this.mulM(t)},t.prototype.mulS=function(t){for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)*t);return this},t.prototype.mulM=function(t){if(t=r.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var o=0;o<this.columns;o++)this.set(e,o,this.get(e,o)*t.get(e,o));return this},t.mul=function(t,e){return new r(t).mul(e)},t.prototype.multiply=t.prototype.mul,t.prototype.multiplyS=t.prototype.mulS,t.prototype.multiplyM=t.prototype.mulM,t.multiply=t.mul,t.prototype.div=function(t){return"number"===typeof t?this.divS(t):this.divM(t)},t.prototype.divS=function(t){for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)/t);return this},t.prototype.divM=function(t){if(t=r.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var o=0;o<this.columns;o++)this.set(e,o,this.get(e,o)/t.get(e,o));return this},t.div=function(t,e){return new r(t).div(e)},t.prototype.divide=t.prototype.div,t.prototype.divideS=t.prototype.divS,t.prototype.divideM=t.prototype.divM,t.divide=t.div,t.prototype.mod=function(t){return"number"===typeof t?this.modS(t):this.modM(t)},t.prototype.modS=function(t){for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)%t);return this},t.prototype.modM=function(t){if(t=r.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var o=0;o<this.columns;o++)this.set(e,o,this.get(e,o)%t.get(e,o));return this},t.mod=function(t,e){return new r(t).mod(e)},t.prototype.modulus=t.prototype.mod,t.prototype.modulusS=t.prototype.modS,t.prototype.modulusM=t.prototype.modM,t.modulus=t.mod,t.prototype.and=function(t){return"number"===typeof t?this.andS(t):this.andM(t)},t.prototype.andS=function(t){for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)&t);return this},t.prototype.andM=function(t){if(t=r.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var o=0;o<this.columns;o++)this.set(e,o,this.get(e,o)&t.get(e,o));return this},t.and=function(t,e){return new r(t).and(e)},t.prototype.or=function(t){return"number"===typeof t?this.orS(t):this.orM(t)},t.prototype.orS=function(t){for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)|t);return this},t.prototype.orM=function(t){if(t=r.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var o=0;o<this.columns;o++)this.set(e,o,this.get(e,o)|t.get(e,o));return this},t.or=function(t,e){return new r(t).or(e)},t.prototype.xor=function(t){return"number"===typeof t?this.xorS(t):this.xorM(t)},t.prototype.xorS=function(t){for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)^t);return this},t.prototype.xorM=function(t){if(t=r.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var o=0;o<this.columns;o++)this.set(e,o,this.get(e,o)^t.get(e,o));return this},t.xor=function(t,e){return new r(t).xor(e)},t.prototype.leftShift=function(t){return"number"===typeof t?this.leftShiftS(t):this.leftShiftM(t)},t.prototype.leftShiftS=function(t){for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)<<t);return this},t.prototype.leftShiftM=function(t){if(t=r.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var o=0;o<this.columns;o++)this.set(e,o,this.get(e,o)<<t.get(e,o));return this},t.leftShift=function(t,e){return new r(t).leftShift(e)},t.prototype.signPropagatingRightShift=function(t){return"number"===typeof t?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},t.prototype.signPropagatingRightShiftS=function(t){for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)>>t);return this},t.prototype.signPropagatingRightShiftM=function(t){if(t=r.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var o=0;o<this.columns;o++)this.set(e,o,this.get(e,o)>>t.get(e,o));return this},t.signPropagatingRightShift=function(t,e){return new r(t).signPropagatingRightShift(e)},t.prototype.rightShift=function(t){return"number"===typeof t?this.rightShiftS(t):this.rightShiftM(t)},t.prototype.rightShiftS=function(t){for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)>>>t);return this},t.prototype.rightShiftM=function(t){if(t=r.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var o=0;o<this.columns;o++)this.set(e,o,this.get(e,o)>>>t.get(e,o));return this},t.rightShift=function(t,e){return new r(t).rightShift(e)},t.prototype.zeroFillRightShift=t.prototype.rightShift,t.prototype.zeroFillRightShiftS=t.prototype.rightShiftS,t.prototype.zeroFillRightShiftM=t.prototype.rightShiftM,t.zeroFillRightShift=t.rightShift,t.prototype.not=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,~this.get(t,r));return this},t.not=function(t){return new r(t).not()},t.prototype.abs=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.abs(this.get(t,r)));return this},t.abs=function(t){return new r(t).abs()},t.prototype.acos=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.acos(this.get(t,r)));return this},t.acos=function(t){return new r(t).acos()},t.prototype.acosh=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.acosh(this.get(t,r)));return this},t.acosh=function(t){return new r(t).acosh()},t.prototype.asin=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.asin(this.get(t,r)));return this},t.asin=function(t){return new r(t).asin()},t.prototype.asinh=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.asinh(this.get(t,r)));return this},t.asinh=function(t){return new r(t).asinh()},t.prototype.atan=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.atan(this.get(t,r)));return this},t.atan=function(t){return new r(t).atan()},t.prototype.atanh=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.atanh(this.get(t,r)));return this},t.atanh=function(t){return new r(t).atanh()},t.prototype.cbrt=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.cbrt(this.get(t,r)));return this},t.cbrt=function(t){return new r(t).cbrt()},t.prototype.ceil=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.ceil(this.get(t,r)));return this},t.ceil=function(t){return new r(t).ceil()},t.prototype.clz32=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.clz32(this.get(t,r)));return this},t.clz32=function(t){return new r(t).clz32()},t.prototype.cos=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.cos(this.get(t,r)));return this},t.cos=function(t){return new r(t).cos()},t.prototype.cosh=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.cosh(this.get(t,r)));return this},t.cosh=function(t){return new r(t).cosh()},t.prototype.exp=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.exp(this.get(t,r)));return this},t.exp=function(t){return new r(t).exp()},t.prototype.expm1=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.expm1(this.get(t,r)));return this},t.expm1=function(t){return new r(t).expm1()},t.prototype.floor=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.floor(this.get(t,r)));return this},t.floor=function(t){return new r(t).floor()},t.prototype.fround=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.fround(this.get(t,r)));return this},t.fround=function(t){return new r(t).fround()},t.prototype.log=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.log(this.get(t,r)));return this},t.log=function(t){return new r(t).log()},t.prototype.log1p=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.log1p(this.get(t,r)));return this},t.log1p=function(t){return new r(t).log1p()},t.prototype.log10=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.log10(this.get(t,r)));return this},t.log10=function(t){return new r(t).log10()},t.prototype.log2=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.log2(this.get(t,r)));return this},t.log2=function(t){return new r(t).log2()},t.prototype.round=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.round(this.get(t,r)));return this},t.round=function(t){return new r(t).round()},t.prototype.sign=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.sign(this.get(t,r)));return this},t.sign=function(t){return new r(t).sign()},t.prototype.sin=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.sin(this.get(t,r)));return this},t.sin=function(t){return new r(t).sin()},t.prototype.sinh=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.sinh(this.get(t,r)));return this},t.sinh=function(t){return new r(t).sinh()},t.prototype.sqrt=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.sqrt(this.get(t,r)));return this},t.sqrt=function(t){return new r(t).sqrt()},t.prototype.tan=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.tan(this.get(t,r)));return this},t.tan=function(t){return new r(t).tan()},t.prototype.tanh=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.tanh(this.get(t,r)));return this},t.tanh=function(t){return new r(t).tanh()},t.prototype.trunc=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.trunc(this.get(t,r)));return this},t.trunc=function(t){return new r(t).trunc()},t.pow=function(t,e){return new r(t).pow(e)},t.prototype.pow=function(t){return"number"===typeof t?this.powS(t):this.powM(t)},t.prototype.powS=function(t){for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,Math.pow(this.get(r,e),t));return this},t.prototype.powM=function(t){if(t=r.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var o=0;o<this.columns;o++)this.set(e,o,Math.pow(this.get(e,o),t.get(e,o)));return this}}(O,L);var _=function(t){(0,i.Z)(e,t);var r=(0,a.Z)(e);function e(t){var n;return(0,o.Z)(this,e),(n=r.call(this)).data=t,n.rows=t.length,n.columns=t[0].length,n}return(0,n.Z)(e,[{key:"set",value:function(t,r,e){return this.data[t][r]=e,this}},{key:"get",value:function(t,r){return this.data[t][r]}}]),e}(O);function U(t,r){var e=0;return Math.abs(t)>Math.abs(r)?(e=r/t,Math.abs(t)*Math.sqrt(1+e*e)):0!==r?(e=t/r,Math.abs(r)*Math.sqrt(1+e*e)):0}var W=function(){function t(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,o.Z)(this,t),(r=_.checkMatrix(r)).isEmpty())throw new Error("Matrix must be non-empty");var n,s=r.rows,i=r.columns,a=e.computeLeftSingularVectors,u=void 0===a||a,h=e.computeRightSingularVectors,c=void 0===h||h,f=e.autoTranspose,l=void 0!==f&&f,m=Boolean(u),v=Boolean(c),p=!1;if(s<i)if(l){s=(n=r.transpose()).rows,i=n.columns,p=!0;var w=m;m=v,v=w}else n=r.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else n=r.clone();for(var g=Math.min(s,i),d=Math.min(s+1,i),y=new Float64Array(d),b=new L(s,g),M=new L(i,i),k=new Float64Array(i),x=new Float64Array(s),E=new Float64Array(d),S=0;S<d;S++)E[S]=S;for(var N=Math.min(s-1,i),C=Math.max(0,Math.min(i-2,s)),R=Math.max(N,C),Z=0;Z<R;Z++){if(Z<N){y[Z]=0;for(var I=Z;I<s;I++)y[Z]=U(y[Z],n.get(I,Z));if(0!==y[Z]){n.get(Z,Z)<0&&(y[Z]=-y[Z]);for(var T=Z;T<s;T++)n.set(T,Z,n.get(T,Z)/y[Z]);n.set(Z,Z,n.get(Z,Z)+1)}y[Z]=-y[Z]}for(var A=Z+1;A<i;A++){if(Z<N&&0!==y[Z]){for(var P=0,V=Z;V<s;V++)P+=n.get(V,Z)*n.get(V,A);P=-P/n.get(Z,Z);for(var q=Z;q<s;q++)n.set(q,A,n.get(q,A)+P*n.get(q,Z))}k[A]=n.get(Z,A)}if(m&&Z<N)for(var j=Z;j<s;j++)b.set(j,Z,n.get(j,Z));if(Z<C){k[Z]=0;for(var z=Z+1;z<i;z++)k[Z]=U(k[Z],k[z]);if(0!==k[Z]){k[Z+1]<0&&(k[Z]=0-k[Z]);for(var F=Z+1;F<i;F++)k[F]/=k[Z];k[Z+1]+=1}if(k[Z]=-k[Z],Z+1<s&&0!==k[Z]){for(var O=Z+1;O<s;O++)x[O]=0;for(var D=Z+1;D<s;D++)for(var W=Z+1;W<i;W++)x[D]+=k[W]*n.get(D,W);for(var Y=Z+1;Y<i;Y++)for(var B=-k[Y]/k[Z+1],G=Z+1;G<s;G++)n.set(G,Y,n.get(G,Y)+B*x[G])}if(v)for(var H=Z+1;H<i;H++)M.set(H,Z,k[H])}}var J=Math.min(i,s+1);if(N<i&&(y[N]=n.get(N,N)),s<J&&(y[J-1]=0),C+1<J&&(k[C]=n.get(C,J-1)),k[J-1]=0,m){for(var K=N;K<g;K++){for(var X=0;X<s;X++)b.set(X,K,0);b.set(K,K,1)}for(var Q=N-1;Q>=0;Q--)if(0!==y[Q]){for(var $=Q+1;$<g;$++){for(var tt=0,rt=Q;rt<s;rt++)tt+=b.get(rt,Q)*b.get(rt,$);tt=-tt/b.get(Q,Q);for(var et=Q;et<s;et++)b.set(et,$,b.get(et,$)+tt*b.get(et,Q))}for(var ot=Q;ot<s;ot++)b.set(ot,Q,-b.get(ot,Q));b.set(Q,Q,1+b.get(Q,Q));for(var nt=0;nt<Q-1;nt++)b.set(nt,Q,0)}else{for(var st=0;st<s;st++)b.set(st,Q,0);b.set(Q,Q,1)}}if(v)for(var it=i-1;it>=0;it--){if(it<C&&0!==k[it])for(var at=it+1;at<i;at++){for(var ut=0,ht=it+1;ht<i;ht++)ut+=M.get(ht,it)*M.get(ht,at);ut=-ut/M.get(it+1,it);for(var ct=it+1;ct<i;ct++)M.set(ct,at,M.get(ct,at)+ut*M.get(ct,it))}for(var ft=0;ft<i;ft++)M.set(ft,it,0);M.set(it,it,1)}for(var lt=J-1,mt=Number.EPSILON;J>0;){var vt=void 0,pt=void 0;for(vt=J-2;vt>=-1&&-1!==vt;vt--){var wt=Number.MIN_VALUE+mt*Math.abs(y[vt]+Math.abs(y[vt+1]));if(Math.abs(k[vt])<=wt||Number.isNaN(k[vt])){k[vt]=0;break}}if(vt===J-2)pt=4;else{var gt=void 0;for(gt=J-1;gt>=vt&&gt!==vt;gt--){var dt=(gt!==J?Math.abs(k[gt]):0)+(gt!==vt+1?Math.abs(k[gt-1]):0);if(Math.abs(y[gt])<=mt*dt){y[gt]=0;break}}gt===vt?pt=3:gt===J-1?pt=1:(pt=2,vt=gt)}switch(vt++,pt){case 1:var yt=k[J-2];k[J-2]=0;for(var bt=J-2;bt>=vt;bt--){var Mt=U(y[bt],yt),kt=y[bt]/Mt,xt=yt/Mt;if(y[bt]=Mt,bt!==vt&&(yt=-xt*k[bt-1],k[bt-1]=kt*k[bt-1]),v)for(var Et=0;Et<i;Et++)Mt=kt*M.get(Et,bt)+xt*M.get(Et,J-1),M.set(Et,J-1,-xt*M.get(Et,bt)+kt*M.get(Et,J-1)),M.set(Et,bt,Mt)}break;case 2:var St=k[vt-1];k[vt-1]=0;for(var Nt=vt;Nt<J;Nt++){var Ct=U(y[Nt],St),Rt=y[Nt]/Ct,Zt=St/Ct;if(y[Nt]=Ct,St=-Zt*k[Nt],k[Nt]=Rt*k[Nt],m)for(var It=0;It<s;It++)Ct=Rt*b.get(It,Nt)+Zt*b.get(It,vt-1),b.set(It,vt-1,-Zt*b.get(It,Nt)+Rt*b.get(It,vt-1)),b.set(It,Nt,Ct)}break;case 3:var Tt=Math.max(Math.abs(y[J-1]),Math.abs(y[J-2]),Math.abs(k[J-2]),Math.abs(y[vt]),Math.abs(k[vt])),At=y[J-1]/Tt,Pt=y[J-2]/Tt,Vt=k[J-2]/Tt,qt=y[vt]/Tt,jt=k[vt]/Tt,zt=((Pt+At)*(Pt-At)+Vt*Vt)/2,Ft=At*Vt*(At*Vt),Ot=0;0===zt&&0===Ft||(Ot=Ft/(zt+(Ot=zt<0?0-Math.sqrt(zt*zt+Ft):Math.sqrt(zt*zt+Ft))));for(var Dt=(qt+At)*(qt-At)+Ot,Lt=qt*jt,_t=vt;_t<J-1;_t++){var Ut=U(Dt,Lt);0===Ut&&(Ut=Number.MIN_VALUE);var Wt=Dt/Ut,Yt=Lt/Ut;if(_t!==vt&&(k[_t-1]=Ut),Dt=Wt*y[_t]+Yt*k[_t],k[_t]=Wt*k[_t]-Yt*y[_t],Lt=Yt*y[_t+1],y[_t+1]=Wt*y[_t+1],v)for(var Bt=0;Bt<i;Bt++)Ut=Wt*M.get(Bt,_t)+Yt*M.get(Bt,_t+1),M.set(Bt,_t+1,-Yt*M.get(Bt,_t)+Wt*M.get(Bt,_t+1)),M.set(Bt,_t,Ut);if(0===(Ut=U(Dt,Lt))&&(Ut=Number.MIN_VALUE),Wt=Dt/Ut,Yt=Lt/Ut,y[_t]=Ut,Dt=Wt*k[_t]+Yt*y[_t+1],y[_t+1]=-Yt*k[_t]+Wt*y[_t+1],Lt=Yt*k[_t+1],k[_t+1]=Wt*k[_t+1],m&&_t<s-1)for(var Gt=0;Gt<s;Gt++)Ut=Wt*b.get(Gt,_t)+Yt*b.get(Gt,_t+1),b.set(Gt,_t+1,-Yt*b.get(Gt,_t)+Wt*b.get(Gt,_t+1)),b.set(Gt,_t,Ut)}k[J-2]=Dt,1;break;case 4:if(y[vt]<=0&&(y[vt]=y[vt]<0?-y[vt]:0,v))for(var Ht=0;Ht<=lt;Ht++)M.set(Ht,vt,-M.get(Ht,vt));for(;vt<lt&&!(y[vt]>=y[vt+1]);){var Jt=y[vt];if(y[vt]=y[vt+1],y[vt+1]=Jt,v&&vt<i-1)for(var Kt=0;Kt<i;Kt++)Jt=M.get(Kt,vt+1),M.set(Kt,vt+1,M.get(Kt,vt)),M.set(Kt,vt,Jt);if(m&&vt<s-1)for(var Xt=0;Xt<s;Xt++)Jt=b.get(Xt,vt+1),b.set(Xt,vt+1,b.get(Xt,vt)),b.set(Xt,vt,Jt);vt++}0,J--}}if(p){var Qt=M;M=b,b=Qt}this.m=s,this.n=i,this.s=y,this.U=b,this.V=M}return(0,n.Z)(t,[{key:"solve",value:function(t){for(var r=t,e=this.threshold,o=this.s.length,n=L.zeros(o,o),s=0;s<o;s++)Math.abs(this.s[s])<=e?n.set(s,s,0):n.set(s,s,1/this.s[s]);for(var i=this.U,a=this.rightSingularVectors,u=a.mmul(n),h=a.rows,c=i.rows,f=L.zeros(h,c),l=0;l<h;l++)for(var m=0;m<c;m++){for(var v=0,p=0;p<o;p++)v+=u.get(l,p)*i.get(m,p);f.set(l,m,v)}return f.mmul(r)}},{key:"solveForDiagonal",value:function(t){return this.solve(L.diag(t))}},{key:"inverse",value:function(){for(var t=this.V,r=this.threshold,e=t.rows,o=t.columns,n=new L(e,this.s.length),s=0;s<e;s++)for(var i=0;i<o;i++)Math.abs(this.s[i])>r&&n.set(s,i,t.get(s,i)/this.s[i]);for(var a=this.U,u=a.rows,h=a.columns,c=new L(e,u),f=0;f<e;f++)for(var l=0;l<u;l++){for(var m=0,v=0;v<h;v++)m+=n.get(f,v)*a.get(l,v);c.set(f,l,m)}return c}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,r=0,e=this.s,o=0,n=e.length;o<n;o++)e[o]>t&&r++;return r}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return L.diag(this.s)}}]),t}();function Y(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.EPSILON;if((t=L.checkMatrix(t)).isEmpty())return t.transpose();for(var e=new W(t,{autoTranspose:!0}),o=e.leftSingularVectors,n=e.rightSingularVectors,s=e.diagonal,i=0;i<s.length;i++)Math.abs(s[i])>r?s[i]=1/s[i]:s[i]=0;return n.mmul(L.diag(s).mmul(o.transpose()))}var B=function(){function t(r,e){var n=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,o.Z)(this,t);var i=s.intercept,a=void 0===i||i,u=s.statistics,h=void 0===u||u;if(this.statistics=h,!0===r)this.weights=e.weights,this.inputs=e.inputs,this.outputs=e.outputs,this.intercept=e.intercept;else{r=new L(r),e=new L(e),a&&r.addColumn(new Array(r.rows).fill(1));var c=r.transpose(),f=c.mmul(r),l=c.mmul(e),m=new W(f).inverse(),v=l.transpose().mmul(m).transpose();if(this.weights=v.to2DArray(),this.inputs=r.columns,this.outputs=e.columns,a&&this.inputs--,this.intercept=a,h){var p=r.mmul(v),w=e.clone().addM(p.neg()),g=w.to2DArray().map((function(t){return Math.pow(t[0],2)})).reduce((function(t,r){return t+r}))/(e.rows-r.columns);this.stdError=Math.sqrt(g),this.stdErrorMatrix=Y(f).mul(g),this.stdErrors=this.stdErrorMatrix.diagonal().map((function(t){return Math.sqrt(t)})),this.tStats=this.weights.map((function(t,r){return 0===n.stdErrors[r]?0:t[0]/n.stdErrors[r]}))}}}return(0,n.Z)(t,[{key:"predict",value:function(t){if(Array.isArray(t)){if("number"===typeof t[0])return this._predict(t);if(Array.isArray(t[0])){for(var r=new Array(t.length),e=0;e<t.length;e++)r[e]=this._predict(t[e]);return r}}else if(L.isMatrix(t)){for(var o=new L(t.rows,this.outputs),n=0;n<t.rows;n++)o.setRow(n,this._predict(t.getRow(n)));return o}throw new TypeError("x must be a matrix or array of numbers")}},{key:"_predict",value:function(t){var r=new Array(this.outputs);if(this.intercept)for(var e=0;e<this.outputs;e++)r[e]=this.weights[this.inputs][e];else r.fill(0);for(var o=0;o<this.inputs;o++)for(var n=0;n<this.outputs;n++)r[n]+=this.weights[o][n]*t[o];return r}},{key:"score",value:function(){throw new Error("score method is not implemented yet")}},{key:"toJSON",value:function(){var t=this;return{name:"multivariateLinearRegression",weights:this.weights,inputs:this.inputs,outputs:this.outputs,intercept:this.intercept,summary:this.statistics?{regressionStatistics:{standardError:this.stdError,observations:this.outputs},variables:this.weights.map((function(r,e){return{label:e===t.weights.length-1?"Intercept":"X Variable ".concat(e+1),coefficients:r,standardError:t.stdErrors[e],tStat:t.tStats[e]}}))}:void 0}}}],[{key:"load",value:function(r){if("multivariateLinearRegression"!==r.name)throw new Error("not a MLR model");return new t(!0,r)}}]),t}()}}]);
//# sourceMappingURL=660.62bfc76d.chunk.js.map