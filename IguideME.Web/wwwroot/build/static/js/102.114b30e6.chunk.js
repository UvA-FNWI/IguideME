"use strict";(self.webpackChunkiguideme=self.webpackChunkiguideme||[]).push([[102],{1699:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(15671),i=n(43144),s=n(60136),a=n(95212),o=n(68438),l=n(5674),d=n(68865),u=n(30767),c=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,null,[{key:"getStudents",value:function(){return(0,o.f)()?(0,u.g)(d.wZ):this.client.get("students").then((function(e){return e.data}))}},{key:"getConsents",value:function(){return(0,o.f)()?(0,u.g)(d.nj):this.client.get("consents").then((function(e){return e.data}))}},{key:"getGoalgrades",value:function(){return(0,o.f)()?(0,u.g)(d.sU):this.client.get("goal-grades").then((function(e){return e.data}))}}]),n}(l.Z)},71102:function(e,t,n){n.r(t),n.d(t,{default:function(){return ye}});var r,i=n(15671),s=n(43144),a=n(60136),o=n(95212),l=n(72791),d=n(98284),u=n(72014),c=n(49109),p=n(74165),h=n(37762),f=n(15861),g=n(28817),v=n(83099),x=n(80184),m=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"render",value:function(){var e=this.props.peerGrades,t=function(e){return Math.round(100*e)/100};return(0,x.jsxs)("div",{className:"peerComparison",children:[(0,x.jsx)("span",{className:"title",children:"Peer Comparison"}),e?(0,x.jsxs)("div",{className:"distribution",children:[(0,x.jsxs)("div",{className:"min",children:[(0,x.jsx)("small",{children:"min."}),(0,x.jsx)("br",{}),t(e.min)]}),(0,x.jsxs)("div",{className:"avg",children:[(0,x.jsx)("small",{children:"avg."}),(0,x.jsx)("br",{}),t(e.avg)]}),(0,x.jsxs)("div",{className:"max",children:[(0,x.jsx)("small",{children:"max."}),(0,x.jsx)("br",{}),t(e.max)]})]}):(0,x.jsx)("p",{children:"Not available"})]})}}]),n}(l.Component),y=n(60793),j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=e.map((function(e){return e.average}));return 0===n.length?null:Math.round(y.mean(n)*Math.pow(10,t))/Math.pow(10,t)},Z=function(e,t,n){return"BINARY"===e.content?n.length>0?Math.round(n.filter((function(e){return parseFloat(e.grade)>.8})).length/t.length*100):0:Math.round(n.length/t.length*100)},b=n(83373),k=n(27804),_=n(90398),C=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={loading:!0,passed:!1},e.setup=function(){var t=e.props.grade;e.setState({loading:!1,passed:parseFloat(t)>=5.5})},e}return(0,s.Z)(n,[{key:"componentDidMount",value:function(){this.setup()}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.passed,r=this.props.grade;return(0,x.jsx)("div",{className:"gradeStatistic",children:(0,x.jsx)(b.Z,{title:"Grade",value:r,loading:t,prefix:n?(0,x.jsx)(k.Z,{className:"pass"}):(0,x.jsx)(_.Z,{className:"fail"})})})}}]),n}(l.Component);!function(e){e[e.topic=0]="topic",e[e.entry=1]="entry",e[e.reply=2]="reply"}(r||(r={}));var S=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={loaded:!1},e.getHeader=function(){var t=e.props,n=t.tile,i=t.tileEntries,s=t.submissions,a=t.userGrades,o=t.discussions,l=t.learningOutcomes,d=t.student,u=j(a);if("DISCUSSIONS"===n.type){var c=0;return o.map((function(e){e.type===r.topic?e.posted_by===d.name&&c++:c++})),(0,x.jsxs)("span",{style:{textAlign:"center"},children:[(0,x.jsx)("strong",{children:c})," discussion",1!==o.length&&"s"]})}switch(n.content){case"LEARNING_OUTCOMES":var p=l.filter((function(e){return e.success})).length;return(0,x.jsxs)("span",{style:{textAlign:"center"},children:[(0,x.jsxs)("strong",{children:[p,(0,x.jsxs)("small",{children:["/",l.length]})]})," completed"]});case"PREDICTION":return(0,x.jsx)(C,{grade:u?u.toString():"-"});case"BINARY":return(0,x.jsxs)(x.Fragment,{children:[!!u&&(0,x.jsx)(g.Z,{percent:Z(n,i,s)}),(0,x.jsx)(C,{grade:u?(10*u).toString():"-"})]});case"ENTRIES":return(0,x.jsxs)(x.Fragment,{children:[!!u&&(0,x.jsx)(g.Z,{percent:Z(n,i,s)}),(0,x.jsx)(C,{grade:u?u.toString():"-"})]});default:return null}},e}return(0,s.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.tile,n=e.peerGrades,r=e.userGrades;return(0,x.jsx)("div",{className:"tile",onClick:function(){window.dispatchEvent(new CustomEvent("selectTile",{detail:{tile:t,userGrades:r}}))},children:(0,x.jsxs)("div",{className:"wrapper",children:[(0,x.jsxs)("div",{className:"content",children:[(0,x.jsx)("h2",{children:t.title}),(0,x.jsx)(v.Z,{direction:"vertical",style:{width:"100%"},children:this.getHeader()})]}),(0,x.jsx)(m,{peerGrades:n.find((function(e){return e.tileID===t.id}))})]})})}}]),n}(l.Component),w=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.tileGroup,n=e.tileEntries,r=e.tiles,i=e.student,s=e.tilesGradeSummary,a=e.peerGrades,o=e.submissions,l=e.discussions,d=e.learningOutcomes;return(0,x.jsxs)("div",{className:"tileGroup",children:[(0,x.jsx)("h2",{children:t.title}),(0,x.jsx)("div",{className:"tileWrapper",children:r.sort((function(e,t){return e.position-t.position})).map((function(e){return(0,x.jsx)(S,{tile:e,tileEntries:n.filter((function(t){return t.tile_id===e.id})),discussions:l,student:i,submissions:o.get(e.id),userGrades:s.filter((function(t){return t.tile.id===e.id})),peerGrades:a.filter((function(t){return t.tileID===e.id})),learningOutcomes:d},e.id)}))})]})}}]),n}(l.Component),G=n(17350),N=n(86916),E=n(95909),A=n(58686),I=n(19603),O=n(67575),P=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.submissions,n=e.tileEntries;return(0,x.jsx)("div",{id:"binaryEntries",children:(0,x.jsx)(A.Z,{gutter:[5,5],children:t.map((function(e){var t="0"!==e.grade.slice(0,1),r=n.find((function(t){return t.id===e.entry_id}));return(0,x.jsx)(I.Z,{xs:12,md:8,lg:6,children:(0,x.jsxs)("div",{className:"entry ".concat(t?"success":"fail"),children:[(0,x.jsx)("h2",{children:r?r.title:null}),t?(0,x.jsxs)("span",{children:[(0,x.jsx)(O.Z,{})," Present"]}):(0,x.jsx)("span",{children:"Absent"})]})},e.entry_id)}))})})}}]),n}(l.Component),T=n(87309),M=n(99372),D=n(91333),R=n(32788),L=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.tileEntry,n=e.submission,r="string"===typeof n.meta?JSON.parse(n.meta||"{}"):n.meta||{};return(0,x.jsxs)("div",{className:"tileEntry",children:[(0,x.jsx)("h2",{children:t.title}),(0,x.jsx)(D.Z,{style:{margin:"5px 0"}}),(0,x.jsx)(C,{grade:n.grade}),Object.keys(r).length>0&&(0,x.jsx)("div",{children:(0,x.jsx)(R.Z,{dataSource:Object.keys(r).map((function(e,t){return{key:t,label:e,value:r[e]}})),columns:[{title:"Key",dataIndex:"label",key:"label",width:"40%",ellipsis:!0},{title:"Value",dataIndex:"value",key:"value"}]})})]})}}]),n}(l.Component),U=n(28353),B=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.tile,n=e.tileEntries,r=e.submissions;if(t.graph_view){var i={labels:r.map((function(e,t){var r,i=n.find((function(t){return t.id===e.entry_id}));return null!==(r=null===i||void 0===i?void 0:i.title)&&void 0!==r?r:"???"})),datasets:[{label:t.title+" grades",data:r.map((function(e){return e.grade})),fill:!1,backgroundColor:"rgba(75,192,192,1)"}]};return(0,x.jsx)("div",{id:"tileEntriesGraph",style:{minHeight:"60vh"},children:(0,x.jsx)("div",{children:(0,x.jsx)(U.$Q,{options:{legend:{display:!1}},width:500,data:i})})})}return(0,x.jsx)("div",{id:"tileEntriesList",children:(0,x.jsx)(A.Z,{gutter:[10,10],children:n.map((function(e){var t=r.find((function(t){return t.entry_id===e.id}));return t?(0,x.jsx)(I.Z,{xs:24,sm:12,md:8,lg:6,className:"entryCol",children:(0,x.jsx)(L,{submission:t,tileEntry:e})},e.id):null}))})})}}]),n}(l.Component),F=n(77533),Y=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"render",value:function(){var e,t=this.props,n=t.predictions,r=t.tileEntries,i=F.h.getState().tiles,s=i.filter((function(e){return"BINARY"===e.content})).length+1,a=(0,h.Z)(r);try{var o=function(){var t=e.value,n=i.find((function(e){return e.id===t.tile_id}));return n?"BINARY"===n.content?"continue":void(s+=1):"continue"};for(a.s();!(e=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}var l=function(e){return Math.round(100*e)/100},d=Array.from(Array(s).keys()).map((function(e){return 5-4.5/s*e}));if(0===n.length)return(0,x.jsxs)("div",{id:"gradePrediction",children:[(0,x.jsx)("h2",{children:"No predictions available."}),(0,x.jsx)("p",{children:"Try again later when more grades are available."})]});return(0,x.jsxs)("div",{id:"gradePrediction",children:[(0,x.jsxs)("h3",{children:["Your predicted grade is a ",(0,x.jsx)("strong",{children:l(n[n.length-1].grade)})]}),(0,x.jsx)(U.$Q,{options:{legend:{display:!1},scales:{xAxes:[{id:"x",type:"category"}],yAxes:[{id:"y",type:"linear",position:"left",ticks:{beginAtZero:!0,min:0,max:10}}]}},width:500,data:function(e){var t=e.getContext("2d"),r=t.createLinearGradient(0,0,0,350);r.addColorStop(0,"#FFF"),r.addColorStop(1,"rgb(90, 50, 255)");var i=t.createLinearGradient(0,0,0,350);return i.addColorStop(1,"#FFF"),i.addColorStop(0,"rgb(90, 50, 255)"),{labels:n.map((function(e){return e.date})),datasets:[{label:"Predicted grade",type:"line",backgroundColor:"rgb(90, 50, 255)",borderColor:"rgb(90, 50, 255)",hoverBorderColor:"rgb(90, 50, 255)",fill:!1,tension:0,data:n.map((function(e){return l(e.grade)})),yAxisID:"y",xAxisID:"x"},{label:"UpperConfidence",type:"line",backgroundColor:r,borderColor:"transparent",pointRadius:0,fill:0,tension:0,data:n.map((function(e,t){return e.grade+d[t+3]})),yAxisID:"y",xAxisID:"x"},{label:"LowerConfidence",type:"line",backgroundColor:i,borderColor:"transparent",pointRadius:0,fill:0,tension:0,data:n.map((function(e,t){return e.grade-d[t+3]})),yAxisID:"y",xAxisID:"x"}]}}}),(0,x.jsx)("p",{children:"Grade predictions will grow more accurate as the course progresses."})]})}}]),n}(l.Component),W=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"handle_entry_or_reply",value:function(e,t){return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(D.Z,{}),(0,x.jsx)("p",{dangerouslySetInnerHTML:{__html:e.message}}),(0,x.jsx)("small",{children:e.posted_at})]})}},{key:"handle_topic",value:function(e,t){return e.posted_by===t.name?(0,x.jsx)(I.Z,{xs:24,md:12,lg:8,children:(0,x.jsxs)("div",{className:"discussion",children:[(0,x.jsx)("h2",{children:e.title}),(0,x.jsx)("small",{children:e.posted_at}),(0,x.jsx)(D.Z,{}),(0,x.jsx)("p",{dangerouslySetInnerHTML:{__html:e.message}})]})},e.id):null}},{key:"render",value:function(){for(var e,t,n,i=this.props,s=i.discussions,a=i.student,o=new Map,l=[],d=0;d<s.length;d++)switch((n=s[d]).type){case r.topic:if(!(e=this.handle_topic(n,a)))break;void 0===(t=o.get(n.discussion_id.toString()))?o.set(n.discussion_id.toString(),{type:n.type,array:[e],title:""}):t.array.push(e);break;case r.entry:e=this.handle_entry_or_reply(n,a),void 0===(t=o.get("".concat(n.parent_id,".entries")))?o.set("".concat(n.parent_id,".entries"),{type:n.type,array:[e],title:n.title}):t.array.push(e);break;case r.reply:e=this.handle_entry_or_reply(n,a),void 0===(t=o.get("".concat(n.parent_id,".replies")))?o.set("".concat(n.parent_id,".replies"),{type:n.type,array:[e],title:n.title}):t.array.push(e)}var u,c=(0,h.Z)(o.values());try{for(c.s();!(u=c.n()).done;){var p=u.value;switch(p.type){case r.topic:l=l.concat(p.array);break;case r.entry:l.push((0,x.jsx)(I.Z,{xs:24,md:12,lg:8,children:(0,x.jsxs)("div",{className:"discussion",children:[(0,x.jsxs)("h2",{children:["Questions in: ",p.title]}),p.array]})},"{value.array[0].parent_id}.entries"));break;case r.reply:l.push((0,x.jsx)(I.Z,{xs:24,md:12,lg:8,children:(0,x.jsxs)("div",{className:"discussion",children:[(0,x.jsxs)("h2",{children:["Replies in: ",p.title]}),p.array]})},"{value.array[0].parent_id}.replies"))}}}catch(f){c.e(f)}finally{c.f()}return(0,x.jsx)("div",{id:"discussionsList",children:(0,x.jsx)(A.Z,{gutter:[10,10],children:l})})}}]),n}(l.Component),H=n(75594),V=n(65509),$=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.learningOutcomes,n=e.tileEntries,r=function(e){switch(e){case"lte":return"\u2264";case"gte":return"\u2265";default:return"="}};return(0,x.jsx)("div",{id:"learningOutcomes",children:(0,x.jsx)("div",{style:{margin:"0 auto",maxWidth:"400px",width:"100%"},children:t.map((function(e,t){return(0,x.jsx)("div",{style:{margin:"5px 0"},children:(0,x.jsx)(H.Z.Ribbon,{text:e.success?"Completed":"Not completed",color:e.success?"green":"red",children:(0,x.jsxs)(V.Z,{title:"Goal ".concat(t),size:"small",children:[(0,x.jsx)("strong",{children:e.goal.title}),(0,x.jsx)("br",{}),e.goal.requirements.map((function(e){var t=n.find((function(t){return t.id===e.entry_id}));return(0,x.jsxs)("span",{children:[t?t.title:"???"," ",r(e.expression)," ",e.value,(0,x.jsx)("br",{})]})}))]})})},e.goal.id)}))})})}}]),n}(l.Component),z=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).content=function(){var t=e.props,n=t.tile,r=t.submissions,i=t.tileEntries,s=t.predictions,a=t.discussions,o=t.learningOutcomes,l=t.student;switch(n.content){case"BINARY":return(0,x.jsx)(P,{submissions:r,tileEntries:i.filter((function(e){return e.tile_id===n.id}))});case"ENTRIES":return"DISCUSSIONS"===n.type?(0,x.jsx)(W,{discussions:a,tile:n,student:l}):(0,x.jsx)(B,{submissions:r,tileEntries:i.filter((function(e){return e.tile_id===n.id})),discussions:a,tile:n});case"PREDICTION":return(0,x.jsx)(Y,{tileEntries:i,predictions:s});case"LEARNING_OUTCOMES":return(0,x.jsx)($,{learningOutcomes:o,tileEntries:i});default:return null}},e}return(0,s.Z)(n,[{key:"render",value:function(){var e=this.props.tile;return(0,x.jsxs)("div",{style:{padding:20},children:[(0,x.jsx)(T.Z,{type:"ghost",icon:(0,x.jsx)(M.Z,{}),onClick:function(){window.dispatchEvent(new CustomEvent("selectTile",{detail:void 0}))},children:"Return to dashboard"}),(0,x.jsx)("h1",{style:{margin:"10px 0"},children:e.title}),this.content()]})}}]),n}(l.Component),Q=n(50881),q=n(78622),J=n(68961),K=n(1413),X=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).bar_options={maintainAspectRatio:!0,legend:{display:!0},scales:{xAxes:[{gridLines:{display:!1},scaleLabel:{display:!1},ticks:{display:!1},stacked:!1}],yAxes:[{barPercentage:.95,categoryPercentage:.95,gridLines:{display:!1},scaleLabel:{display:!1},stacked:!1}]}},e.click=function(e,t,n){if(t[0]){var r=n.tiles[t[0]._index];window.dispatchEvent(new CustomEvent("selectTile",{detail:{tile:r}}))}},e}return(0,s.Z)(n,[{key:"createBarData",value:function(e,t,n,i,s,a){for(var o=new Map,l=function(t){var n=0;"LEARNING_OUTCOMES"===e[t].content?n=s.filter((function(e){return e.success})).length:"DISCUSSIONS"===e[t].type&&i.map((function(e){e.type===r.topic?e.posted_by===a.name&&n++:n++})),o.set(e[t].id,{title:e[t].title,grade:n,peergrade:0,max:10,tile:e[t]})},d=0;d<e.length;d++)l(d);for(var u=0;u<t.length;u++){var c=t[u].average,p=o.get(t[u].tile.id);"BINARY"===t[u].tile.content&&(p.max=100,c*=100),c=10*c/p.max,p.grade=c}for(var h=0;h<n.length;h++){var f=n[h].avg,g=o.get(n[h].tileID);f=10*f/g.max,g.peergrade=f}var v=[],x=[],m=[],y=[];return o.forEach((function(e){0===e.grade&&0===e.peergrade||(v.push(e.tile),x.push(e.title),m.push(e.grade),y.push(e.peergrade))})),{tiles:v,labels:x,datasets:[{label:"You",backgroundColor:"rgba(47,44,232, 0.5)",borderColor:"rgba(0,0,255, 1)",borderWidth:2,data:m,skipNull:!0},{label:"Peers",backgroundColor:"rgba(255, 50, 50, .5)",borderColor:"rgba(255,0,0, 1)",borderWidth:2,data:y,skipNull:!0}]}}},{key:"render",value:function(){var e=this,t=this.props,n=t.tiles,r=t.tilesGradeSummary,i=t.peerGrades,s=t.discussions,a=t.learningOutcomes,o=t.student,l=this.createBarData(n,r,i,s,a,o);return(0,x.jsx)("div",{children:(0,x.jsx)(U.n4,{height:300,data:l,options:(0,K.Z)((0,K.Z)({},this.bar_options),{},{onClick:function(t,n){return e.click(t,n,l)}})})})}}]),n}(l.Component),ee=n(60364),te=n(23673),ne=n(91523),re=n(12740),ie=n(19503),se=(0,ee.$j)((function(e){return{course:e.course,tiles:e.tiles}})),ae=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s)))._isMounted=!1,e.state={notifications:[]},e.loadNotifications=function(t){var n=t.student;n&&re.Z.getNotifications(n.login_id).then((function(t){e._isMounted&&e.setState({notifications:t})}))},e}return(0,s.Z)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.loadNotifications(this.props)}},{key:"componentWillReceiveProps",value:function(e,t){var n,r;(null===(n=e.student)||void 0===n?void 0:n.login_id)!==(null===(r=this.props.student)||void 0===r?void 0:r.login_id)&&this.loadNotifications(e)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this.props,t=e.course,n=e.student,r=e.tiles,i=this.state.notifications,s=i.filter((function(e){return"outperforming peers"===e.status})),a=i.filter((function(e){return"closing the gap"===e.status})),o=i.filter((function(e){return"more effort required"===e.status}));return(0,x.jsxs)("div",{id:"userProfile",children:[(0,x.jsxs)(A.Z,{children:[(0,x.jsx)(I.Z,{xs:24,style:{textAlign:"center"},children:(0,x.jsx)(ne.rU,{to:"/goal-grade",children:(0,x.jsx)(T.Z,{size:"large",color:"primary",children:"Goal Grade"})})}),(0,x.jsxs)(I.Z,{xs:24,md:8,lg:6,children:[(0,x.jsx)("h3",{children:n&&n.name}),(0,x.jsx)("strong",{children:t&&t.course_name})]}),(0,x.jsx)(I.Z,{xs:24,md:0,children:(0,x.jsx)(D.Z,{})}),(0,x.jsxs)(I.Z,{xs:24,md:16,lg:18,children:[(0,x.jsx)(ie.Z,{outperforming:s,closing:a,moreEffort:o,tiles:r}),(0,x.jsx)("div",{style:{textAlign:"right"},children:(0,x.jsx)(ne.rU,{to:"/consent",children:"Informed Consent"})})]})]}),(0,x.jsx)("br",{}),(0,x.jsx)("div",{style:{textAlign:"center"},children:(0,x.jsx)("small",{children:"IGuideME is a product by the University of Amsterdam."})})]})}}]),n}(l.Component),oe=se(ae),le=n(92607),de={loadPredictions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"self";return te.A.loadPredictions(e)}},ue=(0,ee.$j)((function(e){return{dashboardColumns:e.dashboardColumns,tiles:e.tiles.filter((function(e){return e.visible})),tileGroups:e.tileGroups,tileEntries:e.tileEntries,predictions:e.predictions}}),de),ce=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={tilesGradeSummary:[],peerGrades:[],userSubmissions:new Map,loaded:!0,displayTile:null,discussions:[],learningOutcomes:[],viewType:"bar",predictions:[],goalGrade:0},e.setup=function(){var t=(0,f.Z)((0,p.Z)().mark((function t(n){var r,i,s,a,o,l,d,u,c,f,g,v,x,m,y,j,Z,b,k,_=arguments;return(0,p.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(_.length>1&&void 0!==_[1]?_[1]:[],r=n.tiles,i=n.student){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,re.Z.getPredictions(i.login_id);case 6:s=t.sent,e.setState({loaded:!1}),a=new Map,o=[],l=[],d=[],c=(0,h.Z)(r),t.prev=13,c.s();case 15:if((f=c.n()).done){t.next=39;break}if("LEARNING_OUTCOMES"!==(g=f.value).content){t.next=20;break}return l.push(N.Z.getUserGoals(g.id,i.login_id)),t.abrupt("continue",37);case 20:if("DISCUSSIONS"!==g.type){t.next=23;break}return o.push(N.Z.getDiscussions(g.id,i.login_id)),t.abrupt("continue",37);case 23:if("PREDICTION"!==g.content){t.next=26;break}return d.push({tile:g,average:s.length>0?s[0].grade:0}),t.abrupt("continue",37);case 26:return t.t0=a,t.t1=g.id,t.next=30,N.Z.getTileSubmissions(g.id,i.login_id);case 30:t.t2=t.sent,t.t0.set.call(t.t0,t.t1,t.t2),v=0,x=0,m=(0,h.Z)(a.get(g.id));try{for(m.s();!(y=m.n()).done;)j=y.value,u=parseFloat(j.grade),v+="BINARY"===g.content?Number(0!==u):u,x++}catch(p){m.e(p)}finally{m.f()}v=x?v/x:v,d.push({tile:g,average:v});case 37:t.next=15;break;case 39:t.next=44;break;case 41:t.prev=41,t.t3=t.catch(13),c.e(t.t3);case 44:return t.prev=44,c.f(),t.finish(44);case 47:return t.next=49,Promise.all(o);case 49:return Z=t.sent.flat(),t.next=52,Promise.all(l);case 52:return b=t.sent.flat(),t.next=55,le.Z.getGoalGrade();case 55:k=t.sent,e.setState({discussions:Z,learningOutcomes:b,tilesGradeSummary:d,userSubmissions:a,predictions:s,goalGrade:k},(function(){N.Z.getPeerResults(i.login_id).then((function(t){return e.setState({peerGrades:t,loaded:!0})})).catch((function(){return e.setState({loaded:!0})}))}));case 57:case"end":return t.stop()}}),t,null,[[13,41,44,47]])})));return function(e){return t.apply(this,arguments)}}(),e}return(0,s.Z)(n,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("selectTile",(function(t){e.setState({displayTile:null===t||void 0===t?void 0:t.detail})})),this.setup(this.props)}},{key:"componentWillReceiveProps",value:function(e,t){var n,r;e.student&&(null===(n=e.student)||void 0===n?void 0:n.login_id)!==(null===(r=this.props.student)||void 0===r?void 0:r.login_id)&&this.setup(e)}},{key:"render",value:function(){var e=this,t=this.state,n=t.loaded,r=t.displayTile,i=t.viewType,s=t.tilesGradeSummary,a=t.peerGrades,o=t.userSubmissions,l=t.discussions,d=t.learningOutcomes,u=t.predictions,c=t.goalGrade,p=this.props,h=p.tiles,f=p.tileGroups,g=p.dashboardColumns,v=p.tileEntries,m=p.student;return console.log("tiles",h),console.log("Discussions",l),n&&m?r?(0,x.jsx)(z,{tile:r.tile,tileEntries:v,discussions:l,predictions:u,submissions:o.get(r.tile.id),learningOutcomes:d,student:m}):(0,x.jsxs)("div",{id:"studentDashboard",children:[(0,x.jsxs)(A.Z,{children:[(0,x.jsx)(I.Z,{span:4,children:(0,x.jsxs)(Q.ZP.Group,{value:i,buttonStyle:"solid",onChange:function(t){return e.setState({viewType:t.target.value})},children:[(0,x.jsxs)(Q.ZP.Button,{value:"bar",children:[(0,x.jsx)(q.Z,{})," Bar"]}),(0,x.jsxs)(Q.ZP.Button,{value:"grid",children:[(0,x.jsx)(J.Z,{})," Grid"]})]})}),(0,x.jsx)(I.Z,{span:2,offset:18,children:(0,x.jsxs)("div",{style:{margin:10},children:["Goal Grade: ",c]})})]}),"grid"===i?(0,x.jsx)(G.Z,{children:(0,x.jsx)("div",{children:g.map((function(e){return(0,x.jsx)("div",{className:"column ".concat(e.container_width),children:f.filter((function(t){return t.column_id===e.id})).sort((function(e,t){return e.position-t.position})).map((function(e){return(0,x.jsx)(w,{tileGroup:e,tiles:h.filter((function(t){return t.group_id===e.id})),discussions:l,tileEntries:v.filter((function(t){return h.filter((function(t){return t.group_id===e.id})).map((function(e){return e.id})).includes(t.tile_id)})),student:m,tilesGradeSummary:s.filter((function(t){return t.tile.group_id===e.id})),peerGrades:a,submissions:o,learningOutcomes:d},e.id)}))},e.id)}))})}):(0,x.jsx)("div",{style:{padding:"0 8%"},children:(0,x.jsx)(X,{tiles:h,tilesGradeSummary:s,peerGrades:a,discussions:l,learningOutcomes:d,student:m})}),(0,x.jsx)(oe,{student:this.props.student})]}):(0,x.jsx)(E.Z,{small:!0})}}]),n}(l.Component),pe=ue(ce),he=n(77063),fe=n(81117),ge=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"render",value:function(){return this.props.student?(0,x.jsx)(pe,{student:this.props.student}):(0,x.jsx)("div",{id:"getStarted",children:(0,x.jsx)(he.ZP,{icon:(0,x.jsx)(fe.Z,{}),title:(0,x.jsxs)("div",{children:[(0,x.jsx)("h2",{children:"Pick a student to start!"}),(0,x.jsx)("h1",{id:"brand",children:"IGuideME"})]})})})}}]),n}(l.Component),ve=n(64880),xe=(0,ee.$j)((function(e){return{user:e.user,predictions:e.predictions}})),me=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={student:null,goalGrade:void 0},e}return(0,s.Z)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.isAdmin?this.setState({goalGrade:10}):(le.Z.getUser().then((function(t){return e.setState({student:t})})),le.Z.getGoalGrade().then((function(t){return e.setState({goalGrade:t})})))}},{key:"render",value:function(){var e=this,t=this.props.isAdmin,n=this.state,r=n.student,i=n.goalGrade;return void 0===i?(0,x.jsx)(E.Z,{}):-1===i?(0,x.jsx)(ve.l_,{to:"goal-grade"}):(0,x.jsxs)("div",{id:"app",children:[t&&(0,x.jsx)(c.Z,{studentPickView:!0,setStudent:function(t){e.setState({student:t},(function(){return window.dispatchEvent(new CustomEvent("selectTile",{detail:void 0}))}))}}),t?(0,x.jsx)(ge,{student:r}):null===r?(0,x.jsx)("h1",{children:"Your account has not yet been processed, try again tomorrow!"}):(0,x.jsx)(pe,{student:r||void 0})]})}}]),n}(l.Component),ye=(0,d._)((0,u.u)(xe(me)))},19503:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(15671),i=n(43144),s=n(60136),a=n(95212),o=n(72791),l=n(68409),d=n(18341),u=n(90398),c=n(80184),p=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s)))._getTileTitle=function(t){var n,r;return null!==(n=null===(r=e.props.tiles.find((function(e){return e.id===t})))||void 0===r?void 0:r.title)&&void 0!==n?n:""},e}return(0,i.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.outperforming,r=t.closing,i=t.moreEffort;return(0,c.jsxs)("div",{className:"Notifications",children:[n.length>0&&(0,c.jsxs)("div",{children:[(0,c.jsx)(l.Z,{})," ","You are outperforming your peers in:",(0,c.jsx)("ul",{style:{boxSizing:"border-box",paddingLeft:30},children:n.map((function(t,n){return(0,c.jsx)("li",{children:e._getTileTitle(t.tile_id)},n)}))})]}),r.length>0&&(0,c.jsxs)("div",{children:[(0,c.jsx)(d.Z,{})," ","You are closing the gap to your peers in:",(0,c.jsx)("ul",{style:{boxSizing:"border-box",paddingLeft:30},children:r.map((function(t,n){return(0,c.jsx)("li",{children:e._getTileTitle(t.tile_id)},n)}))})]}),i.length>0&&(0,c.jsxs)("div",{children:[(0,c.jsx)(u.Z,{})," ","You have to put more effort in:",(0,c.jsx)("ul",{style:{boxSizing:"border-box",paddingLeft:30},children:i.map((function(t){return(0,c.jsx)("li",{children:e._getTileTitle(t.tile_id)})}))})]})]})}}]),n}(o.Component)},49109:function(e,t,n){n.d(t,{Z:function(){return j}});var r=n(1413),i=n(15671),s=n(43144),a=n(60136),o=n(95212),l=n(72791),d=n(18622),u=n(35945),c=n(87309),p=n(14057),h=n(91523),f=n(1699),g=n(68438),v=n(60364),x=n(80184),m=(0,v.$j)((function(e){return{course:e.course,user:e.user}})),y=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={loaded:!1,students:[]},e}return(0,s.Z)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.studentPickView&&f.Z.getStudents().then((function(t){return e.setState({students:t,loaded:!0})})),this.setState({loaded:!0})}},{key:"renderInner",value:function(){var e=this;if(this.props.studentPickView){var t=this.state,n=t.students,i=t.loaded;return(0,x.jsx)(d.ZP,{id:"studentPicker",isLoading:!i,options:n.sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(e){return{label:e.name,value:e.login_id}})),placeholder:"Choose a student",onChange:function(t){return e.props.setStudent(t?n.find((function(e){return e.login_id===t.value})):null)},isClearable:!0,styles:{control:function(e,t){return(0,r.Z)((0,r.Z)({},e),{},{backgroundColor:"transparent",color:"white",border:"1px solid white"})},singleValue:function(e,t){return(0,r.Z)((0,r.Z)({},e),{},{color:"white"})}}})}return(0,x.jsx)("div",{id:"inner",children:(0,x.jsx)("h2",{children:this.props.course?this.props.course.course_name:"Loading course..."})})}},{key:"render",value:function(){return(0,x.jsxs)(l.Fragment,{children:[(0,x.jsxs)("div",{id:"adminHeader",children:[this.props.studentPickView?(0,x.jsx)(h.rU,{to:"/admin",style:{float:"right"},children:(0,x.jsx)("h3",{children:"Admin Panel"})}):(0,x.jsx)("div",{style:{float:"right",padding:20},children:(0,x.jsx)(u.Z,{title:"Reload data",children:(0,x.jsx)(c.Z,{id:"reload",shape:"circle",style:{backgroundColor:"rgba(255, 255, 255, 0.5)",color:"white"},icon:(0,x.jsx)(p.Z,{})})})}),(0,x.jsxs)("div",{id:"navbarContent",children:[(0,x.jsx)("div",{id:"brand",children:(0,x.jsx)(h.rU,{to:"/",children:(0,x.jsx)("h1",{children:"IGuideME"})})}),this.renderInner()]})]}),(0,g.f)()&&(0,x.jsxs)("div",{id:"debugNotice",children:["Application is running in ",(0,x.jsx)("strong",{children:"demo"})," mode. Changes will not be saved!"]})]})}}]),n}(l.Component),j=m(y)}}]);
//# sourceMappingURL=102.114b30e6.chunk.js.map