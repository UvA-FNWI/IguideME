(this.webpackJsonpiguideme=this.webpackJsonpiguideme||[]).push([[17],{186:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(4),a=n(5),i=n(8),l=n(9),o=n(3),c=n(16),s=n(74),u=n(10),d=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,null,[{key:"getStudents",value:function(){return Object(o.a)()?Object(u.a)(s.a):this.client.get("students").then((function(e){return e.data}))}}]),n}(c.a)},191:function(e,t,n){"use strict";var r=n(6),a=n(4),i=n(5),l=n(8),o=n(9),c=n(0),s=n.n(c),u=n(223),d=n(415),m=n(73),p=n(978),f=n(48),h=n(186),g=n(3),v=n(46),E=(n(192),Object(v.b)((function(e){return{course:e.course,user:e.user}}))),b=function(e){Object(l.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).state={loaded:!1,students:[]},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.studentPickView&&h.a.getStudents().then((function(t){return e.setState({students:t,loaded:!0})})),this.setState({loaded:!0})}},{key:"renderInner",value:function(){var e=this;if(this.props.studentPickView){var t=this.state,n=t.students,a=t.loaded;return s.a.createElement(u.a,{id:"studentPicker",isLoading:!a,options:n.sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(e){return{label:e.name,value:e.login_id}})),placeholder:"Choose a student",onChange:function(t){return e.props.setStudent(t?n.find((function(e){return e.login_id===t.value})):null)},isClearable:!0,styles:{control:function(e,t){return Object(r.a)(Object(r.a)({},e),{},{backgroundColor:"transparent",color:"white",border:"1px solid white"})},singleValue:function(e,t){return Object(r.a)(Object(r.a)({},e),{},{color:"white"})}}})}return s.a.createElement("div",{id:"inner"},s.a.createElement("h2",null,this.props.course?this.props.course.course_name:"Loading course..."))}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{id:"adminHeader"},this.props.studentPickView?s.a.createElement(f.b,{to:"/admin",style:{float:"right"}},s.a.createElement("h3",null,"Admin Panel")):s.a.createElement("div",{style:{float:"right",padding:20}},s.a.createElement(d.a,{title:"Reload data"},s.a.createElement(m.a,{id:"reload",shape:"circle",style:{backgroundColor:"rgba(255, 255, 255, 0.5)",color:"white"},icon:s.a.createElement(p.a,null)}))),s.a.createElement("div",{id:"navbarContent"},s.a.createElement("div",{id:"brand"},s.a.createElement(f.b,{to:"/"},s.a.createElement("h1",null,"IGuideME"))),this.renderInner())),Object(g.a)()&&s.a.createElement("div",{id:"debugNotice"},"Application is running in ",s.a.createElement("strong",null,"demo")," mode. Changes will not be saved!"))}}]),n}(c.Component);t.a=E(b)},192:function(e,t,n){},717:function(e,t,n){},718:function(e,t,n){},719:function(e,t,n){},720:function(e,t,n){},721:function(e,t,n){},743:function(e,t,n){},744:function(e,t,n){},745:function(e,t,n){},746:function(e,t,n){},761:function(e,t,n){},765:function(e,t,n){},766:function(e,t,n){},969:function(e,t,n){"use strict";n.r(t);var r=n(4),a=n(5),i=n(8),l=n(9),o=n(0),c=n.n(o),s=n(104),u=n(75),d=n(191),m=n(18),p=n(198),f=n(13),h=n(7),g=n.n(h),v=n(613),E=n(171),b=(n(717),function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props.peerGrades,t=function(e){return Math.round(100*e)/100};return c.a.createElement("div",{className:"peerComparison"},c.a.createElement("span",{className:"title"},"Peer Comparison"),e?c.a.createElement("div",{className:"distribution"},c.a.createElement("div",{className:"min"},c.a.createElement("small",null,"min."),c.a.createElement("br",null),t(e.min)),c.a.createElement("div",{className:"avg"},c.a.createElement("small",null,"avg."),c.a.createElement("br",null),t(e.avg)),c.a.createElement("div",{className:"max"},c.a.createElement("small",null,"max."),c.a.createElement("br",null),t(e.max))):c.a.createElement("p",null,"Not available"))}}]),n}(o.Component)),y=n(291),O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=e.map((function(e){return e.average}));return 0===n.length?null:Math.round(y.mean(n)*Math.pow(10,t))/Math.pow(10,t)},j=function(e,t,n){return"BINARY"===e.content?n.length>0?Math.round(n.filter((function(e){return parseFloat(e.grade)>.8})).length/t.length*100):0:Math.round(n.length/t.length*100)},x=n(695),w=n(979),_=n(980),k=(n(718),function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).state={loading:!0,passed:!1},e.setup=function(){var t=e.props.grade;e.setState({loading:!1,passed:parseFloat(t)>=5.5})},e}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.setup()}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.passed,r=this.props.grade;return c.a.createElement("div",{className:"gradeStatistic"},c.a.createElement(x.a,{title:"Grade",value:r,loading:t,prefix:n?c.a.createElement(w.a,{className:"pass"}):c.a.createElement(_.a,{className:"fail"})}))}}]),n}(o.Component)),C=(n(719),function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).state={loaded:!1},e.getHeader=function(){var t=e.props,n=t.tile,r=t.tileEntries,a=t.submissions,i=t.userGrades,l=t.discussions,o=t.learningOutcomes,s=O(i);if("DISCUSSIONS"===n.type)return c.a.createElement("span",{style:{textAlign:"center"}},c.a.createElement("strong",null,l.length)," discussion",1!==l.length&&"s");switch(n.content){case"LEARNING_OUTCOMES":var u=o.filter((function(e){return e.success})).length;return c.a.createElement("span",{style:{textAlign:"center"}},c.a.createElement("strong",null,u,c.a.createElement("small",null,"/",o.length))," completed");case"PREDICTION":return c.a.createElement(k,{grade:s?s.toString():"-"});case"BINARY":case"ENTRIES":return c.a.createElement(c.a.Fragment,null,!!s&&c.a.createElement(v.a,{percent:j(n,r,a)}),c.a.createElement(k,{grade:s?s.toString():"-"}));default:return null}},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.tile,n=e.peerGrades,r=e.userGrades;return c.a.createElement("div",{className:"tile",onClick:function(){window.dispatchEvent(new CustomEvent("selectTile",{detail:{tile:t,userGrades:r}}))}},c.a.createElement("div",{className:"wrapper"},c.a.createElement("div",{className:"content"},c.a.createElement("h2",null,t.title),c.a.createElement(E.b,{direction:"vertical",style:{width:"100%"}},this.getHeader())),c.a.createElement(b,{peerGrades:n.find((function(e){return e.tileID===t.id}))})))}}]),n}(o.Component)),S=(n(720),function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.tileGroup,n=e.tileEntries,r=e.tiles,a=e.student,i=e.tilesGradeSummary,l=e.peerGrades,o=e.submissions,s=e.discussions,u=e.learningOutcomes;return c.a.createElement("div",{className:"tileGroup"},c.a.createElement("h2",null,t.title),c.a.createElement("div",{className:"tileWrapper"},r.sort((function(e,t){return e.position-t.position})).map((function(e){return c.a.createElement(C,{tile:e,tileEntries:n.filter((function(t){return t.tile_id===e.id})),discussions:s,student:a,submissions:o.filter((function(t){return n.filter((function(t){return t.tile_id===e.id})).map((function(e){return e.id})).includes(t.entry_id)})),userGrades:i.filter((function(t){return t.tile.id===e.id})),peerGrades:l.filter((function(t){return t.tileID===e.id})),learningOutcomes:u,key:e.id})}))))}}]),n}(o.Component)),I=n(303),N=n.n(I),G=n(41),A=n(35),T=n(950),M=n(951),P=n(344),R=(n(721),function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.submissions,n=e.tileEntries;return c.a.createElement("div",{id:"binaryEntries"},c.a.createElement(T.a,{gutter:[5,5]},t.map((function(e){var t="0"!==e.grade.slice(0,1),r=n.find((function(t){return t.id===e.entry_id}));return c.a.createElement(M.a,{key:e.entry_id,xs:12,md:8,lg:6},c.a.createElement("div",{className:"entry ".concat(t?"success":"fail")},c.a.createElement("h2",null,r?r.title:null),t?c.a.createElement("span",null,c.a.createElement(P.a,null)," Present"):c.a.createElement("span",null,"Absent")))}))))}}]),n}(o.Component)),D=n(73),L=n(977),F=n(357),U=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.tileEntry,n=e.submission;"string"===typeof n.meta?JSON.parse(n.meta||"{}"):n.meta;return c.a.createElement("div",{className:"tileEntry"},c.a.createElement("h2",null,t.title),c.a.createElement(F.a,{style:{margin:"5px 0"}}),c.a.createElement(k,{grade:n.grade}),!1)}}]),n}(o.Component),Y=n(304),z=(n(743),function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.tile,n=e.tileEntries,r=e.submissions;if(t.graph_view){var a={labels:r.map((function(e,t){var r,a=n.find((function(t){return t.id===e.entry_id}));return null!==(r=null===a||void 0===a?void 0:a.title)&&void 0!==r?r:"???"})),datasets:[{label:t.title+" grades",data:r.map((function(e){return e.grade})),fill:!1,backgroundColor:"rgba(75,192,192,1)"}]};return c.a.createElement("div",{id:"tileEntriesGraph",style:{minHeight:"60vh"}},c.a.createElement("div",null,c.a.createElement(Y.Bar,{options:{legend:{display:!1}},width:500,data:a})))}return c.a.createElement("div",{id:"tileEntriesList"},c.a.createElement(T.a,{gutter:[10,10]},n.map((function(e){var t=r.find((function(t){return t.entry_id===e.id}));return t?c.a.createElement(M.a,{key:e.id,xs:24,sm:12,md:8,lg:6,className:"entryCol"},c.a.createElement(U,{submission:t,tileEntry:e})):null}))))}}]),n}(o.Component)),B=(n(744),n(30)),W=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.predictions,r=t.tileEntries,a=B.b.getState().tiles,i=a.filter((function(e){return"BINARY"===e.content})).length+1,l=Object(p.a)(r);try{var o=function(){var t=e.value,n=a.find((function(e){return e.id===t.tile_id}));return n?"BINARY"===n.content?"continue":void(i+=1):"continue"};for(l.s();!(e=l.n()).done;)o()}catch(m){l.e(m)}finally{l.f()}var s=function(e){return Math.round(100*e)/100},u=Array.from(Array(i).keys()).map((function(e){return 5-4.5/i*e}));if(0===n.length)return c.a.createElement("div",{id:"gradePrediction"},c.a.createElement("h2",null,"No predictions available."),c.a.createElement("p",null,"Try again later when more grades are available."));var d=n.sort((function(e,t){return e.graded_components-t.graded_components}));return c.a.createElement("div",{id:"gradePrediction"},c.a.createElement("h3",null,"Your predicted grade is a ",c.a.createElement("strong",null,s(d[d.length-1].grade))),c.a.createElement(Y.Bar,{options:{legend:{display:!1},scales:{xAxes:[{id:"x",type:"category"}],yAxes:[{id:"y",type:"linear",position:"left",ticks:{beginAtZero:!0,min:0,max:10}}]}},width:500,data:function(e){var t=e.getContext("2d"),n=t.createLinearGradient(0,0,0,350);n.addColorStop(0,"#FFF"),n.addColorStop(1,"rgb(90, 50, 255)");var r=t.createLinearGradient(0,0,0,350);return r.addColorStop(1,"#FFF"),r.addColorStop(0,"rgb(90, 50, 255)"),{labels:d.map((function(e){return e.graded_components+" graded components"})),datasets:[{label:"Predicted grade",type:"line",backgroundColor:"rgb(90, 50, 255)",borderColor:"rgb(90, 50, 255)",hoverBorderColor:"rgb(90, 50, 255)",fill:!1,tension:0,data:d.map((function(e){return s(e.grade)})),yAxisID:"y",xAxisID:"x"},{label:"UpperConfidence",type:"line",backgroundColor:n,borderColor:"transparent",pointRadius:0,fill:0,tension:0,data:d.map((function(e,t){return e.grade+u[t+3]})),yAxisID:"y",xAxisID:"x"},{label:"LowerConfidence",type:"line",backgroundColor:r,borderColor:"transparent",pointRadius:0,fill:0,tension:0,data:d.map((function(e,t){return e.grade-u[t+3]})),yAxisID:"y",xAxisID:"x"}]}}}),c.a.createElement("p",null,"Grade predictions will grow more accurate as the course progresses."))}}]),n}(o.Component),H=(n(745),function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props.discussions;return c.a.createElement("div",{id:"discussionsList"},c.a.createElement(T.a,{gutter:[10,10]},e.map((function(e){return c.a.createElement(M.a,{key:e.id,xs:24,md:12,lg:8},c.a.createElement("div",{className:"discussion"},c.a.createElement("h2",null,e.title),c.a.createElement("small",null,e.posted_at),c.a.createElement(F.a,null),c.a.createElement("p",{dangerouslySetInnerHTML:{__html:e.message}})))}))))}}]),n}(o.Component)),V=n(697),q=n(976),J=(n(746),function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.learningOutcomes,n=e.tileEntries;return c.a.createElement("div",{id:"learningOutcomes"},c.a.createElement("div",{style:{margin:"0 auto",maxWidth:"400px",width:"100%"}},t.map((function(e,t){return c.a.createElement("div",{key:e.goal.id,style:{margin:"5px 0"}},c.a.createElement(V.a.Ribbon,{text:e.success?"Completed":"Not completed",color:e.success?"green":"red"},c.a.createElement(q.a,{title:"Goal ".concat(t),size:"small"},c.a.createElement("strong",null,e.goal.title),c.a.createElement("br",null),e.goal.requirements.map((function(e){var t=n.find((function(t){return t.id===e.entry_id}));return c.a.createElement("span",null,t?t.title:"???"," ",function(e){switch(e){case"lte":return"\u2264";case"gte":return"\u2265";default:return"="}}(e.expression)," ",e.value,c.a.createElement("br",null))})))))}))))}}]),n}(o.Component)),Z=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).content=function(){var t=e.props,n=t.tile,r=t.submissions,a=t.tileEntries,i=t.predictions,l=t.discussions,o=t.learningOutcomes;switch(n.content){case"BINARY":return c.a.createElement(R,{submissions:r.filter((function(e){return a.filter((function(e){return e.tile_id===n.id})).map((function(e){return e.id})).includes(e.entry_id)})),tileEntries:a.filter((function(e){return e.tile_id===n.id}))});case"ENTRIES":return"DISCUSSIONS"===n.type?c.a.createElement(H,{discussions:l,tile:n}):c.a.createElement(z,{submissions:r.filter((function(e){return a.filter((function(e){return e.tile_id===n.id})).map((function(e){return e.id})).includes(e.entry_id)})),tileEntries:a.filter((function(e){return e.tile_id===n.id})),discussions:l,tile:n});case"PREDICTION":return c.a.createElement(W,{tileEntries:a,predictions:i});case"LEARNING_OUTCOMES":return c.a.createElement(J,{learningOutcomes:o,tileEntries:a});default:return null}},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props.tile;return c.a.createElement("div",{style:{padding:20}},c.a.createElement(D.a,{type:"ghost",icon:c.a.createElement(L.a,null),onClick:function(){window.dispatchEvent(new CustomEvent("selectTile",{detail:void 0}))}},"Return to dashboard"),c.a.createElement("h1",{style:{margin:"10px 0"}},e.title),this.content())}}]),n}(o.Component),$=n(169),K=n(983),Q=n(984),X=n(6),ee=n(747),te=(n(291),function(e,t,n){var r=2*Math.PI/e.length,a=new Array(e.length).fill({x:0,y:0,tile:void 0}),i=new Array(e.length+1).fill("").reduce((function(i,l,o){if(o>e.length)return i;var c=t(n(e[o-1]),e[o-1].tile)*Math.sin(o*r),s=t(n(e[o-1]),e[o-1].tile)*Math.cos(o*r);return a[o-1]={x:c,y:s,tile:e[o-1].tile},i+="".concat(c||0,",").concat(s||0," ")}));return{points:a,pointString:i}}),ne=function(e,t){return e>1?"start":e<-.1?"end":"middle"},re=n(965),ae=n(763),ie=n(762),le=n(764),oe=(n(761),"#d9d9d9"),ce="#ff9933",se=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.tilesGradeSummary,n=e.peerGrades,r=50,a=75,i=75,l=50;return c.a.createElement("div",{id:"tileRadial"},c.a.createElement("h2",{style:{textAlign:"center"}},"What requires my attention?"),c.a.createElement("br",null),c.a.createElement("div",{style:{width:"100%"}},c.a.createElement(ee.SizeMe,{monitorWidth:!0,refreshMode:"throttle",refreshRate:40},(function(e){var o=e.size;if((o.width||0)<50||!o.width)return c.a.createElement("span",null,"Can't display radar");var s=o.width-a-i,u=o.width-r-l,d=Math.min(s,u)/2,p=(Object(re.a)().range([0,2*Math.PI]).domain([360,0]),function(e,r){var a=t.filter((function(e){return e.tile.id===r.id})),i=n.filter((function(e){return e.tileID===r.id}));return Object(re.a)({range:[0,d],domain:[0,"BINARY"===r.content?100:Math.max(10,Math.max.apply(Math,Object(m.a)(a.map((function(e){return e.average}))).concat(Object(m.a)(i.map((function(e){return e.avg}))))))]})(e)}),f=(function(e,t){Object(m.a)(new Array(e+1)).map((function(n,r){return{angle:r*(t/e)}}))}(t.length,360),new ie.a({x:0,y:0})),h=function(e,t){var n=2*Math.PI/e;return Object(m.a)(new Array(e)).map((function(e,r){return{x:t*Math.sin(r*n),y:t*Math.cos(r*n)}}))}(t.length,d),g=te(t,(function(e,t){return p(e,t)}),(function(e){return e.average})),v=te(Object(m.a)(t).map((function(e){var t,r=n.find((function(t){return t.tileID===e.tile.id}));return Object(X.a)(Object(X.a)({},e),{},{average:null!==(t=null===r||void 0===r?void 0:r.avg)&&void 0!==t?t:0})})),(function(e,t){return p(e,t)}),(function(e){return e.average}));return c.a.createElement("svg",{width:"".concat(100,"%"),height:"".concat(o.width||0,"px")},c.a.createElement("rect",{width:"".concat(o.width||0,"px"),height:"".concat(o.width||0,"px"),fill:"#FAF7E9",rx:14}),c.a.createElement(ae.a,{top:o.width/2-r,left:o.width/2},Object(m.a)(new Array(t.length)).map((function(e,t){return c.a.createElement(le.a,{key:"radar-line-".concat(t),from:f,to:h[t],stroke:oe})})),c.a.createElement("polygon",{opacity:1,points:v.pointString,fill:"rgba(255, 0, 0, 0.3)",fillOpacity:.3,stroke:"red",strokeWidth:1,style:{transition:"opacity .4s ease-in-out",zIndex:90}}),v.points.map((function(e,t){return c.a.createElement("circle",{key:"peer-point-".concat(t),cx:e.x,cy:e.y,r:2,opacity:1,fill:"red",style:{transition:"opacity .4s ease-in-out",zIndex:90},onClick:function(){window.dispatchEvent(new CustomEvent("selectTile",{detail:{tile:e.tile}}))}})})),h.map((function(e,n){return c.a.createElement(c.a.Fragment,{key:n},c.a.createElement(le.a,{key:"radar-line-".concat(n),from:0===n?h[h.length-1]:h[n-1],to:h[n],stroke:oe}),t[0===n?t.length-1:n-1].tile.title.split(" ").map((function(t,n){return c.a.createElement("text",{x:e.x>0?e.x+10:e.x-10,y:e.y>0?e.y+10+12*n:e.y-10-12*n,textAnchor:ne(e.x,e.y),style:{whiteSpace:"pre-wrap"},key:"$x:{x};j:".concat(n)},t)})))})),c.a.createElement("polygon",{points:g.pointString,fill:ce,fillOpacity:.3,stroke:ce,strokeWidth:1,style:{zIndex:100}}),g.points.map((function(e,t){return c.a.createElement("circle",{key:"radar-point-".concat(t),cx:String(e.x),cy:String(e.y),r:4,fill:"#f5810c",style:{zIndex:100},onClick:function(){window.dispatchEvent(new CustomEvent("selectTile",{detail:{tile:e.tile}}))}})}))),c.a.createElement("circle",{cy:(o.width||0)-20,cx:20,fill:ce,r:5}),c.a.createElement("text",{y:(o.width||0)-15,x:30},"You"),c.a.createElement("circle",{cy:(o.width||0)-20,cx:80,fill:"red",r:5}),c.a.createElement("text",{y:(o.width||0)-15,x:90},"Peers"))}))))}}]),n}(o.Component),ue=n(46),de=(n(765),n(92)),me=n(48),pe=n(981),fe=n(982),he=n(84),ge=Object(ue.b)((function(e){return{course:e.course,tiles:e.tiles}})),ve=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i)))._isMounted=!1,e.state={notifications:[]},e.loadNotifications=function(t){var n=t.student;n&&he.a.getNotifications(n.login_id).then((function(t){e._isMounted&&e.setState({notifications:t})}))},e._getTileTitle=function(t){var n,r;return null!==(n=null===(r=e.props.tiles.find((function(e){return e.id===t})))||void 0===r?void 0:r.title)&&void 0!==n?n:""},e}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.loadNotifications(this.props)}},{key:"componentWillReceiveProps",value:function(e,t){var n,r;(null===(n=e.student)||void 0===n?void 0:n.login_id)!==(null===(r=this.props.student)||void 0===r?void 0:r.login_id)&&this.loadNotifications(e)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.props,n=t.course,r=t.student,a=(t.tiles,this.state.notifications),i=a.filter((function(e){return"outperforming peers"===e.status})).sort((function(t,n){return e._getTileTitle(t.tile_id).localeCompare(e._getTileTitle(n.tile_id))})),l=a.filter((function(e){return"closing the gap"===e.status})).sort((function(t,n){return e._getTileTitle(t.tile_id).localeCompare(e._getTileTitle(n.tile_id))})),o=a.filter((function(e){return"more effort required"===e.status})).sort((function(t,n){return e._getTileTitle(t.tile_id).localeCompare(e._getTileTitle(n.tile_id))}));return c.a.createElement("div",{id:"userProfile"},c.a.createElement(T.a,null,c.a.createElement(M.a,{xs:24,style:{textAlign:"center"}},c.a.createElement(me.b,{to:"/goal-grade"},c.a.createElement(D.a,{size:"large",color:"primary"},"Goal Grade"))),c.a.createElement(M.a,{xs:24,md:8,lg:6},c.a.createElement("h3",null,r&&r.name),c.a.createElement("strong",null,n&&n.course_name)),c.a.createElement(M.a,{xs:24,md:0},c.a.createElement(F.a,null)),c.a.createElement(M.a,{xs:24,md:16,lg:18},i.length>0&&c.a.createElement("div",null,c.a.createElement(pe.a,null)," ","You are outperforming your peers in:",c.a.createElement("ul",{style:{boxSizing:"border-box",paddingLeft:30}},i.map((function(t,n){return c.a.createElement("li",{key:n},e._getTileTitle(t.tile_id))})))),l.length>0&&c.a.createElement("div",null,c.a.createElement(fe.a,null)," ","You are closing the gap to your peers in:",c.a.createElement("ul",{style:{boxSizing:"border-box",paddingLeft:30}},l.map((function(t,n){return c.a.createElement("li",{key:n},e._getTileTitle(t.tile_id))})))),o.length>0&&c.a.createElement("div",null,c.a.createElement(_.a,null)," ","You have to put more effort in:",c.a.createElement("ul",{style:{boxSizing:"border-box",paddingLeft:30}},o.map((function(t){return c.a.createElement("li",null,e._getTileTitle(t.tile_id))})))),c.a.createElement("div",{style:{textAlign:"right"}},c.a.createElement(me.b,{to:"/consent"},"Informed Consent")))),c.a.createElement("br",null),c.a.createElement("div",{style:{textAlign:"center"}},c.a.createElement("small",null,"IGuideME is a product by the University of Amsterdam.")))}}]),n}(o.Component),Ee=ge(ve),be=n(291),ye={loadPredictions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"self";return de.a.loadPredictions(e)}},Oe=Object(ue.b)((function(e){return{dashboardColumns:e.dashboardColumns,tiles:e.tiles,tileGroups:e.tileGroups,tileEntries:e.tileEntries,predictions:e.predictions}}),ye),je=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).state={tilesGradeSummary:[],peerGrades:[],userSubmissions:[],loaded:!0,displayTile:void 0,discussions:[],learningOutcomes:[],viewType:"radar"},e.setup=function(){var t=Object(f.a)(g.a.mark((function t(n){var r,a,i,l,o,c,s,u,d,f,h,v,E,b,y,O=arguments;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=O.length>1&&void 0!==O[1]?O[1]:[],a=n.tiles,i=n.student,l=n.tileEntries,o=n.predictions,i){t.next=4;break}return t.abrupt("return");case 4:e.setState({loaded:!1}),c=[],s=[],u=Object(p.a)(a.filter((function(e){return"DISCUSSIONS"===e.type}))),t.prev=8,u.s();case 10:if((d=u.n()).done){t.next=18;break}return f=d.value,t.next=14,G.a.getDiscussions(f.id,i.login_id).then((function(e){return e}));case 14:h=t.sent,c.push.apply(c,Object(m.a)(h));case 16:t.next=10;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(8),u.e(t.t0);case 23:return t.prev=23,u.f(),t.finish(23);case 26:v=Object(p.a)(a.filter((function(e){return"LEARNING_OUTCOMES"===e.content}))),t.prev=27,v.s();case 29:if((E=v.n()).done){t.next=37;break}return b=E.value,t.next=33,G.a.getUserGoals(b.id,i.login_id).then((function(e){return e}));case 33:y=t.sent,s.push.apply(s,Object(m.a)(y));case 35:t.next=29;break;case 37:t.next=42;break;case 39:t.prev=39,t.t1=t.catch(27),v.e(t.t1);case 42:return t.prev=42,v.f(),t.finish(42);case 45:G.a.getSubmissions(i.login_id).then((function(t){var n=a.filter((function(e){return"PREDICTION"!==e.content&&"LEARNING_OUTCOMES"!==e.content&&"DISCUSSIONS"!==e.type})).map((function(e){return{tile:e,average:"binary"===e.content.toLowerCase()?t.filter((function(t){return l.filter((function(n){return n.tile_id===e.id&&parseFloat(t.grade)>.1})).map((function(e){return e.id})).includes(t.entry_id)})).length/t.filter((function(t){return l.filter((function(t){return t.tile_id===e.id})).map((function(e){return e.id})).includes(t.entry_id)})).length*100:be.mean(t.filter((function(t){return l.filter((function(t){return t.tile_id===e.id})).map((function(e){return e.id})).includes(t.entry_id)})).map((function(e){return parseFloat(e.grade)})))}}));if(a.filter((function(e){return"PREDICTION"===e.content})).length>0){var u=(r.length>0?r:o).sort((function(e,t){return t.graded_components-e.graded_components}));n.push({tile:a.find((function(e){return"PREDICTION"==e.content})),average:u.length>0?u[0].grade:0})}e.setState({discussions:c,learningOutcomes:s,tilesGradeSummary:n,userSubmissions:t},(function(){G.a.getPeerResults(i.login_id).then((function(t){return e.setState({peerGrades:t,loaded:!0})})).catch((function(){return e.setState({loaded:!0})}))}))}));case 46:case"end":return t.stop()}}),t,null,[[8,20,23,26],[27,39,42,45]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("selectTile",(function(t){if(t.detail){var n=t.detail;e.setState({displayTile:n})}else e.setState({displayTile:void 0})})),this.setup(this.props)}},{key:"componentWillReceiveProps",value:function(e,t){var n,r,a=this;(null===(n=e.student)||void 0===n?void 0:n.login_id)!==(null===(r=this.props.student)||void 0===r?void 0:r.login_id)&&e.student&&this.props.loadPredictions(e.student.login_id).then((function(t){var n=t.payload;a.setup(e,n)})),e.predictions.length!==this.props.predictions.length&&this.setup(e)}},{key:"render",value:function(){var e=this,t=this.state,n=t.loaded,r=t.displayTile,a=t.viewType,i=t.tilesGradeSummary,l=t.peerGrades,o=t.userSubmissions,s=t.discussions,u=t.learningOutcomes,d=this.props,m=d.tiles,p=d.tileGroups,f=d.dashboardColumns,h=d.tileEntries,g=d.student,v=d.predictions;return n&&g?r?c.a.createElement(Z,{tile:r.tile,tileEntries:h,discussions:s,predictions:v,submissions:o,learningOutcomes:u}):c.a.createElement("div",{id:"studentDashboard"},c.a.createElement($.a.Group,{value:a,buttonStyle:"solid",onChange:function(t){return e.setState({viewType:t.target.value})}},c.a.createElement($.a.Button,{value:"radar"},c.a.createElement(K.a,null)," Radar"),c.a.createElement($.a.Button,{value:"grid"},c.a.createElement(Q.a,null)," Grid")),"grid"===a?c.a.createElement(N.a,null,c.a.createElement("div",null,f.map((function(e){return c.a.createElement("div",{className:"column ".concat(e.container_width),key:e.id},p.filter((function(t){return t.column_id===e.id})).sort((function(e,t){return e.position-t.position})).map((function(e){return c.a.createElement(S,{tileGroup:e,tiles:m.filter((function(t){return t.group_id===e.id})),discussions:s,tileEntries:h.filter((function(t){return m.filter((function(t){return t.group_id===e.id})).map((function(e){return e.id})).includes(t.tile_id)})),student:g,tilesGradeSummary:i.filter((function(t){return t.tile.group_id===e.id})),peerGrades:l,submissions:o,learningOutcomes:u,key:e.id})})))})))):c.a.createElement(se,{tiles:m,tileEntries:h,student:g,tilesGradeSummary:i,peerGrades:l}),c.a.createElement(Ee,{student:this.props.student})):c.a.createElement(A.a,{small:!0})}}]),n}(o.Component),xe=Oe(je),we=n(946),_e=n(985),ke=(n(766),function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return this.props.student?c.a.createElement(xe,{student:this.props.student}):c.a.createElement("div",{id:"getStarted"},c.a.createElement(we.a,{icon:c.a.createElement(_e.a,null),title:c.a.createElement("div",null,c.a.createElement("h2",null,"Pick a student to start!"),c.a.createElement("h1",{id:"brand"},"IGuideME"))}))}}]),n}(o.Component)),Ce=n(36),Se=n(14),Ie=Object(ue.b)((function(e){return{user:e.user,predictions:e.predictions}})),Ne=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).state={student:null,goalGrade:void 0},e}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.isAdmin?this.setState({goalGrade:10}):(Ce.a.getUser().then((function(t){return e.setState({student:t})})),Ce.a.getGoalGrade().then((function(t){return e.setState({goalGrade:t})})))}},{key:"render",value:function(){var e=this,t=this.props.isAdmin,n=this.state,r=n.student,a=n.goalGrade;return void 0===a?c.a.createElement(A.a,null):-1===a?c.a.createElement(Se.a,{to:"goal-grade"}):c.a.createElement("div",{id:"app"},t&&c.a.createElement(d.a,{studentPickView:!0,setStudent:function(t){e.setState({student:t},(function(){return window.dispatchEvent(new CustomEvent("selectTile",{detail:void 0}))}))}}),t?c.a.createElement(ke,{student:r}):null===r?c.a.createElement("h1",null,"Your account has not yet been processed, try again tomorrow!"):c.a.createElement(xe,{student:r||void 0}))}}]),n}(o.Component);t.default=Object(s.a)(Object(u.a)(Ie(Ne)))}}]);
//# sourceMappingURL=17.77d60505.chunk.js.map