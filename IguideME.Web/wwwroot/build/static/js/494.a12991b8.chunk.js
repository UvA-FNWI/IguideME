"use strict";(self.webpackChunkiguideme=self.webpackChunkiguideme||[]).push([[494],{1699:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(15671),i=n(43144),s=n(60136),a=n(95212),o=n(68438),l=n(5674),d=n(68865),u=n(30767),c=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,null,[{key:"getStudents",value:function(){return(0,o.f)()?(0,u.g)(d.wZ):this.client.get("students").then((function(e){return e.data}))}},{key:"getConsents",value:function(){return(0,o.f)()?(0,u.g)(d.nj):this.client.get("consents").then((function(e){return e.data}))}},{key:"getGoalgrades",value:function(){return(0,o.f)()?(0,u.g)(d.sU):this.client.get("goal-grades").then((function(e){return e.data}))}}]),n}(l.Z)},87494:function(e,t,n){n.r(t),n.d(t,{default:function(){return xe}});var r=n(15671),i=n(43144),s=n(60136),a=n(95212),o=n(72791),l=n(98284),d=n(72014),u=n(49109),c=n(74165),p=n(37762),h=n(15861),f=n(28817),g=n(83099),v=n(80184),x=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props.peerGrades,t=function(e){return Math.round(100*e)/100};return(0,v.jsxs)("div",{className:"peerComparison",children:[(0,v.jsx)("span",{className:"title",children:"Peer Comparison"}),e?(0,v.jsxs)("div",{className:"distribution",children:[(0,v.jsxs)("div",{className:"min",children:[(0,v.jsx)("small",{children:"min."}),(0,v.jsx)("br",{}),t(e.min)]}),(0,v.jsxs)("div",{className:"avg",children:[(0,v.jsx)("small",{children:"avg."}),(0,v.jsx)("br",{}),t(e.avg)]}),(0,v.jsxs)("div",{className:"max",children:[(0,v.jsx)("small",{children:"max."}),(0,v.jsx)("br",{}),t(e.max)]})]}):(0,v.jsx)("p",{children:"Not available"})]})}}]),n}(o.Component),m=n(60793),j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=e.map((function(e){return e.average}));return 0===n.length?null:Math.round(m.mean(n)*Math.pow(10,t))/Math.pow(10,t)},y=function(e,t,n){return"BINARY"===e.content?n.length>0?Math.round(n.filter((function(e){return parseFloat(e.grade)>.8})).length/t.length*100):0:Math.round(n.length/t.length*100)},Z=n(83373),b=n(27804),C=n(90398),k=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={loading:!0,passed:!1},e.setup=function(){var t=e.props.grade;e.setState({loading:!1,passed:parseFloat(t)>=5.5})},e}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){this.setup()}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.passed,r=this.props.grade;return(0,v.jsx)("div",{className:"gradeStatistic",children:(0,v.jsx)(Z.Z,{title:"Grade",value:r,loading:t,prefix:n?(0,v.jsx)(b.Z,{className:"pass"}):(0,v.jsx)(C.Z,{className:"fail"})})})}}]),n}(o.Component),S=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={loaded:!1},e.getHeader=function(){var t=e.props,n=t.tile,r=t.tileEntries,i=t.submissions,s=t.userGrades,a=t.discussions,o=t.learningOutcomes,l=j(s);if("DISCUSSIONS"===n.type)return(0,v.jsxs)("span",{style:{textAlign:"center"},children:[(0,v.jsx)("strong",{children:a.length})," discussion",1!==a.length&&"s"]});switch(n.content){case"LEARNING_OUTCOMES":var d=o.filter((function(e){return e.success})).length;return(0,v.jsxs)("span",{style:{textAlign:"center"},children:[(0,v.jsxs)("strong",{children:[d,(0,v.jsxs)("small",{children:["/",o.length]})]})," completed"]});case"PREDICTION":return(0,v.jsx)(k,{grade:l?l.toString():"-"});case"BINARY":return(0,v.jsxs)(v.Fragment,{children:[!!l&&(0,v.jsx)(f.Z,{percent:y(n,r,i)}),(0,v.jsx)(k,{grade:l?(10*l).toString():"-"})]});case"ENTRIES":return(0,v.jsxs)(v.Fragment,{children:[!!l&&(0,v.jsx)(f.Z,{percent:y(n,r,i)}),(0,v.jsx)(k,{grade:l?l.toString():"-"})]});default:return null}},e}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.tile,n=e.peerGrades,r=e.userGrades;return(0,v.jsx)("div",{className:"tile",onClick:function(){window.dispatchEvent(new CustomEvent("selectTile",{detail:{tile:t,userGrades:r}}))},children:(0,v.jsxs)("div",{className:"wrapper",children:[(0,v.jsxs)("div",{className:"content",children:[(0,v.jsx)("h2",{children:t.title}),(0,v.jsx)(g.Z,{direction:"vertical",style:{width:"100%"},children:this.getHeader()})]}),(0,v.jsx)(x,{peerGrades:n.find((function(e){return e.tileID===t.id}))})]})})}}]),n}(o.Component),w=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.tileGroup,n=e.tileEntries,r=e.tiles,i=e.student,s=e.tilesGradeSummary,a=e.peerGrades,o=e.submissions,l=e.discussions,d=e.learningOutcomes;return(0,v.jsxs)("div",{className:"tileGroup",children:[(0,v.jsx)("h2",{children:t.title}),(0,v.jsx)("div",{className:"tileWrapper",children:r.sort((function(e,t){return e.position-t.position})).map((function(e){return(0,v.jsx)(S,{tile:e,tileEntries:n.filter((function(t){return t.tile_id===e.id})),discussions:l,student:i,submissions:o.get(e.id),userGrades:s.filter((function(t){return t.tile.id===e.id})),peerGrades:a.filter((function(t){return t.tileID===e.id})),learningOutcomes:d},e.id)}))})]})}}]),n}(o.Component),N=n(17350),G=n(86916),_=n(95909),E=n(58686),A=n(19603),I=n(67575),P=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.submissions,n=e.tileEntries;return(0,v.jsx)("div",{id:"binaryEntries",children:(0,v.jsx)(E.Z,{gutter:[5,5],children:t.map((function(e){var t="0"!==e.grade.slice(0,1),r=n.find((function(t){return t.id===e.entry_id}));return(0,v.jsx)(A.Z,{xs:12,md:8,lg:6,children:(0,v.jsxs)("div",{className:"entry ".concat(t?"success":"fail"),children:[(0,v.jsx)("h2",{children:r?r.title:null}),t?(0,v.jsxs)("span",{children:[(0,v.jsx)(I.Z,{})," Present"]}):(0,v.jsx)("span",{children:"Absent"})]})},e.entry_id)}))})})}}]),n}(o.Component),O=n(87309),T=n(99372),M=n(91333),D=n(32788),R=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.tileEntry,n=e.submission,r="string"===typeof n.meta?JSON.parse(n.meta||"{}"):n.meta||{};return(0,v.jsxs)("div",{className:"tileEntry",children:[(0,v.jsx)("h2",{children:t.title}),(0,v.jsx)(M.Z,{style:{margin:"5px 0"}}),(0,v.jsx)(k,{grade:n.grade}),Object.keys(r).length>0&&(0,v.jsx)("div",{children:(0,v.jsx)(D.Z,{dataSource:Object.keys(r).map((function(e,t){return{key:t,label:e,value:r[e]}})),columns:[{title:"Key",dataIndex:"label",key:"label",width:"40%",ellipsis:!0},{title:"Value",dataIndex:"value",key:"value"}]})})]})}}]),n}(o.Component),L=n(28353),U=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.tile,n=e.tileEntries,r=e.submissions;if(t.graph_view){var i={labels:r.map((function(e,t){var r,i=n.find((function(t){return t.id===e.entry_id}));return null!==(r=null===i||void 0===i?void 0:i.title)&&void 0!==r?r:"???"})),datasets:[{label:t.title+" grades",data:r.map((function(e){return e.grade})),fill:!1,backgroundColor:"rgba(75,192,192,1)"}]};return(0,v.jsx)("div",{id:"tileEntriesGraph",style:{minHeight:"60vh"},children:(0,v.jsx)("div",{children:(0,v.jsx)(L.$Q,{options:{legend:{display:!1}},width:500,data:i})})})}return(0,v.jsx)("div",{id:"tileEntriesList",children:(0,v.jsx)(E.Z,{gutter:[10,10],children:n.map((function(e){var t=r.find((function(t){return t.entry_id===e.id}));return t?(0,v.jsx)(A.Z,{xs:24,sm:12,md:8,lg:6,className:"entryCol",children:(0,v.jsx)(R,{submission:t,tileEntry:e})},e.id):null}))})})}}]),n}(o.Component),B=n(77533),Y=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e,t=this.props,n=t.predictions,r=t.tileEntries,i=B.h.getState().tiles,s=i.filter((function(e){return"BINARY"===e.content})).length+1,a=(0,p.Z)(r);try{var o=function(){var t=e.value,n=i.find((function(e){return e.id===t.tile_id}));return n?"BINARY"===n.content?"continue":void(s+=1):"continue"};for(a.s();!(e=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}var l=function(e){return Math.round(100*e)/100},d=Array.from(Array(s).keys()).map((function(e){return 5-4.5/s*e}));if(0===n.length)return(0,v.jsxs)("div",{id:"gradePrediction",children:[(0,v.jsx)("h2",{children:"No predictions available."}),(0,v.jsx)("p",{children:"Try again later when more grades are available."})]});return(0,v.jsxs)("div",{id:"gradePrediction",children:[(0,v.jsxs)("h3",{children:["Your predicted grade is a ",(0,v.jsx)("strong",{children:l(n[n.length-1].grade)})]}),(0,v.jsx)(L.$Q,{options:{legend:{display:!1},scales:{xAxes:[{id:"x",type:"category"}],yAxes:[{id:"y",type:"linear",position:"left",ticks:{beginAtZero:!0,min:0,max:10}}]}},width:500,data:function(e){var t=e.getContext("2d"),r=t.createLinearGradient(0,0,0,350);r.addColorStop(0,"#FFF"),r.addColorStop(1,"rgb(90, 50, 255)");var i=t.createLinearGradient(0,0,0,350);return i.addColorStop(1,"#FFF"),i.addColorStop(0,"rgb(90, 50, 255)"),{labels:n.map((function(e){return e.date})),datasets:[{label:"Predicted grade",type:"line",backgroundColor:"rgb(90, 50, 255)",borderColor:"rgb(90, 50, 255)",hoverBorderColor:"rgb(90, 50, 255)",fill:!1,tension:0,data:n.map((function(e){return l(e.grade)})),yAxisID:"y",xAxisID:"x"},{label:"UpperConfidence",type:"line",backgroundColor:r,borderColor:"transparent",pointRadius:0,fill:0,tension:0,data:n.map((function(e,t){return e.grade+d[t+3]})),yAxisID:"y",xAxisID:"x"},{label:"LowerConfidence",type:"line",backgroundColor:i,borderColor:"transparent",pointRadius:0,fill:0,tension:0,data:n.map((function(e,t){return e.grade-d[t+3]})),yAxisID:"y",xAxisID:"x"}]}}}),(0,v.jsx)("p",{children:"Grade predictions will grow more accurate as the course progresses."})]})}}]),n}(o.Component),F=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props.discussions;return(0,v.jsx)("div",{id:"discussionsList",children:(0,v.jsx)(E.Z,{gutter:[10,10],children:e.map((function(e){return(0,v.jsx)(A.Z,{xs:24,md:12,lg:8,children:(0,v.jsxs)("div",{className:"discussion",children:[(0,v.jsx)("h2",{children:e.title}),(0,v.jsx)("small",{children:e.posted_at}),(0,v.jsx)(M.Z,{}),(0,v.jsx)("p",{dangerouslySetInnerHTML:{__html:e.message}})]})},e.id)}))})})}}]),n}(o.Component),W=n(75594),V=n(65509),$=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.learningOutcomes,n=e.tileEntries,r=function(e){switch(e){case"lte":return"\u2264";case"gte":return"\u2265";default:return"="}};return(0,v.jsx)("div",{id:"learningOutcomes",children:(0,v.jsx)("div",{style:{margin:"0 auto",maxWidth:"400px",width:"100%"},children:t.map((function(e,t){return(0,v.jsx)("div",{style:{margin:"5px 0"},children:(0,v.jsx)(W.Z.Ribbon,{text:e.success?"Completed":"Not completed",color:e.success?"green":"red",children:(0,v.jsxs)(V.Z,{title:"Goal ".concat(t),size:"small",children:[(0,v.jsx)("strong",{children:e.goal.title}),(0,v.jsx)("br",{}),e.goal.requirements.map((function(e){var t=n.find((function(t){return t.id===e.entry_id}));return(0,v.jsxs)("span",{children:[t?t.title:"???"," ",r(e.expression)," ",e.value,(0,v.jsx)("br",{})]})}))]})})},e.goal.id)}))})})}}]),n}(o.Component),z=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).content=function(){var t=e.props,n=t.tile,r=t.submissions,i=t.tileEntries,s=t.predictions,a=t.discussions,o=t.learningOutcomes;switch(n.content){case"BINARY":return(0,v.jsx)(P,{submissions:r,tileEntries:i.filter((function(e){return e.tile_id===n.id}))});case"ENTRIES":return"DISCUSSIONS"===n.type?(0,v.jsx)(F,{discussions:a,tile:n}):(0,v.jsx)(U,{submissions:r,tileEntries:i.filter((function(e){return e.tile_id===n.id})),discussions:a,tile:n});case"PREDICTION":return(0,v.jsx)(Y,{tileEntries:i,predictions:s});case"LEARNING_OUTCOMES":return(0,v.jsx)($,{learningOutcomes:o,tileEntries:i});default:return null}},e}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props.tile;return(0,v.jsxs)("div",{style:{padding:20},children:[(0,v.jsx)(O.Z,{type:"ghost",icon:(0,v.jsx)(T.Z,{}),onClick:function(){window.dispatchEvent(new CustomEvent("selectTile",{detail:void 0}))},children:"Return to dashboard"}),(0,v.jsx)("h1",{style:{margin:"10px 0"},children:e.title}),this.content()]})}}]),n}(o.Component),H=n(50881),q=n(78622),Q=n(68961),J=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).bar_options={maintainAspectRatio:!0,legend:{display:!0},scales:{xAxes:[{gridLines:{display:!1},scaleLabel:{display:!1},ticks:{display:!1},stacked:!1}],yAxes:[{barPercentage:.95,categoryPercentage:.95,gridLines:{display:!1},scaleLabel:{display:!1},stacked:!1}]}},e}return(0,i.Z)(n,[{key:"createBarData",value:function(e,t,n,r,i){for(var s=new Map,a=0;a<e.length;a++){var o=0;"LEARNING_OUTCOMES"===e[a].content?o=i.filter((function(e){return e.success})).length:"DISCUSSIONS"===e[a].type&&(o=r.length),s.set(e[a].id,{title:e[a].title,grade:o,peergrade:0,max:10})}for(var l=0;l<t.length;l++){var d=t[l].average,u=s.get(t[l].tile.id);"BINARY"===t[l].tile.content&&(u.max=100),d=10*d/u.max,u.grade=d}for(var c=0;c<n.length;c++){var p=n[c].avg,h=s.get(n[c].tileID);p=10*p/h.max,h.peergrade=p}var f=[],g=[],v=[];return s.forEach((function(e){f.push(e.title),g.push(e.grade),v.push(e.peergrade)})),{labels:f,datasets:[{label:"You",backgroundColor:"rgba(47,44,232, 0.5)",borderColor:"rgba(0,0,255, 1)",borderWidth:2,data:g,skipNull:!0},{label:"Peers",backgroundColor:"rgba(255, 50, 50, .5)",borderColor:"rgba(255,0,0, 1)",borderWidth:2,data:v,skipNull:!0}]}}},{key:"render",value:function(){var e=this.props,t=e.tiles,n=e.tilesGradeSummary,r=e.peerGrades,i=e.discussions,s=e.learningOutcomes;return(0,v.jsx)("div",{children:(0,v.jsx)(L.n4,{height:300,data:this.createBarData(t,n,r,i,s),options:this.bar_options})})}}]),n}(o.Component),K=n(60364),X=n(23673),ee=n(91523),te=n(12740),ne=n(19503),re=(0,K.$j)((function(e){return{course:e.course,tiles:e.tiles}})),ie=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s)))._isMounted=!1,e.state={notifications:[]},e.loadNotifications=function(t){var n=t.student;n&&te.Z.getNotifications(n.login_id).then((function(t){e._isMounted&&e.setState({notifications:t})}))},e}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.loadNotifications(this.props)}},{key:"componentWillReceiveProps",value:function(e,t){var n,r;(null===(n=e.student)||void 0===n?void 0:n.login_id)!==(null===(r=this.props.student)||void 0===r?void 0:r.login_id)&&this.loadNotifications(e)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this.props,t=e.course,n=e.student,r=e.tiles,i=this.state.notifications,s=i.filter((function(e){return"outperforming peers"===e.status})),a=i.filter((function(e){return"closing the gap"===e.status})),o=i.filter((function(e){return"more effort required"===e.status}));return(0,v.jsxs)("div",{id:"userProfile",children:[(0,v.jsxs)(E.Z,{children:[(0,v.jsx)(A.Z,{xs:24,style:{textAlign:"center"},children:(0,v.jsx)(ee.rU,{to:"/goal-grade",children:(0,v.jsx)(O.Z,{size:"large",color:"primary",children:"Goal Grade"})})}),(0,v.jsxs)(A.Z,{xs:24,md:8,lg:6,children:[(0,v.jsx)("h3",{children:n&&n.name}),(0,v.jsx)("strong",{children:t&&t.course_name})]}),(0,v.jsx)(A.Z,{xs:24,md:0,children:(0,v.jsx)(M.Z,{})}),(0,v.jsxs)(A.Z,{xs:24,md:16,lg:18,children:[(0,v.jsx)(ne.Z,{outperforming:s,closing:a,moreEffort:o,tiles:r}),(0,v.jsx)("div",{style:{textAlign:"right"},children:(0,v.jsx)(ee.rU,{to:"/consent",children:"Informed Consent"})})]})]}),(0,v.jsx)("br",{}),(0,v.jsx)("div",{style:{textAlign:"center"},children:(0,v.jsx)("small",{children:"IGuideME is a product by the University of Amsterdam."})})]})}}]),n}(o.Component),se=re(ie),ae={loadPredictions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"self";return X.A.loadPredictions(e)}},oe=(0,K.$j)((function(e){return{dashboardColumns:e.dashboardColumns,tiles:e.tiles.filter((function(e){return e.visible})),tileGroups:e.tileGroups,tileEntries:e.tileEntries,predictions:e.predictions}}),ae),le=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={tilesGradeSummary:[],peerGrades:[],userSubmissions:new Map,loaded:!0,displayTile:null,discussions:[],learningOutcomes:[],viewType:"bar",predictions:[]},e.setup=function(){var t=(0,h.Z)((0,c.Z)().mark((function t(n){var r,i,s,a,o,l,d,u,h,f,g,v,x,m,j,y,Z,b,C=arguments;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(C.length>1&&void 0!==C[1]?C[1]:[],r=n.tiles,i=n.student){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,te.Z.getPredictions(i.login_id);case 6:s=t.sent,e.setState({loaded:!1}),a=new Map,o=[],l=[],d=[],h=(0,p.Z)(r),t.prev=13,h.s();case 15:if((f=h.n()).done){t.next=39;break}if("LEARNING_OUTCOMES"!==(g=f.value).content){t.next=20;break}return l.push(G.Z.getUserGoals(g.id,i.login_id)),t.abrupt("continue",37);case 20:if("DISCUSSIONS"!==g.type){t.next=23;break}return o.push(G.Z.getDiscussions(g.id,i.login_id)),t.abrupt("continue",37);case 23:if("PREDICTION"!==g.content){t.next=26;break}return d.push({tile:g,average:s.length>0?s[0].grade:0}),t.abrupt("continue",37);case 26:return t.t0=a,t.t1=g.id,t.next=30,G.Z.getTileSubmissions(g.id,i.login_id);case 30:t.t2=t.sent,t.t0.set.call(t.t0,t.t1,t.t2),v=0,x=0,m=(0,p.Z)(a.get(g.id));try{for(m.s();!(j=m.n()).done;)y=j.value,u=parseFloat(y.grade),v+="BINARY"===g.content?Number(0!==u):u,x++}catch(c){m.e(c)}finally{m.f()}v=x?v/x:v,d.push({tile:g,average:v});case 37:t.next=15;break;case 39:t.next=44;break;case 41:t.prev=41,t.t3=t.catch(13),h.e(t.t3);case 44:return t.prev=44,h.f(),t.finish(44);case 47:return t.next=49,Promise.all(o);case 49:return Z=t.sent.flat(),t.next=52,Promise.all(l);case 52:b=t.sent.flat(),e.setState({discussions:Z,learningOutcomes:b,tilesGradeSummary:d,userSubmissions:a,predictions:s},(function(){G.Z.getPeerResults(i.login_id).then((function(t){return e.setState({peerGrades:t,loaded:!0})})).catch((function(){return e.setState({loaded:!0})}))}));case 54:case"end":return t.stop()}}),t,null,[[13,41,44,47]])})));return function(e){return t.apply(this,arguments)}}(),e}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("selectTile",(function(t){e.setState({displayTile:null===t||void 0===t?void 0:t.detail})})),this.setup(this.props)}},{key:"componentWillReceiveProps",value:function(e,t){var n,r;e.student&&(null===(n=e.student)||void 0===n?void 0:n.login_id)!==(null===(r=this.props.student)||void 0===r?void 0:r.login_id)&&this.setup(e)}},{key:"render",value:function(){var e=this,t=this.state,n=t.loaded,r=t.displayTile,i=t.viewType,s=t.tilesGradeSummary,a=t.peerGrades,o=t.userSubmissions,l=t.discussions,d=t.learningOutcomes,u=t.predictions,c=this.props,p=c.tiles,h=c.tileGroups,f=c.dashboardColumns,g=c.tileEntries,x=c.student;return console.log("tiles",p),console.log("Predictions",u),n&&x?r?(0,v.jsx)(z,{tile:r.tile,tileEntries:g,discussions:l,predictions:u,submissions:o.get(r.tile.id),learningOutcomes:d}):(0,v.jsxs)("div",{id:"studentDashboard",children:[(0,v.jsxs)(H.ZP.Group,{value:i,buttonStyle:"solid",onChange:function(t){return e.setState({viewType:t.target.value})},children:[(0,v.jsxs)(H.ZP.Button,{value:"bar",children:[(0,v.jsx)(q.Z,{})," Bar"]}),(0,v.jsxs)(H.ZP.Button,{value:"grid",children:[(0,v.jsx)(Q.Z,{})," Grid"]})]}),"grid"===i?(0,v.jsx)(N.Z,{children:(0,v.jsx)("div",{children:f.map((function(e){return(0,v.jsx)("div",{className:"column ".concat(e.container_width),children:h.filter((function(t){return t.column_id===e.id})).sort((function(e,t){return e.position-t.position})).map((function(e){return(0,v.jsx)(w,{tileGroup:e,tiles:p.filter((function(t){return t.group_id===e.id})),discussions:l,tileEntries:g.filter((function(t){return p.filter((function(t){return t.group_id===e.id})).map((function(e){return e.id})).includes(t.tile_id)})),student:x,tilesGradeSummary:s.filter((function(t){return t.tile.group_id===e.id})),peerGrades:a,submissions:o,learningOutcomes:d},e.id)}))},e.id)}))})}):(0,v.jsx)("div",{style:{padding:"0 8%"},children:(0,v.jsx)(J,{tiles:p,tilesGradeSummary:s,peerGrades:a,discussions:l,learningOutcomes:d})}),(0,v.jsx)(se,{student:this.props.student})]}):(0,v.jsx)(_.Z,{small:!0})}}]),n}(o.Component),de=oe(le),ue=n(77063),ce=n(81117),pe=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){return this.props.student?(0,v.jsx)(de,{student:this.props.student}):(0,v.jsx)("div",{id:"getStarted",children:(0,v.jsx)(ue.ZP,{icon:(0,v.jsx)(ce.Z,{}),title:(0,v.jsxs)("div",{children:[(0,v.jsx)("h2",{children:"Pick a student to start!"}),(0,v.jsx)("h1",{id:"brand",children:"IGuideME"})]})})})}}]),n}(o.Component),he=n(92607),fe=n(64880),ge=(0,K.$j)((function(e){return{user:e.user,predictions:e.predictions}})),ve=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={student:null,goalGrade:void 0},e}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.isAdmin?this.setState({goalGrade:10}):(he.Z.getUser().then((function(t){return e.setState({student:t})})),he.Z.getGoalGrade().then((function(t){return e.setState({goalGrade:t})})))}},{key:"render",value:function(){var e=this,t=this.props.isAdmin,n=this.state,r=n.student,i=n.goalGrade;return void 0===i?(0,v.jsx)(_.Z,{}):-1===i?(0,v.jsx)(fe.l_,{to:"goal-grade"}):(0,v.jsxs)("div",{id:"app",children:[t&&(0,v.jsx)(u.Z,{studentPickView:!0,setStudent:function(t){e.setState({student:t},(function(){return window.dispatchEvent(new CustomEvent("selectTile",{detail:void 0}))}))}}),t?(0,v.jsx)(pe,{student:r}):null===r?(0,v.jsx)("h1",{children:"Your account has not yet been processed, try again tomorrow!"}):(0,v.jsx)(de,{student:r||void 0})]})}}]),n}(o.Component),xe=(0,l._)((0,d.u)(ge(ve)))},19503:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(15671),i=n(43144),s=n(60136),a=n(95212),o=n(72791),l=n(68409),d=n(18341),u=n(90398),c=n(80184),p=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s)))._getTileTitle=function(t){var n,r;return null!==(n=null===(r=e.props.tiles.find((function(e){return e.id===t})))||void 0===r?void 0:r.title)&&void 0!==n?n:""},e}return(0,i.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.outperforming,r=t.closing,i=t.moreEffort;return(0,c.jsxs)("div",{className:"Notifications",children:[n.length>0&&(0,c.jsxs)("div",{children:[(0,c.jsx)(l.Z,{})," ","You are outperforming your peers in:",(0,c.jsx)("ul",{style:{boxSizing:"border-box",paddingLeft:30},children:n.map((function(t,n){return(0,c.jsx)("li",{children:e._getTileTitle(t.tile_id)},n)}))})]}),r.length>0&&(0,c.jsxs)("div",{children:[(0,c.jsx)(d.Z,{})," ","You are closing the gap to your peers in:",(0,c.jsx)("ul",{style:{boxSizing:"border-box",paddingLeft:30},children:r.map((function(t,n){return(0,c.jsx)("li",{children:e._getTileTitle(t.tile_id)},n)}))})]}),i.length>0&&(0,c.jsxs)("div",{children:[(0,c.jsx)(u.Z,{})," ","You have to put more effort in:",(0,c.jsx)("ul",{style:{boxSizing:"border-box",paddingLeft:30},children:i.map((function(t){return(0,c.jsx)("li",{children:e._getTileTitle(t.tile_id)})}))})]})]})}}]),n}(o.Component)},49109:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(1413),i=n(15671),s=n(43144),a=n(60136),o=n(95212),l=n(72791),d=n(18622),u=n(35945),c=n(87309),p=n(14057),h=n(91523),f=n(1699),g=n(68438),v=n(60364),x=n(80184),m=(0,v.$j)((function(e){return{course:e.course,user:e.user}})),j=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={loaded:!1,students:[]},e}return(0,s.Z)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.studentPickView&&f.Z.getStudents().then((function(t){return e.setState({students:t,loaded:!0})})),this.setState({loaded:!0})}},{key:"renderInner",value:function(){var e=this;if(this.props.studentPickView){var t=this.state,n=t.students,i=t.loaded;return(0,x.jsx)(d.ZP,{id:"studentPicker",isLoading:!i,options:n.sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(e){return{label:e.name,value:e.login_id}})),placeholder:"Choose a student",onChange:function(t){return e.props.setStudent(t?n.find((function(e){return e.login_id===t.value})):null)},isClearable:!0,styles:{control:function(e,t){return(0,r.Z)((0,r.Z)({},e),{},{backgroundColor:"transparent",color:"white",border:"1px solid white"})},singleValue:function(e,t){return(0,r.Z)((0,r.Z)({},e),{},{color:"white"})}}})}return(0,x.jsx)("div",{id:"inner",children:(0,x.jsx)("h2",{children:this.props.course?this.props.course.course_name:"Loading course..."})})}},{key:"render",value:function(){return(0,x.jsxs)(l.Fragment,{children:[(0,x.jsxs)("div",{id:"adminHeader",children:[this.props.studentPickView?(0,x.jsx)(h.rU,{to:"/admin",style:{float:"right"},children:(0,x.jsx)("h3",{children:"Admin Panel"})}):(0,x.jsx)("div",{style:{float:"right",padding:20},children:(0,x.jsx)(u.Z,{title:"Reload data",children:(0,x.jsx)(c.Z,{id:"reload",shape:"circle",style:{backgroundColor:"rgba(255, 255, 255, 0.5)",color:"white"},icon:(0,x.jsx)(p.Z,{})})})}),(0,x.jsxs)("div",{id:"navbarContent",children:[(0,x.jsx)("div",{id:"brand",children:(0,x.jsx)(h.rU,{to:"/",children:(0,x.jsx)("h1",{children:"IGuideME"})})}),this.renderInner()]})]}),(0,g.f)()&&(0,x.jsxs)("div",{id:"debugNotice",children:["Application is running in ",(0,x.jsx)("strong",{children:"demo"})," mode. Changes will not be saved!"]})]})}}]),n}(l.Component),y=m(j)}}]);
//# sourceMappingURL=494.a12991b8.chunk.js.map