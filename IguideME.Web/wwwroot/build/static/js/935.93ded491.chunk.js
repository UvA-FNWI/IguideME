"use strict";(self.webpackChunkiguideme=self.webpackChunkiguideme||[]).push([[935],{1699:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(15671),i=n(43144),s=n(60136),o=n(95212),a=n(68438),l=n(5674),d=n(68865),c=n(30767),u=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,null,[{key:"getStudents",value:function(){return(0,a.f)()?(0,c.g)(d.wZ):this.client.get("students").then((function(e){return e.data}))}},{key:"getConsents",value:function(){return(0,a.f)()?(0,c.g)(d.nj):this.client.get("consents").then((function(e){return e.data}))}},{key:"getGoalgrades",value:function(){return(0,a.f)()?(0,c.g)(d.sU):this.client.get("goal-grades").then((function(e){return e.data}))}}]),n}(l.Z)},4525:function(e,t,n){n.d(t,{Z:function(){return O}});var r=n(15671),i=n(43144),s=n(60136),o=n(95212),a=n(72791),l=n(72014),d=n(49109),c=n(64880),u=n(58686),h=n(19603),p=n(29529),f=n(78222),m=n(68961),x=n(55240),g=n(56200),v=n(68409),y=n(30836),Z=n(34633),j=n(6314),k=n(53660),S=n(9150),w=n(752),b=n(36090),_=n(91523),M=n(60364),C=n(80184),P=(0,M.$j)((function(e){return{user:e.user}})),T=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props.user;return(0,C.jsxs)("div",{id:"adminMenu",children:[(0,C.jsxs)("div",{id:"user",children:[(0,C.jsx)("h3",{children:e?e.name:"Loading profile..."}),(0,C.jsxs)("strong",{children:[(0,C.jsx)(p.Z,{})," Instructor"]})]}),(0,C.jsxs)(b.Z,{selectedKeys:[this.props.menuKey],children:[(0,C.jsx)(b.Z.Item,{icon:(0,C.jsx)(f.Z,{}),children:(0,C.jsx)(_.rU,{to:"/admin",children:"Datamart"})},"datamart"),(0,C.jsx)(b.Z.Item,{icon:(0,C.jsx)(m.Z,{}),children:(0,C.jsx)(_.rU,{to:"/admin/tiles",children:"Tiles"})},"tiles"),(0,C.jsx)(b.Z.Item,{icon:(0,C.jsx)(x.Z,{}),children:(0,C.jsx)(_.rU,{to:"/admin/dashboard",children:"Dashboard"})},"dashboard"),(0,C.jsx)(b.Z.Item,{icon:(0,C.jsx)(g.Z,{}),children:(0,C.jsx)(_.rU,{to:"/admin/student-overview",children:"Student Overview"})},"studentOverview"),(0,C.jsxs)(b.Z.SubMenu,{icon:(0,C.jsx)(v.Z,{}),title:"Grades",children:[(0,C.jsx)(b.Z.Item,{icon:(0,C.jsx)(y.Z,{}),children:(0,C.jsx)(_.rU,{to:"/admin/grade-predictor-old",children:"Old Predictor"})},"gradePredictorOld"),(0,C.jsx)(b.Z.Item,{icon:(0,C.jsx)(y.Z,{}),children:(0,C.jsx)(_.rU,{to:"/admin/grade-predictor",children:"Predictor"})},"gradePredictor"),(0,C.jsx)(b.Z.Item,{icon:(0,C.jsx)(Z.Z,{}),children:(0,C.jsx)(_.rU,{to:"/admin/grade-analyzer",children:"Analyzer"})},"gradeAnalyzer")]},"submenu"),(0,C.jsx)(b.Z.Item,{icon:(0,C.jsx)(j.Z,{}),children:(0,C.jsx)(_.rU,{to:"/admin/data-wizard",children:"Data Wizard"})},"dataWizard"),(0,C.jsx)(b.Z.Item,{icon:(0,C.jsx)(k.Z,{}),children:(0,C.jsx)(_.rU,{to:"/admin/analytics",children:"Analytics"})},"analytics"),(0,C.jsx)(b.Z.Item,{icon:(0,C.jsx)(S.Z,{}),children:(0,C.jsx)(_.rU,{to:"/admin/notification-centre",children:"Notification Centre"})},"notificationCentre"),(0,C.jsx)(b.Z.Item,{icon:(0,C.jsx)(w.Z,{}),children:(0,C.jsx)(_.rU,{to:"/admin/settings",children:"Settings"})},"settings")]})]})}}]),n}(a.Component),I=P(T),N=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.isAdmin,n=e.menuKey;return t?(0,C.jsxs)("div",{id:"admin",children:[(0,C.jsx)(d.Z,{}),(0,C.jsxs)(u.Z,{children:[(0,C.jsx)(h.Z,{xs:4,children:(0,C.jsx)(I,{menuKey:n})}),(0,C.jsx)(h.Z,{xs:20,id:"wrapper",className:"".concat("settings"!==n&&"noOverflow"),children:this.props.children})]})]}):(0,C.jsx)(c.l_,{to:"/"})}}]),n}(a.Component),O=(0,l.u)(N)},14935:function(e,t,n){n.r(t),n.d(t,{default:function(){return ve}});var r=n(15671),i=n(43144),s=n(60136),o=n(95212),a=n(72791),l=n(4525),d=n(91333),c=n(74165),u=n(15861),h=n(97673),p=n.n(h),f=n(58686),m=n(19603),x=n(90785),g=n(50419),v=n(80184),y=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={offset:-2},e}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.setState({offset:300})}),500)}},{key:"render",value:function(){var e=this.state.offset;return(0,v.jsx)("div",{id:"demoAnimation",children:(0,v.jsxs)("div",{id:"spreadsheet",children:[(0,v.jsx)("div",{id:"wallpaper"}),(0,v.jsxs)("svg",{width:400,height:300,children:[(0,v.jsx)("rect",{x:0,y:0,width:400,height:300,fill:"transparent"}),(0,v.jsx)("rect",{x:0,y:e,width:400,height:3,fill:"rgba(255, 0, 0, 0.75)"})]})]})})}}]),n}(a.Component),Z=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this;return(0,v.jsx)("div",{children:(0,v.jsxs)(f.Z,{children:[(0,v.jsxs)(m.Z,{xs:24,md:14,children:[(0,v.jsx)("h2",{children:"Step 1. Historic data"}),(0,v.jsx)(d.Z,{}),(0,v.jsxs)("p",{children:["To train the predictive models historic course data is required. If you do not have historic course data available you are unable to create a predictive model, be sure to save this year's data for next year! Please provide the data in a ",(0,v.jsx)("strong",{children:"CSV"})," format. The data must adhere to the simple principle that each column corresponds to a unique gradable component (i.e. a quiz or exam), and each row represents a student. There must be a column named ",(0,v.jsx)("i",{children:"final_grade"})," specifying the final grade of the student for the course."]}),(0,v.jsx)(x.Z,{message:"The models are trained on the data source from your local browser. This means that the data source will never be uploaded to our service. Only the computed model states will be stored by the application."}),(0,v.jsx)("div",{id:"dataSourceUpload",children:(0,v.jsxs)("label",{style:{height:"fit-content"},children:["Upload data source",(0,v.jsx)(p(),{inputId:"CSVReader",inputStyle:{display:"none"},onFileLoaded:function(t){if(!function(e){return e.every((function(e){var t=Object.keys(e).map((function(e){return e.toLowerCase()}));return["final_grade"].every((function(e){return t.includes(e)}))}))}(t))return g.ZP.error("Invalid data schema!");e.props.setData(t)},onError:function(){return g.ZP.error("Invalid data source!")},parserOptions:{header:!0,dynamicTyping:!0,skipEmptyLines:!0,transformHeader:function(e){return e.toLowerCase().replace(/\W/g,"_")}}})]})})]}),(0,v.jsx)(m.Z,{xs:0,md:10,children:(0,v.jsx)(y,{})})]})})}}]),n}(a.Component),j=n(44091),k=n(87309),S=[{title:"Upload source",content:"First-content"},{title:"Configure relationships",content:"Second-content"},{title:"Train models",content:"Last-content"},{title:"Done!",content:"Last-content"}],w=n(5647),b=n(93433),_=n(3422),M=n(75594),C=n(66818),P=n(60364),T=function(e,t){return e.filter((function(e){return"PREDICTION"!==e.content&&"LEARNING_OUTCOMES"!==e.content})).map((function(e){return function(e,t){return"BINARY"===e.content?{label:e.title,value:e.id}:{label:e.title,value:e.id,children:t.filter((function(t){return t.tile_id===e.id})).map((function(e){return{label:e.title,value:e.id}}))}}(e,t)}))},I=n(86916),N=(0,P.$j)((function(e){return{tiles:e.tiles,tileEntries:e.tileEntries}})),O=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={loading:!1,metaKeys:[]},e.loadMetaKeys=function(t){var n=t.registry;n&&n.entry_id&&e.setState({loading:!0},(function(){I.Z.getTileEntriesMetaKeys(n.entry_id).then((function(t){e.setState({metaKeys:t,loading:!1})}))}))},e.getValue=function(){var t=e.props.registry;if(t)return t.entry_id<0?[t.tile_id]:[t.tile_id,t.entry_id]},e.isValidKey=function(t){var n=e.props.data;return 0!==n.length&&n.filter((function(e){return e[t]})).every((function(e){return/^[1-9]\d{0,2}(\.\d{3})*(,\d+)?$/.test(e[t])}))},e}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){this.loadMetaKeys(this.props)}},{key:"componentWillReceiveProps",value:function(e,t){var n,r;(null===(n=e.registry)||void 0===n?void 0:n.entry_id)!==(null===(r=this.props.registry)||void 0===r?void 0:r.entry_id)&&this.loadMetaKeys(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.registry,r=t.tiles,i=t.tileEntries,s=t._key,o=this.state,a=o.loading,l=o.metaKeys;return(0,v.jsx)("div",{className:"relationship",children:(0,v.jsxs)(f.Z,{gutter:[10,20],children:[(0,v.jsxs)(m.Z,{xs:12,children:[(0,v.jsx)("span",{children:"Source key"}),(0,v.jsx)("h3",{children:(0,v.jsx)("strong",{children:s})})]}),(0,v.jsxs)(m.Z,{xs:12,children:[(0,v.jsx)("span",{children:"Tile Entry"}),(0,v.jsx)("br",{}),(0,v.jsx)(_.Z,{options:T(r,i),value:this.getValue(),disabled:!this.isValidKey(s),style:{width:"100%"},onChange:function(t,n){2===t.length?e.props.setEntry(s,t[0],t[1]):1===t.length&&e.props.setEntry(s,t[0],-1)},size:"large",placeholder:"Select tile entry"})]}),(0,v.jsxs)(m.Z,{xs:12,children:[(0,v.jsx)("span",{children:"Status"}),(0,v.jsx)("br",{}),(0,v.jsx)(M.Z,{status:this.isValidKey(s)?"success":"error",text:this.isValidKey(s)?"Data suitable for model":"Non-numeric data!"})]}),(0,v.jsxs)(m.Z,{xs:12,children:[(0,v.jsx)("span",{children:"Meta property"}),(0,v.jsx)("br",{}),(0,v.jsx)(C.Z,{disabled:null===n||void 0===n||!n.tile_id||"EXTERNAL_DATA"!==r.find((function(e){return e.id===n.tile_id})).type,style:{width:"100%"},defaultValue:n?n.meta_key:"grade",loading:a,value:n?n.meta_key:void 0,size:"large",onChange:function(t,r){n&&e.props.setMetaKey(null===n||void 0===n?void 0:n.source_key,null===n||void 0===n?void 0:n.entry_id,t)},options:[{value:"grade",label:"Grade (default)"}].concat((0,b.Z)(l.map((function(e){return{value:e,label:e}}))))})]})]})})}}]),n}(a.Component),A=N(O),D=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).getKeysFromSource=function(){var t=e.props.data,n=(0,w.Z)(Set,(0,b.Z)(t.map((function(e){return Object.keys(e)}))));return n.delete("final_grade"),Array.from(n).filter((function(e){return e.length>0}))},e.setEntry=function(t,n,r){var i=JSON.parse(JSON.stringify(e.props.registry)),s=i.findIndex((function(e){return e.source_key===t}));s>=0?(i[s].tile_id=n,i[s].entry_id=r,i[s].meta_key="grade",e.props.setRegistry(i)):e.props.setRegistry([].concat((0,b.Z)(i),[{tile_id:n,entry_id:r,source_key:t,meta_key:"grade"}]))},e.setMetaKey=function(t,n,r){var i=JSON.parse(JSON.stringify(e.props.registry)),s=i.findIndex((function(e){return e.source_key===t&&e.entry_id===n}));s>=0&&(i[s].meta_key=r,e.props.setRegistry(i))},e}return(0,i.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.registry,r=t.data;return(0,v.jsxs)("div",{id:"relationships",children:[(0,v.jsx)("h2",{children:"Step 2. Establish relationships"}),this.getKeysFromSource().sort().map((function(t){return(0,v.jsx)("div",{children:(0,v.jsx)(A,{registry:n.find((function(e){return e.source_key===t})),setEntry:e.setEntry,setMetaKey:e.setMetaKey,_key:t,data:r})})})),(0,v.jsx)(d.Z,{}),n.length<4&&(0,v.jsx)("div",{style:{padding:"10px 0"},children:(0,v.jsx)("strong",{children:"You must provide at least four components!"})}),(0,v.jsx)(k.Z,{onClick:this.props.nextStep,disabled:n.length<4,children:"Train models"})]})}}]),n}(a.Component),K=n(29439),E=n(37762),F=n(37083),U=n(78322),V=n(60793),L=function(e){for(var t=[],n=e.length,r=3;r<=n;r++){for(var i=[],s=0;s<r;s++)i[s]=s;for(var o=r-1;i[0]<n-r+1;){for(;o>0&&i[o]===n-r+o;)o--;for(t.push(JSON.parse(JSON.stringify(i.map((function(t){return e[t]}))))),i[o]++;o<r-1;)i[o+1]=i[o]+1,o++}}return t},z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=e.map((function(e){return e.slice(0,e.length-1)})),r=n,i=e.map((function(e){return e[e.length-1]})),s=Math.round((1-t)*e.length),o=r.slice(s,e.length),a=r.slice(0,s),l=i.slice(s,e.length),d=i.slice(0,s);return[a,o,d,l]},R=function(){var e=(0,u.Z)((0,c.Z)().mark((function e(t,n,r,i){var s,o,a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new U.Z(t,n.map((function(e){return[e]}))),o=[],r.forEach((function(e,t){o.push(Math.pow(s.predict(e)[0]-i[t],2))})),a=Math.round(1e3*V.mean(o))/1e3,e.abrupt("return",Promise.resolve({model:s,mse:a}));case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),J=function(e){return e.map((function(e){return e.entry_id>0?"".concat(e.tile_id,"-").concat(e.entry_id):e.tile_id})).sort().join("#")},q=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={isTraining:!1},e._getValueFromData=function(e,t){var n=t[e];return n?"number"==typeof n?n:parseFloat(n.replace(/,/,".")):NaN},e.trainModels=function(){e.setState({isTraining:!0},(0,u.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:setTimeout((0,u.Z)((0,c.Z)().mark((function t(){var n,r,i,s,o,a,l,d;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.props,r=n.registry,i=n.data,s=L(r),console.log("COMBINATIONS",s),console.log("registry",r),o=[],a=(0,E.Z)(s),t.prev=6,d=(0,c.Z)().mark((function t(){var n,r,s,a,d,u,h,p;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.value,r=i.map((function(t){return[].concat((0,b.Z)(n.map((function(n){return e._getValueFromData(n.source_key,t)}))),[e._getValueFromData("final_grade",t)])})).filter((function(e){return e.every((function(e){return!Number.isNaN(e)}))})),s=z(r),a=(0,K.Z)(s,4),d=a[0],u=a[1],h=a[2],p=a[3],t.next=5,R(d,h,u,p).then((function(e){var t=e.model,r=e.mse,i={id:-1,course_id:-1,entry_collection:J(n),mse:r,theta:[].concat((0,b.Z)(n.map((function(e,n){return{tile_id:e.tile_id,entry_id:e.entry_id,intercept:!1,meta_key:e.meta_key,value:t.weights[n][0]}}))),[{tile_id:null,entry_id:null,intercept:!0,meta_key:"grade",value:t.weights[t.weights.length-1][0]}])};o.push(i)}));case 5:case"end":return t.stop()}}),t)})),a.s();case 9:if((l=a.n()).done){t.next=13;break}return t.delegateYield(d(),"t0",11);case 11:t.next=9;break;case 13:t.next=18;break;case 15:t.prev=15,t.t1=t.catch(6),a.e(t.t1);case 18:return t.prev=18,a.f(),t.finish(18);case 21:e.props.setModels(o);case 22:case"end":return t.stop()}}),t,null,[[6,15,18,21]])}))),200);case 1:case"end":return t.stop()}}),t)}))))},e}return(0,i.Z)(n,[{key:"render",value:function(){var e=this,t=this.state.isTraining;return(0,v.jsxs)("div",{id:"trainModels",children:[(0,v.jsx)("h2",{children:"Step 3. Training the models"}),(0,v.jsx)(d.Z,{}),(0,v.jsx)(f.Z,{gutter:[10,10],children:(0,v.jsxs)(m.Z,{xs:24,children:[t&&(0,v.jsxs)("div",{style:{textAlign:"center",padding:"20px 0"},children:[(0,v.jsx)(F.Z,{}),(0,v.jsx)("h3",{children:"Training models..."})]}),!t&&(0,v.jsxs)("div",{style:{textAlign:"center",padding:"20px 0"},children:[(0,v.jsx)("div",{style:{background:"url(/assets/img/illustrations/train_models.svg)",marginBottom:30,height:200,width:"100%",backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat"}}),(0,v.jsx)(k.Z,{type:"primary",size:"large",onClick:function(){return e.trainModels()},children:"Start Training"})]})]})})]})}}]),n}(a.Component),W=n(77063),G=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.models,n=e.closePanel;return(0,v.jsx)("div",{id:"uploadOverview",children:(0,v.jsx)(W.ZP,{status:"success",title:"Predictive models configured!",subTitle:"In total ".concat(t.length," models were trained, the equivalent of every possible submission combination with a minimum size of three. You can view a summary by closing this panel."),extra:(0,v.jsx)(k.Z,{onClick:n,children:"Close"})})})}}]),n}(a.Component),Q=n(12740),B=n(95909),Y=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={currentStep:0,data:[],registry:[],models:[],loaded:!1},e.setData=function(t){e.setState({data:t,currentStep:1})},e.setModels=function(t){var n=JSON.parse(JSON.stringify(t));Q.Z.deleteModels().then((0,u.Z)((0,c.Z)().mark((function r(){var i;return(0,c.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(;n.length>0;)g.ZP.loading({content:"Upload progression: ".concat(Math.round((t.length-n.length)/t.length*100),"%"),key:"uploadProgress"});return r.next=3,Q.Z.getModels();case 3:i=r.sent,g.ZP.success({content:"Upload complete!",key:"uploadProgress",duration:2}),e.setState({currentStep:3,models:i});case 6:case"end":return r.stop()}}),r)}))))},e.renderStep=function(){var t=e.state,n=t.currentStep,r=t.data,i=t.registry,s=t.models;switch(n){default:case 0:return(0,v.jsx)(Z,{setData:e.setData});case 1:return(0,v.jsx)(D,{setRegistry:function(t){e.setState({registry:t})},registry:i,data:r,nextStep:e.nextStep});case 2:return(0,v.jsx)(q,{data:r,registry:i,setModels:e.setModels});case 3:return(0,v.jsx)(G,{models:s,closePanel:function(){return e.props.setModels(s)}})}},e.nextStep=function(){var t=e.state.currentStep;e.setState({currentStep:Math.min(S.length-1,t+1)})},e.previousStep=function(){var t=e.state.currentStep;t<=0||e.setState({currentStep:Math.max(0,t-1)})},e}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){var e=this;Q.Z.getModels().then((function(t){e.setState({models:t,loaded:!0})}))}},{key:"render",value:function(){var e=this.state,t=e.currentStep;return e.loaded?(0,v.jsxs)("div",{id:"configureModel",children:[(0,v.jsx)(x.Z,{message:"Notice",description:"Do not close this view whilst configuring or training models!",type:"warning",showIcon:!0,closable:!0,style:{marginBottom:10}}),(0,v.jsx)(j.Z,{current:t,children:S.map((function(e){return(0,v.jsx)(j.Z.Step,{title:e.title},e.title)}))}),(0,v.jsx)("div",{className:"stepsContent",children:this.renderStep()}),(0,v.jsxs)("div",{className:"stepsAction",children:[t<S.length-1&&(0,v.jsx)(k.Z,{type:"primary",onClick:this.nextStep,children:"Next"}),t===S.length-1&&(0,v.jsx)(k.Z,{type:"primary",onClick:function(){return g.ZP.success("Processing complete!")},children:"Done"}),t>0&&(0,v.jsx)(k.Z,{style:{margin:"0 8px"},onClick:this.previousStep,children:"Previous"})]})]}):(0,v.jsx)(B.Z,{small:!0})}}]),n}(a.Component),$=n(4942),H=n(1413),X=n(78445),ee=n(45371),te=n(83029),ne=n(34305),re=n(24642),ie=n(39255),se=n(50953),oe=n(82320),ae=n(60793),le=function(e,t){var n=e.sort(),r=(n.length-1)*t,i=Math.floor(r),s=r-i;return void 0!==n[i+1]?n[i]+s*(n[i+1]-n[i]):n[i]},de=function(e){return e.entry_collection.split("#").length+1},ce=function(e){return Math.min.apply(Math,(0,b.Z)(e.map((function(e){return e.mse}))))},ue=function(e){return Math.max.apply(Math,(0,b.Z)(e.map((function(e){return e.mse}))))},he=function(e){return ae.median(e.map((function(e){return e.mse})))},pe=function(e){return le(e.map((function(e){return e.mse})),.25)},fe=function(e){return le(e.map((function(e){return e.mse})),.75)},me=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.models,n=e.width,r=e.height,i=e.tooltipOpen,s=e.tooltipLeft,o=e.tooltipTop,a=e.tooltipData,l=e.showTooltip,d=e.hideTooltip,c=n,u=r-120,h=(0,ne.Z)({range:[0,c],round:!0,domain:t.map(de),padding:.4}),p=t.map((function(e){return Math.round(1e3*e.mse)/1e3})),f=Math.min.apply(Math,(0,b.Z)(p)),m=Math.max.apply(Math,(0,b.Z)(p)),x=(0,re.Z)({range:[u,0],round:!0,domain:[f,m]}),g=h.bandwidth(),y=Math.min(40,g),Z=Object.values(t.reduce((function(e,t){return(0,H.Z)((0,H.Z)({},e),{},(0,$.Z)({},de(t),[].concat((0,b.Z)(e[de(t)]||[]),[t])))}),{}));return n<10?null:(0,v.jsxs)("div",{style:{position:"relative"},children:[(0,v.jsx)("h4",{children:"Mean Square Error"}),(0,v.jsxs)("svg",{width:n,height:r,children:[(0,v.jsx)(te.Z,{id:"statsplot",to:"#8b6ce7",from:"#87f2d4"}),(0,v.jsx)("rect",{x:0,y:0,width:n,height:r,fill:"url(#statsplot)",rx:14}),(0,v.jsx)(oe.Z,{id:"hViolinLines",height:3,width:3,stroke:"#ced4da",strokeWidth:1,orientation:["horizontal"]}),(0,v.jsx)(X.Z,{top:40,children:Z.map((function(e,t){return(0,v.jsx)("g",{children:(0,v.jsx)(ee.Z,{min:Math.max(ce(e),.001),max:ue(e),left:h(de(e[0]).toString())+.3*y,firstQuartile:Math.max(pe(e),.001),thirdQuartile:fe(e),median:he(e),boxWidth:.4*y,fill:"#FFFFFF",fillOpacity:.3,stroke:"#FFFFFF",strokeWidth:2,valueScale:x,boxProps:{onMouseOver:function(){l({tooltipTop:x(he(e))+40,tooltipLeft:h(de(e[0]).toString())+y+5,tooltipData:{max:ue(e),median:he(e),min:ce(e),firstQuartile:pe(e),thirdQuartile:fe(e),models:e.length.toString(),name:"".concat(de(e[0])," gradable components")}})},onMouseLeave:function(){d()}}})},t)}))})]}),i&&a&&(0,v.jsxs)(ie.Z,{top:o,left:s,style:(0,H.Z)((0,H.Z)({},ie.j),{},{backgroundColor:"#283238",color:"white"}),children:[(0,v.jsx)("div",{children:(0,v.jsx)("strong",{children:a.name})}),(0,v.jsxs)("div",{style:{marginTop:"5px",fontSize:"12px"},children:[(0,v.jsxs)("div",{children:["max: ",a.max]}),(0,v.jsxs)("div",{children:["third quartile: ",a.thirdQuartile]}),(0,v.jsxs)("div",{children:["median: ",a.median]}),(0,v.jsxs)("div",{children:["first quartile: ",a.firstQuartile]}),(0,v.jsxs)("div",{children:["min: ",a.min.toString()]}),(0,v.jsxs)("div",{children:["models: ",a.models]})]})]})]})}}]),n}(a.Component),xe=(0,se.Z)(me),ge=n(95443),ve=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={loaded:!1,models:[],isConfiguringModel:!1},e}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){var e=this;Q.Z.getModels().then((function(t){e.setState({models:t,loaded:!0})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.models,r=t.loaded,i=t.isConfiguringModel;return r?(0,v.jsxs)(l.Z,{menuKey:"gradePredictorOld",children:[(0,v.jsx)("h1",{children:"Grade Predictor"}),(0,v.jsx)("span",{onClick:function(){return e.setState({isConfiguringModel:!0})},children:"Configure a predictive model"}),(0,v.jsx)(d.Z,{}),!i&&n.length>0&&(0,v.jsx)(ge.Z,{children:function(e){return(0,v.jsx)(xe,{models:n,width:e.width,height:500})}}),(i||0===n.length)&&(0,v.jsx)(Y,{setModels:function(t){return e.setState({models:t,isConfiguringModel:!1})}})]}):(0,v.jsx)(B.Z,{small:!1})}}]),n}(a.Component)},49109:function(e,t,n){n.d(t,{Z:function(){return Z}});var r=n(1413),i=n(15671),s=n(43144),o=n(60136),a=n(95212),l=n(72791),d=n(18622),c=n(35945),u=n(87309),h=n(14057),p=n(91523),f=n(1699),m=n(68438),x=n(60364),g=n(80184),v=(0,x.$j)((function(e){return{course:e.course,user:e.user}})),y=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={loaded:!1,students:[]},e}return(0,s.Z)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.studentPickView&&f.Z.getStudents().then((function(t){return e.setState({students:t,loaded:!0})})),this.setState({loaded:!0})}},{key:"renderInner",value:function(){var e=this;if(this.props.studentPickView){var t=this.state,n=t.students,i=t.loaded;return(0,g.jsx)(d.ZP,{id:"studentPicker",isLoading:!i,options:n.sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(e){return{label:e.name,value:e.login_id}})),placeholder:"Choose a student",onChange:function(t){return e.props.setStudent(t?n.find((function(e){return e.login_id===t.value})):null)},isClearable:!0,styles:{control:function(e,t){return(0,r.Z)((0,r.Z)({},e),{},{backgroundColor:"transparent",color:"white",border:"1px solid white"})},singleValue:function(e,t){return(0,r.Z)((0,r.Z)({},e),{},{color:"white"})}}})}return(0,g.jsx)("div",{id:"inner",children:(0,g.jsx)("h2",{children:this.props.course?this.props.course.course_name:"Loading course..."})})}},{key:"render",value:function(){return(0,g.jsxs)(l.Fragment,{children:[(0,g.jsxs)("div",{id:"adminHeader",children:[this.props.studentPickView?(0,g.jsx)(p.rU,{to:"/admin",style:{float:"right"},children:(0,g.jsx)("h3",{children:"Admin Panel"})}):(0,g.jsx)("div",{style:{float:"right",padding:20},children:(0,g.jsx)(c.Z,{title:"Reload data",children:(0,g.jsx)(u.Z,{id:"reload",shape:"circle",style:{backgroundColor:"rgba(255, 255, 255, 0.5)",color:"white"},icon:(0,g.jsx)(h.Z,{})})})}),(0,g.jsxs)("div",{id:"navbarContent",children:[(0,g.jsx)("div",{id:"brand",children:(0,g.jsx)(p.rU,{to:"/",children:(0,g.jsx)("h1",{children:"IGuideME"})})}),this.renderInner()]})]}),(0,m.f)()&&(0,g.jsxs)("div",{id:"debugNotice",children:["Application is running in ",(0,g.jsx)("strong",{children:"demo"})," mode. Changes will not be saved!"]})]})}}]),n}(l.Component),Z=v(y)}}]);
//# sourceMappingURL=935.93ded491.chunk.js.map