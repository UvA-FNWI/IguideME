"use strict";(self.webpackChunkiguideme=self.webpackChunkiguideme||[]).push([[276],{1699:function(e,t,n){n.d(t,{Z:function(){return c}});var i=n(15671),r=n(43144),s=n(60136),a=n(95212),o=n(68438),l=n(5674),d=n(68865),u=n(30767),c=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,null,[{key:"getStudents",value:function(){return(0,o.f)()?(0,u.g)(d.wZ):this.client.get("students").then((function(e){return e.data}))}},{key:"getConsents",value:function(){return(0,o.f)()?(0,u.g)(d.nj):this.client.get("consents").then((function(e){return e.data}))}},{key:"getGoalgrades",value:function(){return(0,o.f)()?(0,u.g)(d.sU):this.client.get("goal-grades").then((function(e){return e.data}))}}]),n}(l.Z)},40276:function(e,t,n){n.r(t),n.d(t,{default:function(){return Ee}});var i,r=n(15671),s=n(43144),a=n(60136),o=n(95212),l=n(72791),d=n(1413),u=n(68438),c=n(5674),h=n(30767),p=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,null,[{key:"fetchConsent",value:function(){return(0,u.f)()?Promise.resolve(1):this.client.get("datamart/consent").then((function(e){return e.data}))}},{key:"setConsent",value:function(e){return(0,u.f)()?(0,h.g)(e):this.client.post("datamart/consent",{granted:null===e?-1:e?1:0})}},{key:"isAccepted",value:function(){return(0,u.f)()?Promise.resolve(!0):this.client.get("/datamart/accept-list/self").then((function(e){return e.data}))}}]),n}(c.Z),f=n(95909),g=n(50419),v=n(32014),x=n(87309),m=n(77533),y=n(64880),j=n(80184),Z=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={hasRead:!1,redirect:!1},e.handleAccept=function(){p.setConsent(!0).then((function(){e.setState({redirect:!0})}))},e.handleDecline=function(){p.setConsent(!1).then((function(){g.ZP.success("Consent declined!")}))},e}return(0,s.Z)(n,[{key:"render",value:function(){var e=this,t=this.props.text,n=this.state,i=n.hasRead;if(n.redirect)return(0,j.jsx)(y.l_,{to:"/"});var r=t;if(!t||0===t.length){var s=m.h.getState().course;r=null===s||void 0===s?void 0:s.text}return null===r||void 0===r||0===r.length?(0,j.jsxs)("div",{children:[(0,j.jsx)("h1",{children:"Application improperly configured."}),(0,j.jsx)("p",{children:"Please notify your instructor that the informed consent is not configured. Once configured you will be able to accept to the terms to start using the application!"})]}):(0,j.jsxs)("div",{style:{maxWidth:700,margin:"0 auto",boxSizing:"border-box",padding:20},children:[(0,j.jsx)("h1",{children:"Informed Consent"}),(0,j.jsx)("p",{children:"Please read the informed consent carefully. You will be asked to accept the informed consent, if declined your data will not be processed. You can change your preference at any time."}),(0,j.jsx)("div",{style:{backgroundColor:"#eaeaea",padding:20,borderRadius:10},dangerouslySetInnerHTML:{__html:r}}),(0,j.jsxs)("div",{style:{marginTop:20},children:[(0,j.jsx)(v.Z,{checked:i,onChange:function(t){return e.setState({hasRead:t.target.checked})},children:"I have read and understood the informed consent"}),(0,j.jsx)("br",{}),(0,j.jsx)("br",{}),(0,j.jsx)(x.Z,{type:"primary",disabled:!i,onClick:this.handleAccept,children:"Accept"})," ",(0,j.jsx)(x.Z,{disabled:!i,danger:!0,onClick:function(){e.handleDecline(),e.setState({hasRead:!1})},children:"Decline"})]})]})}}]),n}(l.Component),b=function(e){return function(t){(0,a.Z)(i,t);var n=(0,o.Z)(i);function i(){var e;(0,r.Z)(this,i);for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return(e=n.call.apply(n,[this].concat(s))).state={accepted:!1,consentLoaded:!1,consentGranted:!1},e}return(0,s.Z)(i,[{key:"componentDidMount",value:function(){var e=this;p.fetchConsent().then((function(t){p.isAccepted().then((function(n){e.setState({accepted:n,consentLoaded:!0,consentGranted:1===t})}))}))}},{key:"render",value:function(){var t=this.state,n=t.consentLoaded,i=t.consentGranted,r=t.accepted,s=m.h.getState().course;return n&&s?!i&&s.require_consent?(0,j.jsx)(Z,{text:s.text}):r?(0,j.jsx)(e,(0,d.Z)({},this.props)):(0,j.jsx)("div",{children:(0,j.jsx)("h2",{children:"You are not authorized to use this application."})}):(0,j.jsx)(f.Z,{})}}]),i}(l.Component)},k=n(72014),C=n(49109),S=n(74165),_=n(37762),w=n(15861),G=n(28817),N=n(83099),A=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"render",value:function(){var e=this.props.peerGrades,t=function(e){return Math.round(100*e)/100};return(0,j.jsxs)("div",{className:"peerComparison",children:[(0,j.jsx)("span",{className:"title",children:"Peer Comparison"}),e?(0,j.jsxs)("div",{className:"distribution",children:[(0,j.jsxs)("div",{className:"min",children:[(0,j.jsx)("small",{children:"min."}),(0,j.jsx)("br",{}),t(e.min)]}),(0,j.jsxs)("div",{className:"avg",children:[(0,j.jsx)("small",{children:"avg."}),(0,j.jsx)("br",{}),t(e.avg)]}),(0,j.jsxs)("div",{className:"max",children:[(0,j.jsx)("small",{children:"max."}),(0,j.jsx)("br",{}),t(e.max)]})]}):(0,j.jsx)("p",{children:"Not available"})]})}}]),n}(l.Component),E=n(60793),I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=e.map((function(e){return e.average}));return 0===n.length?null:Math.round(E.mean(n)*Math.pow(10,t))/Math.pow(10,t)},P=function(e,t,n){return"BINARY"===e.content?n.length>0?Math.round(n.filter((function(e){return parseFloat(e.grade)>.8})).length/t.length*100):0:Math.round(n.length/t.length*100)},T=n(83373),M=n(27804),O=n(90398),D=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={loading:!0,passed:!1},e.setup=function(){var t=e.props.grade;e.setState({loading:!1,passed:parseFloat(t)>=5.5})},e}return(0,s.Z)(n,[{key:"componentDidMount",value:function(){this.setup()}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.passed,i=this.props.grade;return(0,j.jsx)("div",{className:"gradeStatistic",children:(0,j.jsx)(T.Z,{title:"Grade",value:i,loading:t,prefix:n?(0,j.jsx)(M.Z,{className:"pass"}):(0,j.jsx)(O.Z,{className:"fail"})})})}}]),n}(l.Component);!function(e){e[e.topic=0]="topic",e[e.entry=1]="entry",e[e.reply=2]="reply"}(i||(i={}));var R=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={loaded:!1},e.getHeader=function(){var t=e.props,n=t.tile,r=t.tileEntries,s=t.submissions,a=t.userGrades,o=t.discussions,l=t.learningOutcomes,d=t.student,u=I(a);if("DISCUSSIONS"===n.type){var c=0;return o.map((function(e){e.type===i.topic?e.posted_by===d.name&&c++:c++})),(0,j.jsxs)("span",{style:{textAlign:"center"},children:[(0,j.jsx)("strong",{children:c})," discussion",1!==o.length&&"s"]})}switch(n.content){case"LEARNING_OUTCOMES":var h=l.filter((function(e){return e.success})).length;return(0,j.jsxs)("span",{style:{textAlign:"center"},children:[(0,j.jsxs)("strong",{children:[h,(0,j.jsxs)("small",{children:["/",l.length]})]})," completed"]});case"PREDICTION":return(0,j.jsx)(D,{grade:u?u.toString():"-"});case"BINARY":return(0,j.jsxs)(j.Fragment,{children:[!!u&&(0,j.jsx)(G.Z,{percent:P(n,r,s)}),(0,j.jsx)(D,{grade:u?(10*u).toString():"-"})]});case"ENTRIES":return(0,j.jsxs)(j.Fragment,{children:[!!u&&(0,j.jsx)(G.Z,{percent:P(n,r,s)}),(0,j.jsx)(D,{grade:u?u.toString():"-"})]});default:return null}},e}return(0,s.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.tile,n=e.peerGrades,i=e.userGrades;return(0,j.jsx)("div",{className:"tile",onClick:function(){window.dispatchEvent(new CustomEvent("selectTile",{detail:{tile:t,userGrades:i}}))},children:(0,j.jsxs)("div",{className:"wrapper",children:[(0,j.jsxs)("div",{className:"content",children:[(0,j.jsx)("h2",{children:t.title}),(0,j.jsx)(N.Z,{direction:"vertical",style:{width:"100%"},children:this.getHeader()})]}),(0,j.jsx)(A,{peerGrades:n.find((function(e){return e.tileID===t.id}))})]})})}}]),n}(l.Component),L=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.tileGroup,n=e.tileEntries,i=e.tiles,r=e.student,s=e.tilesGradeSummary,a=e.peerGrades,o=e.submissions,l=e.discussions,d=e.learningOutcomes;return(0,j.jsxs)("div",{className:"tileGroup",children:[(0,j.jsx)("h2",{children:t.title}),(0,j.jsx)("div",{className:"tileWrapper",children:i.sort((function(e,t){return e.position-t.position})).map((function(e){return(0,j.jsx)(R,{tile:e,tileEntries:n.filter((function(t){return t.tile_id===e.id})),discussions:l,student:r,submissions:o.get(e.id),userGrades:s.filter((function(t){return t.tile.id===e.id})),peerGrades:a.filter((function(t){return t.tileID===e.id})),learningOutcomes:d},e.id)}))})]})}}]),n}(l.Component),Y=n(17350),U=n(86916),B=n(58686),F=n(19603),V=n(67575),z=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.submissions,n=e.tileEntries;return(0,j.jsx)("div",{id:"binaryEntries",children:(0,j.jsx)(B.Z,{gutter:[5,5],children:t.map((function(e){var t="0"!==e.grade.slice(0,1),i=n.find((function(t){return t.id===e.entry_id}));return(0,j.jsx)(F.Z,{xs:12,md:8,lg:6,children:(0,j.jsxs)("div",{className:"entry ".concat(t?"success":"fail"),children:[(0,j.jsx)("h2",{children:i?i.title:null}),t?(0,j.jsxs)("span",{children:[(0,j.jsx)(V.Z,{})," Present"]}):(0,j.jsx)("span",{children:"Absent"})]})},e.entry_id)}))})})}}]),n}(l.Component),W=n(99372),H=n(91333),$=n(32788),q=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.tileEntry,n=e.submission,i="string"===typeof n.meta?JSON.parse(n.meta||"{}"):n.meta||{};return(0,j.jsxs)("div",{className:"tileEntry",children:[(0,j.jsx)("h2",{children:t.title}),(0,j.jsx)(H.Z,{style:{margin:"5px 0"}}),(0,j.jsx)(D,{grade:n.grade}),Object.keys(i).length>0&&(0,j.jsx)("div",{children:(0,j.jsx)($.Z,{dataSource:Object.keys(i).map((function(e,t){return{key:t,label:e,value:i[e]}})),columns:[{title:"Key",dataIndex:"label",key:"label",width:"40%",ellipsis:!0},{title:"Value",dataIndex:"value",key:"value"}]})})]})}}]),n}(l.Component),Q=n(28353),J=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.tile,n=e.tileEntries,i=e.submissions;if(t.graph_view){var r={labels:i.map((function(e,t){var i,r=n.find((function(t){return t.id===e.entry_id}));return null!==(i=null===r||void 0===r?void 0:r.title)&&void 0!==i?i:"???"})),datasets:[{label:t.title+" grades",data:i.map((function(e){return e.grade})),fill:!1,backgroundColor:"rgba(75,192,192,1)"}]};return(0,j.jsx)("div",{id:"tileEntriesGraph",style:{minHeight:"60vh"},children:(0,j.jsx)("div",{children:(0,j.jsx)(Q.$Q,{options:{legend:{display:!1}},width:500,data:r})})})}return(0,j.jsx)("div",{id:"tileEntriesList",children:(0,j.jsx)(B.Z,{gutter:[10,10],children:n.map((function(e){var t=i.find((function(t){return t.entry_id===e.id}));return t?(0,j.jsx)(F.Z,{xs:24,sm:12,md:8,lg:6,className:"entryCol",children:(0,j.jsx)(q,{submission:t,tileEntry:e})},e.id):null}))})})}}]),n}(l.Component),K=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"render",value:function(){var e,t=this.props,n=t.predictions,i=t.tileEntries,r=m.h.getState().tiles,s=r.filter((function(e){return"BINARY"===e.content})).length+1,a=(0,_.Z)(i);try{var o=function(){var t=e.value,n=r.find((function(e){return e.id===t.tile_id}));return n?"BINARY"===n.content?"continue":void(s+=1):"continue"};for(a.s();!(e=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}var l=function(e){return Math.round(100*e)/100},d=Array.from(Array(s).keys()).map((function(e){return 5-4.5/s*e}));if(0===n.length)return(0,j.jsxs)("div",{id:"gradePrediction",children:[(0,j.jsx)("h2",{children:"No predictions available."}),(0,j.jsx)("p",{children:"Try again later when more grades are available."})]});return(0,j.jsxs)("div",{id:"gradePrediction",children:[(0,j.jsxs)("h3",{children:["Your predicted grade is a ",(0,j.jsx)("strong",{children:l(n[n.length-1].grade)})]}),(0,j.jsx)(Q.$Q,{options:{legend:{display:!1},scales:{xAxes:[{id:"x",type:"category"}],yAxes:[{id:"y",type:"linear",position:"left",ticks:{beginAtZero:!0,min:0,max:10}}]}},width:500,data:function(e){var t=e.getContext("2d"),i=t.createLinearGradient(0,0,0,350);i.addColorStop(0,"#FFF"),i.addColorStop(1,"rgb(90, 50, 255)");var r=t.createLinearGradient(0,0,0,350);return r.addColorStop(1,"#FFF"),r.addColorStop(0,"rgb(90, 50, 255)"),{labels:n.map((function(e){return e.date})),datasets:[{label:"Predicted grade",type:"line",backgroundColor:"rgb(90, 50, 255)",borderColor:"rgb(90, 50, 255)",hoverBorderColor:"rgb(90, 50, 255)",fill:!1,tension:0,data:n.map((function(e){return l(e.grade)})),yAxisID:"y",xAxisID:"x"},{label:"UpperConfidence",type:"line",backgroundColor:i,borderColor:"transparent",pointRadius:0,fill:0,tension:0,data:n.map((function(e,t){return e.grade+d[t+3]})),yAxisID:"y",xAxisID:"x"},{label:"LowerConfidence",type:"line",backgroundColor:r,borderColor:"transparent",pointRadius:0,fill:0,tension:0,data:n.map((function(e,t){return e.grade-d[t+3]})),yAxisID:"y",xAxisID:"x"}]}}}),(0,j.jsx)("p",{children:"Grade predictions will grow more accurate as the course progresses."})]})}}]),n}(l.Component),X=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"handle_entry_or_reply",value:function(e,t){return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(H.Z,{}),(0,j.jsx)("p",{dangerouslySetInnerHTML:{__html:e.message}}),(0,j.jsx)("small",{children:e.posted_at})]})}},{key:"handle_topic",value:function(e,t){return e.posted_by===t.name?(0,j.jsx)(F.Z,{xs:24,md:12,lg:8,children:(0,j.jsxs)("div",{className:"discussion",children:[(0,j.jsx)("h2",{children:e.title}),(0,j.jsx)("small",{children:e.posted_at}),(0,j.jsx)(H.Z,{}),(0,j.jsx)("p",{dangerouslySetInnerHTML:{__html:e.message}})]})},e.id):null}},{key:"render",value:function(){for(var e,t,n,r=this.props,s=r.discussions,a=r.student,o=new Map,l=[],d=0;d<s.length;d++)switch((n=s[d]).type){case i.topic:if(!(e=this.handle_topic(n,a)))break;void 0===(t=o.get(n.discussion_id.toString()))?o.set(n.discussion_id.toString(),{type:n.type,array:[e],title:""}):t.array.push(e);break;case i.entry:e=this.handle_entry_or_reply(n,a),void 0===(t=o.get("".concat(n.parent_id,".entries")))?o.set("".concat(n.parent_id,".entries"),{type:n.type,array:[e],title:n.title}):t.array.push(e);break;case i.reply:e=this.handle_entry_or_reply(n,a),void 0===(t=o.get("".concat(n.parent_id,".replies")))?o.set("".concat(n.parent_id,".replies"),{type:n.type,array:[e],title:n.title}):t.array.push(e)}var u,c=(0,_.Z)(o.values());try{for(c.s();!(u=c.n()).done;){var h=u.value;switch(h.type){case i.topic:l=l.concat(h.array);break;case i.entry:l.push((0,j.jsx)(F.Z,{xs:24,md:12,lg:8,children:(0,j.jsxs)("div",{className:"discussion",children:[(0,j.jsxs)("h2",{children:["Questions in: ",h.title]}),h.array]})},"{value.array[0].parent_id}.entries"));break;case i.reply:l.push((0,j.jsx)(F.Z,{xs:24,md:12,lg:8,children:(0,j.jsxs)("div",{className:"discussion",children:[(0,j.jsxs)("h2",{children:["Replies in: ",h.title]}),h.array]})},"{value.array[0].parent_id}.replies"))}}}catch(p){c.e(p)}finally{c.f()}return(0,j.jsx)("div",{id:"discussionsList",children:(0,j.jsx)(B.Z,{gutter:[10,10],children:l})})}}]),n}(l.Component),ee=n(75594),te=n(65509),ne=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.learningOutcomes,n=e.tileEntries,i=function(e){switch(e){case"lte":return"\u2264";case"gte":return"\u2265";default:return"="}};return(0,j.jsx)("div",{id:"learningOutcomes",children:(0,j.jsx)("div",{style:{margin:"0 auto",maxWidth:"400px",width:"100%"},children:t.map((function(e,t){return(0,j.jsx)("div",{style:{margin:"5px 0"},children:(0,j.jsx)(ee.Z.Ribbon,{text:e.success?"Completed":"Not completed",color:e.success?"green":"red",children:(0,j.jsxs)(te.Z,{title:"Goal ".concat(t),size:"small",children:[(0,j.jsx)("strong",{children:e.goal.title}),(0,j.jsx)("br",{}),e.goal.requirements.map((function(e){var t=n.find((function(t){return t.id===e.entry_id}));return(0,j.jsxs)("span",{children:[t?t.title:"???"," ",i(e.expression)," ",e.value,(0,j.jsx)("br",{})]})}))]})})},e.goal.id)}))})})}}]),n}(l.Component),ie=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).content=function(){var t=e.props,n=t.tile,i=t.submissions,r=t.tileEntries,s=t.predictions,a=t.discussions,o=t.learningOutcomes,l=t.student;switch(n.content){case"BINARY":return(0,j.jsx)(z,{submissions:i,tileEntries:r.filter((function(e){return e.tile_id===n.id}))});case"ENTRIES":return"DISCUSSIONS"===n.type?(0,j.jsx)(X,{discussions:a,tile:n,student:l}):(0,j.jsx)(J,{submissions:i,tileEntries:r.filter((function(e){return e.tile_id===n.id})),discussions:a,tile:n});case"PREDICTION":return(0,j.jsx)(K,{tileEntries:r,predictions:s});case"LEARNING_OUTCOMES":return(0,j.jsx)(ne,{learningOutcomes:o,tileEntries:r});default:return null}},e}return(0,s.Z)(n,[{key:"render",value:function(){var e=this.props.tile;return(0,j.jsxs)("div",{style:{padding:20},children:[(0,j.jsx)(x.Z,{type:"ghost",icon:(0,j.jsx)(W.Z,{}),onClick:function(){window.dispatchEvent(new CustomEvent("selectTile",{detail:void 0}))},children:"Return to dashboard"}),(0,j.jsx)("h1",{style:{margin:"10px 0"},children:e.title}),this.content()]})}}]),n}(l.Component),re=n(50881),se=n(78622),ae=n(68961),oe=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).bar_options={maintainAspectRatio:!0,legend:{display:!0},scales:{xAxes:[{gridLines:{display:!1},scaleLabel:{display:!1},ticks:{display:!1},stacked:!1}],yAxes:[{barPercentage:.95,categoryPercentage:.95,gridLines:{display:!1},scaleLabel:{display:!1},stacked:!1}]}},e.click=function(e,t,n){if(t[0]){var i=n.tiles[t[0]._index];window.dispatchEvent(new CustomEvent("selectTile",{detail:{tile:i}}))}},e}return(0,s.Z)(n,[{key:"createBarData",value:function(e,t,n,r,s,a){for(var o=new Map,l=function(t){var n=0;"LEARNING_OUTCOMES"===e[t].content?n=s.filter((function(e){return e.success})).length:"DISCUSSIONS"===e[t].type&&r.map((function(e){e.type===i.topic?e.posted_by===a.name&&n++:n++})),o.set(e[t].id,{title:e[t].title,grade:n,peergrade:0,max:10,tile:e[t]})},d=0;d<e.length;d++)l(d);for(var u=0;u<t.length;u++){var c=t[u].average,h=o.get(t[u].tile.id);"BINARY"===t[u].tile.content&&(h.max=100,c*=100),c=10*c/h.max,h.grade=c}for(var p=0;p<n.length;p++){var f=n[p].avg,g=o.get(n[p].tileID);f=10*f/g.max,g.peergrade=f}var v=[],x=[],m=[],y=[];return o.forEach((function(e){0===e.grade&&0===e.peergrade||(v.push(e.tile),x.push(e.title),m.push(e.grade),y.push(e.peergrade))})),{tiles:v,labels:x,datasets:[{label:"You",backgroundColor:"rgba(47,44,232, 0.5)",borderColor:"rgba(0,0,255, 1)",borderWidth:2,data:m,skipNull:!0},{label:"Peers",backgroundColor:"rgba(255, 50, 50, .5)",borderColor:"rgba(255,0,0, 1)",borderWidth:2,data:y,skipNull:!0}]}}},{key:"render",value:function(){var e=this,t=this.props,n=t.tiles,i=t.tilesGradeSummary,r=t.peerGrades,s=t.discussions,a=t.learningOutcomes,o=t.student,l=this.createBarData(n,i,r,s,a,o);return(0,j.jsx)("div",{children:(0,j.jsx)(Q.n4,{height:300,data:l,options:(0,d.Z)((0,d.Z)({},this.bar_options),{},{onClick:function(t,n){return e.click(t,n,l)}})})})}}]),n}(l.Component),le=n(60364),de=n(23673),ue=n(12740),ce=n(19503),he=n(92414),pe=(0,le.$j)((function(e){return{course:e.course,tiles:e.tiles}})),fe=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s)))._isMounted=!1,e.state={notifications:[]},e.loadNotifications=function(t){var n=t.student;n&&ue.Z.getNotifications(n.login_id).then((function(t){e._isMounted&&e.setState({notifications:t})}))},e}return(0,s.Z)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.loadNotifications(this.props)}},{key:"componentWillReceiveProps",value:function(e,t){var n,i;(null===(n=e.student)||void 0===n?void 0:n.login_id)!==(null===(i=this.props.student)||void 0===i?void 0:i.login_id)&&this.loadNotifications(e)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this.props,t=e.course,n=e.student,i=e.tiles,r=e.settings,s=this.state.notifications,a=s.filter((function(e){return"outperforming peers"===e.status})),o=s.filter((function(e){return"closing the gap"===e.status})),l=s.filter((function(e){return"more effort required"===e.status}));return(0,j.jsxs)("div",{id:"userProfile",children:[(0,j.jsxs)(B.Z,{children:[(0,j.jsx)(F.Z,{span:6,children:(0,j.jsxs)("div",{style:{margin:"10"},children:[(0,j.jsx)("h3",{children:n&&n.name}),(0,j.jsx)("strong",{children:t&&t.course_name})]})}),(0,j.jsx)(F.Z,{span:13,children:(0,j.jsx)("div",{style:{display:"table",margin:"0 auto"},children:(0,j.jsx)(ce.Z,{outperforming:a,closing:o,moreEffort:l,tiles:i})})}),(0,j.jsx)(F.Z,{span:5,children:(0,j.jsx)("div",{style:{display:"table",margin:"0 auto"},children:(0,j.jsx)(x.Z,{size:"large",onClick:function(){return r(!0)},color:"primary",icon:(0,j.jsx)(he.Z,{}),children:"Settings"})})})]}),(0,j.jsx)("br",{}),(0,j.jsx)("div",{style:{textAlign:"center"},children:(0,j.jsx)("small",{children:"IGuideME is a product by the University of Amsterdam."})})]})}}]),n}(l.Component),ge=pe(fe),ve=n(92607),xe=n(35945),me=n(26712),ye=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={goalGrade:-1},e}return(0,s.Z)(n,[{key:"componentDidMount",value:function(){var e=this;ve.Z.getGoalGrade().then((function(t){return e.setState({goalGrade:t})}))}},{key:"render",value:function(){var e=this;return(0,j.jsxs)("div",{id:"desiredGrade",children:[(0,j.jsx)("h1",{children:"Goal Grade"}),(0,j.jsx)("p",{children:"Please indicate the grade you wish to obtain for this course. You can always change your goal at a later stage!"}),(0,j.jsx)(N.Z,{direction:"vertical",children:(0,j.jsx)(re.ZP.Group,{value:this.state.goalGrade,onChange:function(t){return ve.Z.setGoalGrade(t.target.value).then((function(n){return e.setState({goalGrade:t.target.value})}))},options:[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4},{label:"5",value:5},{label:"6",value:6},{label:"7",value:7},{label:"8",value:8},{label:"9",value:9},{label:"10",value:10}],optionType:"button"})})]})}}]),n}(l.Component),je=b((0,k.u)(ye)),Ze=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={notifications:!0,updatingNotifications:!1},e.toggleNotifications=function(){e.setState({notifications:!e.state.notifications})},e}return(0,s.Z)(n,[{key:"render",value:function(){var e=this,t=this.props.settings,n=this.state,i=n.notifications,r=n.updatingNotifications;return(0,j.jsxs)("div",{children:[(0,j.jsxs)(B.Z,{children:[(0,j.jsx)(F.Z,{span:6,children:(0,j.jsx)("div",{style:{padding:20},children:(0,j.jsx)(x.Z,{type:"ghost",icon:(0,j.jsx)(W.Z,{}),onClick:function(){return t(!1)},children:"Return to dashboard"})})}),(0,j.jsx)(F.Z,{span:4,offset:14,children:(0,j.jsx)("div",{style:{padding:20,textAlign:"center"},children:(0,j.jsx)(xe.Z,{title:(0,j.jsxs)("span",{children:["Notifications are turned ",(0,j.jsx)("strong",{children:i?"on":"off"}),"."]}),children:(0,j.jsx)(x.Z,{type:"ghost",loading:r,size:"large",shape:"circle",icon:(0,j.jsx)(me.Z,{twoToneColor:i?"rgb(0, 185, 120)":"rgb(255, 110, 90)"}),onClick:function(){return e.toggleNotifications()}},"toggleNotifications")},"tooltip")})})]}),(0,j.jsx)(B.Z,{children:(0,j.jsx)(F.Z,{span:24,children:(0,j.jsx)(je,{})})}),(0,j.jsx)(B.Z,{children:(0,j.jsx)(F.Z,{span:24,children:(0,j.jsx)(Z,{})})})]})}}]),n}(l.Component),be={loadPredictions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"self";return de.A.loadPredictions(e)}},ke=(0,le.$j)((function(e){return{dashboardColumns:e.dashboardColumns,tiles:e.tiles.filter((function(e){return e.visible})),tileGroups:e.tileGroups,tileEntries:e.tileEntries,predictions:e.predictions}}),be),Ce=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={tilesGradeSummary:[],peerGrades:[],userSubmissions:new Map,loaded:!0,displayTile:null,discussions:[],learningOutcomes:[],viewType:"bar",predictions:[],goalGrade:0,settings_view:!1},e.setSettingsView=function(t){e.setState({settings_view:t})},e.setup=function(){var t=(0,w.Z)((0,S.Z)().mark((function t(n){var i,r,s,a,o,l,d,u,c,h,p,f,g,v,x,m,y,j,Z,b=arguments;return(0,S.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(b.length>1&&void 0!==b[1]?b[1]:[],i=n.tiles,r=n.student){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,ue.Z.getPredictions(r.login_id);case 6:s=t.sent,e.setState({loaded:!1}),a=new Map,o=[],l=[],d=[],c=(0,_.Z)(i),t.prev=13,c.s();case 15:if((h=c.n()).done){t.next=39;break}if("LEARNING_OUTCOMES"!==(p=h.value).content){t.next=20;break}return l.push(U.Z.getUserGoals(p.id,r.login_id)),t.abrupt("continue",37);case 20:if("DISCUSSIONS"!==p.type){t.next=23;break}return o.push(U.Z.getDiscussions(p.id,r.login_id)),t.abrupt("continue",37);case 23:if("PREDICTION"!==p.content){t.next=26;break}return d.push({tile:p,average:s.length>0?s[0].grade:0}),t.abrupt("continue",37);case 26:return t.t0=a,t.t1=p.id,t.next=30,U.Z.getTileSubmissions(p.id,r.login_id);case 30:t.t2=t.sent,t.t0.set.call(t.t0,t.t1,t.t2),f=0,g=0,v=(0,_.Z)(a.get(p.id));try{for(v.s();!(x=v.n()).done;)m=x.value,u=parseFloat(m.grade),f+="BINARY"===p.content?Number(0!==u):u,g++}catch(k){v.e(k)}finally{v.f()}f=g?f/g:f,d.push({tile:p,average:f});case 37:t.next=15;break;case 39:t.next=44;break;case 41:t.prev=41,t.t3=t.catch(13),c.e(t.t3);case 44:return t.prev=44,c.f(),t.finish(44);case 47:return t.next=49,Promise.all(o);case 49:return y=t.sent.flat(),t.next=52,Promise.all(l);case 52:return j=t.sent.flat(),t.next=55,ve.Z.getGoalGrade();case 55:Z=t.sent,e.setState({discussions:y,learningOutcomes:j,tilesGradeSummary:d,userSubmissions:a,predictions:s,goalGrade:Z},(function(){U.Z.getPeerResults(r.login_id).then((function(t){return e.setState({peerGrades:t,loaded:!0})})).catch((function(){return e.setState({loaded:!0})}))}));case 57:case"end":return t.stop()}}),t,null,[[13,41,44,47]])})));return function(e){return t.apply(this,arguments)}}(),e}return(0,s.Z)(n,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("selectTile",(function(t){e.setState({displayTile:null===t||void 0===t?void 0:t.detail})})),this.setup(this.props)}},{key:"componentWillReceiveProps",value:function(e,t){var n,i;e.student&&(null===(n=e.student)||void 0===n?void 0:n.login_id)!==(null===(i=this.props.student)||void 0===i?void 0:i.login_id)&&this.setup(e)}},{key:"render",value:function(){var e=this,t=this.state,n=t.loaded,i=t.displayTile,r=t.viewType,s=t.tilesGradeSummary,a=t.peerGrades,o=t.userSubmissions,l=t.discussions,d=t.learningOutcomes,u=t.predictions,c=t.goalGrade,h=t.settings_view,p=this.props,g=p.tiles,v=p.tileGroups,x=p.dashboardColumns,m=p.tileEntries,y=p.student;return console.log("tiles",g),console.log("Discussions",l),n&&y?h?(0,j.jsx)(Ze,{settings:this.setSettingsView}):i?(0,j.jsx)(ie,{tile:i.tile,tileEntries:m,discussions:l,predictions:u,submissions:o.get(i.tile.id),learningOutcomes:d,student:y}):(0,j.jsxs)("div",{id:"studentDashboard",children:[(0,j.jsxs)(B.Z,{children:[(0,j.jsx)(F.Z,{span:6,children:(0,j.jsxs)(re.ZP.Group,{value:r,buttonStyle:"solid",onChange:function(t){return e.setState({viewType:t.target.value})},children:[(0,j.jsxs)(re.ZP.Button,{value:"bar",children:[(0,j.jsx)(se.Z,{})," Bar"]}),(0,j.jsxs)(re.ZP.Button,{value:"grid",children:[(0,j.jsx)(ae.Z,{})," Grid"]})]})}),(0,j.jsx)(F.Z,{span:4,offset:14,children:(0,j.jsxs)("div",{style:{margin:10},children:["Goal Grade: ",c]})})]}),"grid"===r?(0,j.jsx)(Y.Z,{children:(0,j.jsx)("div",{children:x.map((function(e){return(0,j.jsx)("div",{className:"column ".concat(e.container_width),children:v.filter((function(t){return t.column_id===e.id})).sort((function(e,t){return e.position-t.position})).map((function(e){return(0,j.jsx)(L,{tileGroup:e,tiles:g.filter((function(t){return t.group_id===e.id})),discussions:l,tileEntries:m.filter((function(t){return g.filter((function(t){return t.group_id===e.id})).map((function(e){return e.id})).includes(t.tile_id)})),student:y,tilesGradeSummary:s.filter((function(t){return t.tile.group_id===e.id})),peerGrades:a,submissions:o,learningOutcomes:d},e.id)}))},e.id)}))})}):(0,j.jsx)("div",{style:{padding:"0 8%"},children:(0,j.jsx)(oe,{tiles:g,tilesGradeSummary:s,peerGrades:a,discussions:l,learningOutcomes:d,student:y})}),(0,j.jsx)("br",{}),(0,j.jsx)("br",{}),(0,j.jsx)(ge,{student:this.props.student,settings:this.setSettingsView})]}):(0,j.jsx)(f.Z,{small:!0})}}]),n}(l.Component),Se=ke(Ce),_e=n(77063),we=n(81117),Ge=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"render",value:function(){return this.props.student?(0,j.jsx)(Se,{student:this.props.student}):(0,j.jsx)("div",{id:"getStarted",children:(0,j.jsx)(_e.ZP,{icon:(0,j.jsx)(we.Z,{}),title:(0,j.jsxs)("div",{children:[(0,j.jsx)("h2",{children:"Pick a student to start!"}),(0,j.jsx)("h1",{id:"brand",children:"IGuideME"})]})})})}}]),n}(l.Component),Ne=(0,le.$j)((function(e){return{user:e.user,predictions:e.predictions}})),Ae=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={student:null,goalGrade:void 0},e}return(0,s.Z)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.isAdmin?this.setState({goalGrade:10}):(ve.Z.getUser().then((function(t){return e.setState({student:t})})),ve.Z.getGoalGrade().then((function(t){return e.setState({goalGrade:t})})))}},{key:"render",value:function(){var e=this,t=this.props.isAdmin,n=this.state,i=n.student,r=n.goalGrade;return void 0===r?(0,j.jsx)(f.Z,{}):-1===r?(0,j.jsx)(y.l_,{to:"goal-grade"}):(0,j.jsxs)("div",{id:"app",children:[t&&(0,j.jsx)(C.Z,{studentPickView:!0,setStudent:function(t){e.setState({student:t},(function(){return window.dispatchEvent(new CustomEvent("selectTile",{detail:void 0}))}))}}),t?(0,j.jsx)(Ge,{student:i}):null===i?(0,j.jsx)("h1",{children:"Your account has not yet been processed, try again tomorrow!"}):(0,j.jsx)(Se,{student:i||void 0})]})}}]),n}(l.Component),Ee=b((0,k.u)(Ne(Ae)))},19503:function(e,t,n){n.d(t,{Z:function(){return h}});var i=n(15671),r=n(43144),s=n(60136),a=n(95212),o=n(72791),l=n(68409),d=n(18341),u=n(90398),c=n(80184),h=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s)))._getTileTitle=function(t){var n,i;return null!==(n=null===(i=e.props.tiles.find((function(e){return e.id===t})))||void 0===i?void 0:i.title)&&void 0!==n?n:""},e}return(0,r.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.outperforming,i=t.closing,r=t.moreEffort;return(0,c.jsxs)("div",{className:"Notifications",children:[n.length>0&&(0,c.jsxs)("div",{children:[(0,c.jsx)(l.Z,{})," ","You are outperforming your peers in:",(0,c.jsx)("ul",{style:{boxSizing:"border-box",paddingLeft:30},children:n.map((function(t,n){return(0,c.jsx)("li",{children:e._getTileTitle(t.tile_id)},n)}))})]}),i.length>0&&(0,c.jsxs)("div",{children:[(0,c.jsx)(d.Z,{})," ","You are closing the gap to your peers in:",(0,c.jsx)("ul",{style:{boxSizing:"border-box",paddingLeft:30},children:i.map((function(t,n){return(0,c.jsx)("li",{children:e._getTileTitle(t.tile_id)},n)}))})]}),r.length>0&&(0,c.jsxs)("div",{children:[(0,c.jsx)(u.Z,{})," ","You have to put more effort in:",(0,c.jsx)("ul",{style:{boxSizing:"border-box",paddingLeft:30},children:r.map((function(t){return(0,c.jsx)("li",{children:e._getTileTitle(t.tile_id)})}))})]})]})}}]),n}(o.Component)},49109:function(e,t,n){n.d(t,{Z:function(){return j}});var i=n(1413),r=n(15671),s=n(43144),a=n(60136),o=n(95212),l=n(72791),d=n(18622),u=n(35945),c=n(87309),h=n(14057),p=n(91523),f=n(1699),g=n(68438),v=n(60364),x=n(80184),m=(0,v.$j)((function(e){return{course:e.course,user:e.user}})),y=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={loaded:!1,students:[]},e}return(0,s.Z)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.studentPickView&&f.Z.getStudents().then((function(t){return e.setState({students:t,loaded:!0})})),this.setState({loaded:!0})}},{key:"renderInner",value:function(){var e=this;if(this.props.studentPickView){var t=this.state,n=t.students,r=t.loaded;return(0,x.jsx)(d.ZP,{id:"studentPicker",isLoading:!r,options:n.sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(e){return{label:e.name,value:e.login_id}})),placeholder:"Choose a student",onChange:function(t){return e.props.setStudent(t?n.find((function(e){return e.login_id===t.value})):null)},isClearable:!0,styles:{control:function(e,t){return(0,i.Z)((0,i.Z)({},e),{},{backgroundColor:"transparent",color:"white",border:"1px solid white"})},singleValue:function(e,t){return(0,i.Z)((0,i.Z)({},e),{},{color:"white"})}}})}return(0,x.jsx)("div",{id:"inner",children:(0,x.jsx)("h2",{children:this.props.course?this.props.course.course_name:"Loading course..."})})}},{key:"render",value:function(){return(0,x.jsxs)(l.Fragment,{children:[(0,x.jsxs)("div",{id:"adminHeader",children:[this.props.studentPickView?(0,x.jsx)(p.rU,{to:"/admin",style:{float:"right"},children:(0,x.jsx)("h3",{children:"Admin Panel"})}):(0,x.jsx)("div",{style:{float:"right",padding:20},children:(0,x.jsx)(u.Z,{title:"Reload data",children:(0,x.jsx)(c.Z,{id:"reload",shape:"circle",style:{backgroundColor:"rgba(255, 255, 255, 0.5)",color:"white"},icon:(0,x.jsx)(h.Z,{})})})}),(0,x.jsxs)("div",{id:"navbarContent",children:[(0,x.jsx)("div",{id:"brand",children:(0,x.jsx)(p.rU,{to:"/",children:(0,x.jsx)("h1",{children:"IGuideME"})})}),this.renderInner()]})]}),(0,g.f)()&&(0,x.jsxs)("div",{id:"debugNotice",children:["Application is running in ",(0,x.jsx)("strong",{children:"demo"})," mode. Changes will not be saved!"]})]})}}]),n}(l.Component),j=m(y)},72014:function(e,t,n){n.d(t,{u:function(){return p}});var i=n(1413),r=n(15671),s=n(43144),a=n(60136),o=n(95212),l=n(72791),d=n(95909),u=n(68438),c=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,null,[{key:"isAdmin",value:function(){return(0,u.f)()?Promise.resolve(!0):this.client.get("is-admin").then((function(e){return e.data}))}}]),n}(n(5674).Z),h=n(80184),p=function(e){return function(t){(0,a.Z)(l,t);var n=(0,o.Z)(l);function l(){var e;(0,r.Z)(this,l);for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return(e=n.call.apply(n,[this].concat(i))).state={isAdmin:!1,doneLoading:!1},e}return(0,s.Z)(l,[{key:"componentDidMount",value:function(){var e=this;c.isAdmin().then((function(t){e.setState({isAdmin:t,doneLoading:!0})}))}},{key:"render",value:function(){var t=this.state,n=t.doneLoading,r=t.isAdmin;return n?(0,h.jsx)(e,(0,i.Z)({isAdmin:r},this.props)):(0,h.jsx)(d.Z,{})}}]),l}(l.Component)}}}]);
//# sourceMappingURL=276.a6d82b78.chunk.js.map