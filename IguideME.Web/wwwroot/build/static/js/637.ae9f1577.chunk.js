"use strict";(self.webpackChunkiguideme=self.webpackChunkiguideme||[]).push([[637],{4525:function(e,t,a){a.d(t,{Z:function(){return P}});var n=a(15671),r=a(43144),s=a(60136),i=a(54062),o=a(72791),l=a(28286),d=a(49109),c=a(64880),u=a(58686),h=a(19603),m=a(29529),p=a(78222),f=a(68961),v=a(55240),x=a(56200),Z=a(68409),g=a(30836),j=a(34633),y=a(6314),k=a(9150),D=a(752),w=a(36090),b=a(91523),S=a(60364),G=a(80184),T=(0,S.$j)((function(e){return{user:e.user}})),N=function(e){(0,s.Z)(a,e);var t=(0,i.Z)(a);function a(){return(0,n.Z)(this,a),t.apply(this,arguments)}return(0,r.Z)(a,[{key:"render",value:function(){var e=this.props.user;return(0,G.jsxs)("div",{id:"adminMenu",children:[(0,G.jsxs)("div",{id:"user",children:[(0,G.jsx)("h3",{children:e?e.name:"Loading profile..."}),(0,G.jsxs)("strong",{children:[(0,G.jsx)(m.Z,{})," Instructor"]})]}),(0,G.jsxs)(w.Z,{selectedKeys:[this.props.menuKey],children:[(0,G.jsx)(w.Z.Item,{icon:(0,G.jsx)(p.Z,{}),children:(0,G.jsx)(b.rU,{to:"/admin",children:"Datamart"})},"datamart"),(0,G.jsx)(w.Z.Item,{icon:(0,G.jsx)(f.Z,{}),children:(0,G.jsx)(b.rU,{to:"/admin/tiles",children:"Tiles"})},"tiles"),(0,G.jsx)(w.Z.Item,{icon:(0,G.jsx)(v.Z,{}),children:(0,G.jsx)(b.rU,{to:"/admin/dashboard",children:"Dashboard"})},"dashboard"),(0,G.jsx)(w.Z.Item,{icon:(0,G.jsx)(x.Z,{}),children:(0,G.jsx)(b.rU,{to:"/admin/student-overview",children:"Student Overview"})},"studentOverview"),(0,G.jsxs)(w.Z.SubMenu,{icon:(0,G.jsx)(Z.Z,{}),title:"Grades",children:[(0,G.jsx)(w.Z.Item,{icon:(0,G.jsx)(g.Z,{}),children:(0,G.jsx)(b.rU,{to:"/admin/grade-predictor",children:"Predictor"})},"gradePredictor"),(0,G.jsx)(w.Z.Item,{icon:(0,G.jsx)(j.Z,{}),children:(0,G.jsx)(b.rU,{to:"/admin/grade-analyzer",children:"Analyzer"})},"gradeAnalyzer")]},"submenu"),(0,G.jsx)(w.Z.Item,{icon:(0,G.jsx)(y.Z,{}),children:(0,G.jsx)(b.rU,{to:"/admin/data-wizard",children:"Data Wizard"})},"dataWizard"),(0,G.jsx)(w.Z.Item,{icon:(0,G.jsx)(k.Z,{}),children:(0,G.jsx)(b.rU,{to:"/admin/notification-centre",children:"Notification Centre"})},"notificationCentre"),(0,G.jsx)(w.Z.Item,{icon:(0,G.jsx)(D.Z,{}),children:(0,G.jsx)(b.rU,{to:"/admin/settings",children:"Settings"})},"settings")]})]})}}]),a}(o.Component),C=T(N),M=function(e){(0,s.Z)(a,e);var t=(0,i.Z)(a);function a(){return(0,n.Z)(this,a),t.apply(this,arguments)}return(0,r.Z)(a,[{key:"render",value:function(){var e=this.props,t=e.isAdmin,a=e.menuKey;return t?(0,G.jsxs)("div",{id:"admin",children:[(0,G.jsx)(d.Z,{}),(0,G.jsxs)(u.Z,{children:[(0,G.jsx)(h.Z,{xs:4,children:(0,G.jsx)(C,{menuKey:a})}),(0,G.jsx)(h.Z,{xs:20,id:"wrapper",className:"".concat("settings"!==a&&"noOverflow"),children:this.props.children})]})]}):(0,G.jsx)(c.l_,{to:"/"})}}]),a}(o.Component),P=(0,l.u)(M)},23637:function(e,t,a){a.r(t),a.d(t,{default:function(){return J}});var n=a(15671),r=a(43144),s=a(60136),i=a(54062),o=a(72791),l=a(91333),d=a(4525),c=a(95909),u=a(44091),h=a(87309),m=a(74165),p=a(1413),f=a(29439),v=a(15861),x=a(83734),Z=a(58686),g=a(19603),j=a(90785),y=a(49219),k=a(80184),D=function(e){(0,s.Z)(a,e);var t=(0,i.Z)(a);function a(){var e;(0,n.Z)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={offset:-2},e}return(0,r.Z)(a,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.setState({offset:300})}),500)}},{key:"render",value:function(){var e=this.state.offset;return(0,k.jsx)("div",{id:"demoAnimation",children:(0,k.jsxs)("div",{id:"spreadsheet",children:[(0,k.jsx)("div",{id:"wallpaper"}),(0,k.jsxs)("svg",{width:400,height:300,children:[(0,k.jsx)("rect",{x:0,y:0,width:400,height:300,fill:"transparent"}),(0,k.jsx)("rect",{x:0,y:e,width:400,height:3,fill:"rgba(255, 0, 0, 0.75)"})]})]})})}}]),a}(o.Component),w=a(68438),b=(0,r.Z)((function e(t){(0,n.Z)(this,e),this.enabled=!0,this.enabled=t&&(0,w.f)()})),S=function(e){(0,s.Z)(a,e);var t=(0,i.Z)(a);function a(){var e;(0,n.Z)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).mockGradesDatasetTilePairs=!0,e.gradesDatasetTilePairs=e.enabled&&e.mockGradesDatasetTilePairs?JSON.parse('{"presentatie":2,"deeltoets3":4,"deeltoets2":7,"deeltoets1":1}'):{},e}return(0,r.Z)(a)}(b),G=function(e){(0,s.Z)(a,e);var t=(0,i.Z)(a);function a(){var e;(0,n.Z)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).mockGradesDatasets=!0,e.mockFinalGradesDatasetName=!0,e.gradesDatasets=e.enabled&&e.mockGradesDatasets?JSON.parse('{"presentatie":{"1":7.9,"2":8.1,"3":8.3,"4":7,"5":7,"6":7,"7":8.3,"8":8.3,"9":9.3,"10":8.1,"11":8.9,"12":8.3,"13":9.3,"14":8.3,"15":8.9,"16":1,"17":9.6,"18":8.5,"19":8.3,"20":8.7,"21":9.3,"22":9.3,"23":8.3,"24":7.9,"25":6.6,"26":8.7,"27":8.9,"28":8.7,"29":7.6,"30":8.3,"31":8.3,"32":8.3,"33":8.9,"34":9.3,"35":8.9,"36":7.4,"37":7.4,"38":8.1,"39":8.3,"40":1,"41":9.3,"42":8.1,"43":9.6,"44":8.9,"45":1,"46":7.2,"47":9.3,"48":8.3,"49":7.4,"50":7.8,"51":9.3,"52":9.3,"53":8.3,"54":9.3,"55":7.6,"56":9.3,"57":8.3,"58":9.3,"59":8.3},"eindcijfer":{"1":1,"2":1,"3":7.2,"4":6.5,"5":6.1,"6":1,"7":1,"8":7.1,"9":7,"10":7.5,"11":8,"12":7.1,"13":7.2,"14":6,"15":8.8,"16":1,"17":7.1,"18":8.2,"19":7.7,"20":7.5,"21":7.9,"22":8.5,"23":6.3,"24":6.9,"25":5.3,"26":7.2,"27":6.7,"28":8.3,"29":6.1,"30":1,"31":7.9,"32":6.5,"33":7.1,"34":7.3,"35":7.3,"36":7.2,"37":7.5,"38":7.1,"39":6.3,"40":1,"41":8.7,"42":6.5,"43":7.1,"44":6.8,"45":1,"46":1,"47":7.8,"48":6.5,"49":6.9,"50":1,"51":7.6,"52":8,"53":6.3,"54":7.1,"55":5.7,"56":8.7,"57":8.8,"58":8.7,"59":6.4},"deeltoets3":{"1":3.1,"2":7.2,"3":6.7,"4":6.9,"5":5.3,"6":1,"7":5.7,"8":7,"9":6.7,"10":6.7,"11":7.3,"12":6,"13":7.3,"14":5.2,"15":8.8,"16":1,"17":7.3,"18":7.1,"19":7.2,"20":7.1,"21":7.6,"22":7.9,"23":6.7,"24":7.7,"25":5.8,"26":7.6,"27":6,"28":7.5,"29":6.4,"30":8.2,"31":8.3,"32":6.8,"33":6.6,"34":8.1,"35":6.2,"36":7.6,"37":6.7,"38":6.5,"39":6.6,"40":1,"41":8.3,"42":5.8,"43":8,"44":6.5,"45":1,"46":3.5,"47":7.1,"48":6.6,"49":6.5,"50":3.5,"51":7.2,"52":7.1,"53":6.3,"54":6.7,"55":6.8,"56":8.5,"57":8,"58":8.8,"59":6.4},"deeltoets2":{"1":1,"2":1,"3":7,"4":5.4,"5":6.1,"6":4.7,"7":1,"8":5.5,"9":5.9,"10":7.1,"11":8,"12":8,"13":6.6,"14":5.1,"15":8.3,"16":4.5,"17":6.9,"18":9.1,"19":7.2,"20":7.5,"21":7,"22":8,"23":6.5,"24":5.5,"25":5.3,"26":6.5,"27":7.3,"28":8.2,"29":5.5,"30":1,"31":7.3,"32":6.5,"33":6.5,"34":5.8,"35":7.4,"36":6.8,"37":8.1,"38":6.6,"39":6,"40":1,"41":8.6,"42":5.1,"43":5.8,"44":4.9,"45":4.1,"46":4.7,"47":7.5,"48":5.3,"49":6.8,"50":1,"51":7.3,"52":7.5,"53":5.8,"54":6.6,"55":4.9,"56":8.9,"57":9.1,"58":7.8,"59":5},"deeltoets1":{"1":1,"2":6.3,"3":6.9,"4":7.5,"5":7.2,"6":1,"7":4.7,"8":9.4,"9":8.1,"10":9.4,"11":8.8,"12":6.6,"13":6.6,"14":7.5,"15":9.4,"16":6.6,"17":5.9,"18":8.1,"19":9.1,"20":7.5,"21":9.1,"22":10,"23":4.7,"24":7.8,"25":4.1,"26":7.5,"27":5.9,"28":9.4,"29":5.6,"30":9.7,"31":8.1,"32":5,"33":7.8,"34":7.2,"35":8.1,"36":7.2,"37":8.4,"38":8.4,"39":5.3,"40":6.3,"41":9.1,"42":9.4,"43":6.6,"44":9.1,"45":5.6,"46":4.7,"47":8.8,"48":7.2,"49":7.8,"50":7.5,"51":7.8,"52":9.7,"53":5.9,"54":7.2,"55":4.1,"56":8.4,"57":9.7,"58":9.7,"59":7.8}}'):{},e.finalGradesDatasetName=e.enabled&&e.mockFinalGradesDatasetName?"eindcijfer":"",e}return(0,r.Z)(a)}(b),T=function(e){(0,s.Z)(a,e);var t=(0,i.Z)(a);function a(){var e;(0,n.Z)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).mockModel=!0,e.model=e.enabled&&e.mockModel?{intercept:0,parameters:[{parameterID:2,weight:-.20628158982515943},{parameterID:4,weight:.5987301721162606},{parameterID:7,weight:.7351437498019004},{parameterID:1,weight:-.05163026454991204}]}:null,e.modelWithMetadata=e.enabled&&e.mockModel?{model:{name:"multivariateLinearRegression",weights:[[-.20628158982515943],[.5987301721162606],[.7351437498019004],[-.05163026454991204]],inputs:4,outputs:1,intercept:!1,summary:{regressionStatistics:{standardError:.9270044844591805,observations:1},variables:[{label:"X Variable 1",coefficients:[-.20628158982515943],standardError:.08731014539207609,tStat:-2.3626302407220674},{label:"X Variable 2",coefficients:[.5987301721162606],standardError:.12416150926563964,tStat:4.822188258321637},{label:"X Variable 3",coefficients:[.7351437498019004],standardError:.07154733424292914,tStat:10.274928585121298},{label:"Intercept",coefficients:[-.05163026454991204],standardError:.06950154171021325,tStat:-.7428650254289967}]}},modelColumns:[2,4,7,1]}:null,e}return(0,r.Z)(a)}(b),N=function(e){(0,s.Z)(a,e);var t=(0,i.Z)(a);function a(){var e;(0,n.Z)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).mockCurrentStep=!0,e.currentStep=(e.enabled&&e.mockCurrentStep,1),e.gradesDatasets=new G(e.enabled).gradesDatasets,e.finalGradesDatasetName=new G(e.enabled).finalGradesDatasetName,e.gradesDatasetTilePairs=new S(e.enabled).gradesDatasetTilePairs,e.model=new T(e.enabled).model,e}return(0,r.Z)(a)}(b),C=["studentloginid","studentid","student","id"],M=x.Z.Option,P=function(e){(0,s.Z)(a,e);var t=(0,i.Z)(a);function a(){var e;(0,n.Z)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).mock=new G(!0),e.state={gradesDatasets:e.mock.gradesDatasets,finalGradesDatasetName:e.mock.finalGradesDatasetName,inputErrorFinalGradesDatasetName:!1},e.isStepCompleted=e.validate,e}return(0,r.Z)(a,[{key:"componentDidMount",value:function(){this.mock.enabled&&(this.mock.mockGradesDatasets&&this.onGradesDatasetsLoaded(),this.mock.mockFinalGradesDatasetName&&this.onFinalGradesDatasetNameChosen())}},{key:"onGradesDatasetsLoaded",value:function(){var e=this.props.parentSetGradesDatasets,t=this.state.gradesDatasets;this.ensureGradeDatasetsAreComplete(),this.enforceMinimumMaximumGrade(),e(t)}},{key:"onFinalGradesDatasetNameChosen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.state.finalGradesDatasetName;this.props.parentSetFinalGradesDatasetName(e||t)}},{key:"csvFilesChosen",value:function(){var e=(0,v.Z)((0,m.Z)().mark((function e(t){var a,n,r,s,i,o,l,d,c;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.files){e.next=3;break}return e.abrupt("return");case 3:n={},r=0;case 5:if(!(r<a.length)){e.next=23;break}return e.next=8,(0,y.jw)(a[r]);case 8:if(s=e.sent,console.log(s),s){e.next=12;break}return e.abrupt("continue",20);case 12:if(i=(0,f.Z)(s,2),o=i[0],l=i[1],C.includes(o.toLowerCase())&&"grade"===l.toLowerCase()){e.next=15;break}return e.abrupt("continue",20);case 15:return d=(0,y.fM)(a[r]),e.next=18,this.readStudentGradesFromFile(a[r]);case 18:c=e.sent,n[d]=c;case 20:r++,e.next=5;break;case 23:this.setState({gradesDatasets:(0,p.Z)((0,p.Z)({},this.state.gradesDatasets),n)}),this.onGradesDatasetsLoaded();case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readStudentGradesFromFile",value:function(){var e=(0,v.Z)((0,m.Z)().mark((function e(t){var a,n;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.di)(t);case 2:return a=e.sent,n={},a.forEach((function(e){var t=e.map((function(e){return Number(e.replace(",","."))})),a=(0,f.Z)(t,2),r=a[0],s=a[1];n[r]=s})),n[0]||delete n[0],e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"ensureGradeDatasetsAreComplete",value:function(){var e=this.state.gradesDatasets,t=Object.values(e).flatMap(Object.keys).map((function(e){return parseInt(e)})).slice(0);Object.keys(e).forEach((function(a){t.filter((function(t){return!(t in e[a])})).forEach((function(t){return e[a][t]=1}))})),this.setState({gradesDatasets:e})}},{key:"enforceMinimumMaximumGrade",value:function(){var e=this.state.gradesDatasets;Object.keys(e).forEach((function(t){Object.keys(e[t]).map((function(e){return parseInt(e)})).forEach((function(a){e[t][a]=Math.max(1,e[t][a]),e[t][a]=Math.min(10,e[t][a])}))})),this.setState({gradesDatasets:e})}},{key:"validate",value:function(){var e=!0;return""===this.state.finalGradesDatasetName&&(e=!1,this.setState({inputErrorFinalGradesDatasetName:!0})),e}},{key:"render",value:function(){var e=this;return(0,k.jsx)("div",{children:(0,k.jsxs)(Z.Z,{children:[(0,k.jsxs)(g.Z,{xs:24,md:14,children:[(0,k.jsx)(Z.Z,{children:(0,k.jsxs)(g.Z,{xs:24,md:24,children:[(0,k.jsx)("h2",{children:"Provide student grades from a past school year"}),(0,k.jsx)(l.Z,{}),(0,k.jsx)("p",{children:"This configuration screen lets you train a model that once trained, will be able to roughly predict a student's final grade. The model should be trained on the results of a past academic year."}),(0,k.jsx)("p",{children:'Please provide this data through one .csv file per graded assignment (e.g. mini-test, quiz, etc.); The files must contain the following two columns: "studentID" and "grade". Furthermore, please take note of which file contains the final grades.'}),(0,k.jsx)("p",{children:"You can select multiple files at once."}),(0,k.jsx)(j.Z,{message:"Student data is only ever kept on your local device, and never uploaded to IuideME. Once the model is trained, all identifying information is erased."})]})}),(0,k.jsxs)(Z.Z,{children:[(0,k.jsxs)(g.Z,{xs:24,md:12,children:[(0,k.jsx)("div",{id:"filePickerInputContainer",children:(0,k.jsx)("input",{id:"filePickerInput",type:"file",accept:".csv",multiple:!0,onChange:this.csvFilesChosen.bind(this)})}),(0,k.jsx)("ul",{id:"uploadedFilesUl",children:Object.keys(this.state.gradesDatasets).map((function(t){return(0,k.jsxs)("li",{children:[(0,k.jsx)(h.Z,{className:"liDeleteBtn",size:"small",onClick:function(){var a=e.state.gradesDatasets;delete a[t],e.setState({gradesDatasets:a})},children:"x"}),t]},t)}))}),(0,k.jsx)(h.Z,{id:"uploadButton",type:"primary",size:"large",onClick:function(){var e;return null===(e=document.getElementById("filePickerInput"))||void 0===e?void 0:e.click()},children:"Upload Data"})]}),(0,k.jsx)(g.Z,{xs:24,md:12,children:(0,k.jsx)(x.Z,{className:"finalGradesDSSelect "+(this.state.inputErrorFinalGradesDatasetName&&" error "),size:"large",onChange:function(t){e.setState({finalGradesDatasetName:t,inputErrorFinalGradesDatasetName:!1}),e.onFinalGradesDatasetNameChosen(t)},placeholder:"Dataset with final grades...",children:Object.keys(this.state.gradesDatasets).map((function(e){return(0,k.jsx)(M,{value:e,children:e},e)}))})})]})]}),(0,k.jsx)(g.Z,{xs:0,md:10,children:(0,k.jsx)(D,{})})]})})}}]),a}(o.Component),I=a(62322),E=x.Z.Option,O=function(e){(0,s.Z)(a,e);var t=(0,i.Z)(a);function a(){var e;(0,n.Z)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).mock=new S(!0),e.state={tiles:[],entries:[],gradesDatasetTilePairs:e.mock.gradesDatasetTilePairs,inputError:!1},e.isStepCompleted=e.validate,e}return(0,r.Z)(a,[{key:"componentDidMount",value:function(){var e=this;I.Z.getTiles().then(function(){var t=(0,v.Z)((0,m.Z)().mark((function t(a){return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=a.filter((function(e){return"ENTRIES"===e.content})),e.setState({tiles:a});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),I.Z.getEntries().then(function(){var t=(0,v.Z)((0,m.Z)().mark((function t(a){return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({entries:a});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"validate",value:function(){var e=this.props.gradesDatasets,t=this.state.gradesDatasetTilePairs,a=!0;return Object.keys(t).length!==Object.keys(e).length-1&&(a=!1,this.setState({inputError:!0})),a}},{key:"render",value:function(){var e=this;return(0,k.jsxs)("div",{children:[(0,k.jsx)(Z.Z,{children:(0,k.jsxs)(g.Z,{xs:24,md:24,children:[(0,k.jsx)("h2",{children:"Link the uploaded grades to tiles (live data sources)"}),(0,k.jsx)(l.Z,{})]})}),(0,k.jsxs)(Z.Z,{children:[(0,k.jsxs)(g.Z,{xs:24,md:14,children:[this.state.inputError&&(0,k.jsx)(j.Z,{message:"Not all fields have been filled",description:"Please assign a live data source to every uploaded dataset.",type:"error"}),Object.keys(this.props.gradesDatasets).filter((function(t){return t!==e.props.finalGradesDatasetName})).map((function(t){return(0,k.jsxs)(Z.Z,{className:"select-container",children:[(0,k.jsx)(g.Z,{xs:24,md:24,children:(0,k.jsx)("h3",{className:"select-title",children:t})}),(0,k.jsx)(g.Z,{xs:24,md:24,children:(0,k.jsx)(x.Z,{size:"middle",placeholder:"Choose a data source",onChange:function(a,n){var r=e.state.gradesDatasetTilePairs;r[t]=n.key,e.setState({gradesDatasetTilePairs:r}),(0,e.props.parentSetGradesDatasetTilePairs)(r)},children:e.state.tiles.map((function(e){return(0,k.jsx)(E,{value:e.title,children:e.title},e.id)}))})})]},t)}))]}),(0,k.jsx)(g.Z,{xs:24,md:10,children:(0,k.jsx)(Z.Z,{children:(0,k.jsxs)(g.Z,{xs:24,md:24,children:[(0,k.jsx)("p",{children:"This configuration screen lets you train a model that once trained, will be able to roughly predict a student's final grade. The model should be trained on the results of a past academic year."}),(0,k.jsx)("p",{children:'Please provide this data through one .csv file per graded assignment (e.g. mini-test, quiz, etc.); The files must contain the following two columns: "studentID" and "grade". Furthermore, please take note of which file contains the final grades.'}),(0,k.jsx)("p",{children:"You can select multiple files at once."})]})})})]})]})}}]),a}(o.Component),F=a(93433),A=a(78322),z=a(13344),U=function(e){(0,s.Z)(a,e);var t=(0,i.Z)(a);function a(){var e;(0,n.Z)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).mock=new T(!0),e.state={gradesDatasets:{},model:e.mock.model,modelWithMetadata:e.mock.modelWithMetadata,modelTestingValues:new Map,predictedGrade:0,tiles:[]},e.isStepCompleted=e.validate,e}return(0,r.Z)(a,[{key:"componentDidMount",value:function(){var e=this;this.mock.enabled&&this.mock.mockModel&&this.onModelTrained(),I.Z.getTiles().then(function(){var t=(0,v.Z)((0,m.Z)().mark((function t(a){return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=a.filter((function(e){return"ENTRIES"===e.content})),e.setState({tiles:a});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.recalculateTestPrediction()}},{key:"onModelTrained",value:function(){var e=this.props.parentSetModel,t=this.state.model;t&&e(t)}},{key:"ensureFinalGradeExists",value:function(){var e=this.props,t=e.gradesDatasets,a=e.finalGradesDatasetName,n=Object.entries(t).filter((function(e){return e[0]===a})).map((function(e){return e[1]})).flatMap(Object.keys).map((function(e){return parseInt(e)})).slice(0);Object.keys(t).forEach((function(e){Object.keys(t[e]).map((function(e){return parseInt(e)})).filter((function(e){return!(e in n)})).forEach((function(a){delete t[e][a]}))})),this.setState({gradesDatasets:t})}},{key:"trainModels",value:function(){var e=this,t=this.props,a=t.gradesDatasets,n=t.finalGradesDatasetName,r=t.gradesDatasetTilePairs,s=Object.keys(a[n]).map((function(e){return parseInt(e)})).map((function(e){return[e,a[n][e]]})),i=Object.keys(a).filter((function(e){return e!==n})),o=Object.values(s).map((function(e){return e[0]})).map((function(e){return[e].concat((0,F.Z)(Object.values(i).map((function(t){return a[t][e]}))))})),l=s.sort((function(e,t){return e[0]-t[0]})).map((function(e){return e.slice(1)})),d=o.sort((function(e,t){return e[0]-t[0]})).map((function(e){return e.slice(1)})),c=new A.Z(d,l,{intercept:!1}).toJSON(),u=c.weights.map((function(e){return e[0]})),h={intercept:0,parameters:i.map((function(e){return r[e]})).map((function(e,t){return{parameterID:e,weight:u[t]}}))},m={model:c,modelColumns:i.map((function(e){return r[e]}))};this.setState({model:h,modelWithMetadata:m},(function(){e.recalculateTestPrediction(),e.onModelTrained()}))}},{key:"recalculateTestPrediction",value:function(){var e=this.state,t=e.modelWithMetadata,a=e.modelTestingValues;if(t){var n=t;a.size!==n.model.weights.length&&(n.modelColumns.forEach((function(e){return a.set(e,5)})),this.setState({modelTestingValues:a}));for(var r,s,i=A.Z.load(n.model),o=[],l=0;l<n.modelColumns.length;l++)r=n.modelColumns[l],(s=a.get(r))&&o.push(s);var d=i.predict(o)[0];this.setState({predictedGrade:d})}}},{key:"getTileByID",value:function(e){var t=this.state.tiles.find((function(t){return t.id===e}));return t||null}},{key:"validate",value:function(){return null!==this.state.model}},{key:"render",value:function(){var e=this,t=this.state.modelWithMetadata;return(0,k.jsxs)("div",{children:[(0,k.jsx)(Z.Z,{children:(0,k.jsxs)(g.Z,{xs:24,md:24,children:[(0,k.jsx)("h2",{children:"Train the grade predicting model"}),(0,k.jsx)(l.Z,{})]})}),(0,k.jsxs)(Z.Z,{children:[(0,k.jsxs)(g.Z,{xs:24,md:14,children:[null!==this.state.model&&(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{children:"Success!"}),(0,k.jsx)("p",{children:"The model has been trained successfully. You can preview it below by inputting sample values."}),this.state.modelWithMetadata&&t.modelColumns.map((function(t,a){var n=e.state.modelWithMetadata.model.weights[a][0];return(0,k.jsx)("div",{className:"grade-input-row",children:(0,k.jsxs)(Z.Z,{children:[(0,k.jsxs)(g.Z,{xs:24,md:10,children:[e.getTileByID(t)?e.getTileByID(t).title:null," (weight:"," ",n.toFixed(1),")"]}),(0,k.jsx)(g.Z,{xs:24,md:5,children:(0,k.jsx)(z.Z,{min:0,max:10,defaultValue:5,onChange:function(a){if(a){var n=e.state.modelTestingValues;n.set(t,a),e.setState({modelTestingValues:n},(function(){return e.recalculateTestPrediction()}))}}})}),(0,k.jsx)(g.Z,{xs:24,md:9})]})},n)})),this.state.predictedGrade&&(0,k.jsx)(Z.Z,{children:(0,k.jsxs)("h4",{children:["Predicted grade: ",this.state.predictedGrade.toFixed(1)]})})]}),null==this.state.model&&(0,k.jsxs)("div",{style:{textAlign:"center",padding:"20px 0"},children:[(0,k.jsx)("div",{style:{background:"url(/assets/img/illustrations/train_models.svg)",marginBottom:30,height:200,width:"100%",backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat"}}),(0,k.jsx)(h.Z,{type:"primary",size:"large",onClick:function(){return e.trainModels()},children:"Train Model"})]})]}),(0,k.jsx)(g.Z,{xs:24,md:10,children:(0,k.jsx)(Z.Z,{children:(0,k.jsxs)(g.Z,{xs:24,md:24,children:[(0,k.jsx)("p",{children:"The model will be trained on your machine using linear regression."}),(0,k.jsx)("p",{children:"This won't take long."})]})})})]})]})}}]),a}(o.Component),B=a(77063),W=a(12740),L=function(e){(0,s.Z)(a,e);var t=(0,i.Z)(a);function a(){var e;(0,n.Z)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={},e.isStepCompleted=e.validate,e}return(0,r.Z)(a,[{key:"componentDidMount",value:function(){var e=(0,v.Z)((0,m.Z)().mark((function e(){var t;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.Z.getModels();case 2:t=e.sent,console.log("newModels",t),this.uploadModel();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"uploadModel",value:function(){var e=(0,v.Z)((0,m.Z)().mark((function e(){var t;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.model,e.next=3,W.Z.uploadModel(t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"validate",value:function(){return!0}},{key:"render",value:function(){return(0,k.jsx)("div",{id:"uploadOverview",children:(0,k.jsx)(B.ZP,{status:"success",title:"The model is ready to use"})})}}]),a}(o.Component),V=a(91523),R=o.createRef,K=function(e){(0,s.Z)(a,e);var t=(0,i.Z)(a);function a(){var e;(0,n.Z)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).mock=new N(!0),e.steps=["Upload historic data","Link to live data","Train model","Done!"],e.state={currentStep:e.mock.currentStep,gradesDatasets:e.mock.gradesDatasets,finalGradesDatasetName:e.mock.finalGradesDatasetName,gradesDatasetTilePairs:e.mock.gradesDatasetTilePairs,model:e.mock.model,childRef:R()},e.nextStep=function(){var t,a=e.state,n=a.currentStep;null!==(t=a.childRef.current)&&void 0!==t&&t.isStepCompleted()&&e.setState({currentStep:Math.min(e.steps.length,n+1)})},e.previousStep=function(){var t=e.state.currentStep;e.setState({currentStep:Math.max(1,t-1)})},e}return(0,r.Z)(a,[{key:"componentDidMount",value:function(){}},{key:"renderStep",value:function(){var e=this,t=this.state,a=t.currentStep,n=t.gradesDatasets,r=t.finalGradesDatasetName,s=t.gradesDatasetTilePairs,i=t.model,o=t.childRef;switch(a){default:case 1:return(0,k.jsx)(P,{ref:o,parentSetGradesDatasets:function(t){return e.setState({gradesDatasets:t})},parentSetFinalGradesDatasetName:function(t){return e.setState({finalGradesDatasetName:t})}});case 2:return(0,k.jsx)(O,{ref:o,gradesDatasets:n,finalGradesDatasetName:r,parentSetGradesDatasetTilePairs:function(t){return e.setState({gradesDatasetTilePairs:t})}});case 3:return(0,k.jsx)(U,{ref:o,gradesDatasets:n,gradesDatasetTilePairs:s,finalGradesDatasetName:r,parentSetModel:function(t){return e.setState({model:t})}});case 4:return(0,k.jsx)(L,{ref:o,model:i})}}},{key:"render",value:function(){var e=this.state.currentStep;return(0,k.jsxs)("div",{children:[(0,k.jsx)(u.Z,{current:e-1,children:this.steps.map((function(e){return(0,k.jsx)(u.Z.Step,{title:e},e)}))}),(0,k.jsx)("div",{className:"stepsContent",children:this.renderStep()}),(0,k.jsxs)("div",{className:"stepsAction",children:[e>1&&(0,k.jsx)(h.Z,{className:"previousBtn",onClick:this.previousStep,children:"Previous"}),e===this.steps.length&&(0,k.jsx)(V.rU,{to:"/admin",children:(0,k.jsx)(h.Z,{className:"doneBtn",type:"primary",children:"Finish"})}),e<this.steps.length&&(0,k.jsx)(h.Z,{className:"nextBtn",type:"primary",onClick:this.nextStep,children:"Next"})]})]})}}]),a}(o.Component),J=function(e){(0,s.Z)(a,e);var t=(0,i.Z)(a);function a(){var e;(0,n.Z)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={loaded:!1},e}return(0,r.Z)(a,[{key:"componentDidMount",value:function(){this.setState({loaded:!0})}},{key:"render",value:function(){return this.state.loaded?(0,k.jsxs)(d.Z,{menuKey:"gradePredictor",children:[(0,k.jsx)("h1",{children:"Grade Predictor"}),(0,k.jsx)(l.Z,{}),(0,k.jsx)(K,{})]}):(0,k.jsx)(c.Z,{small:!1})}}]),a}(o.Component)}}]);
//# sourceMappingURL=637.ae9f1577.chunk.js.map