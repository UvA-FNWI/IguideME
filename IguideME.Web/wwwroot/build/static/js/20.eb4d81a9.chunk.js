(this.webpackJsonpiguideme=this.webpackJsonpiguideme||[]).push([[20],{1006:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ue}));var a=n(4),r=n(5),i=n(8),c=n(9),l=n(0),o=n.n(l),u=n(197),s=n(252),d=n(172),m=n(670),p=n(671),h=n(304),E=n(198),f=n(227),b=n(908),g=n.n(b),v=n(929),C=n.n(v),y=n(937),O=n.n(y),S=n(657),j=(n(948),n(949),n(950),n(960)),k=n(956),w=n(112),_=n(168),z=n(78),A=n(668),I=n(33),x=n(86),B=n(46),L=n(36),T=g()(),P=C()(),M=T.Toolbar,D={loadCourse:function(){return x.a.loadCourse()}},N=Object(B.b)((function(e){return{course:e.course}}),D),G=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={doneLoading:!1,editorState:void 0,initialState:void 0,hasChanged:!1,saving:!1},e.isUpToDate=function(){if(!e.state.editorState||!e.state.doneLoading)return!1;var t=e.state.editorState;return Object(j.a)(t.getCurrentContent()).toString().trim()===e.state.initialState},e.updateState=function(t){e.setState({editorState:t,hasChanged:!0})},e.save=function(){var t=e.props.course;e.setState({saving:!0},(function(){var n=e.state.editorState,a=Object(j.a)(n.getCurrentContent());L.a.updateConsent(t.require_consent,a).then((function(){e.props.loadCourse().then((function(){e.setState({saving:!1,initialState:a},(function(){return _.b.success("Informed consent saved!")}))}))}))}))},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.course;setTimeout((function(){e.setState({doneLoading:!0,editorState:f.EditorState.createWithContent(Object(k.a)(t&&t.text?t.text:w.a)),initialState:Object(j.a)(Object(k.a)(t&&t.text?t.text:"")),hasChanged:!1})}),300)}},{key:"render",value:function(){var e=this;return this.state.doneLoading?o.a.createElement("div",{id:"consentEditor"},o.a.createElement("div",{id:"editorToolbar"},o.a.createElement(M,null,(function(t){return o.a.createElement(o.a.Fragment,null,o.a.createElement(S.BoldButton,t),o.a.createElement(S.ItalicButton,t),o.a.createElement(S.UnderlineButton,t),o.a.createElement(S.CodeButton,t),o.a.createElement(S.UnorderedListButton,t),o.a.createElement(S.HeadlineOneButton,t),o.a.createElement(S.HeadlineTwoButton,t),o.a.createElement(S.HeadlineThreeButton,t),o.a.createElement(S.OrderedListButton,t),o.a.createElement(S.BlockquoteButton,t),o.a.createElement(S.CodeBlockButton,t),o.a.createElement(z.a,{id:"save",type:"link",disabled:e.isUpToDate()||e.state.saving,onClick:e.save},e.state.saving?"Saving":"Save"))})),!this.state.initialState&&o.a.createElement(A.a,{message:"Consent can not be given because the informed consent is undefined. Provide the informed consent below",type:"error",showIcon:!0})),o.a.createElement("div",{id:"contentWrapper",className:"".concat(this.isUpToDate()&&"up-to-date"," ").concat(this.state.saving&&"saving")},o.a.createElement(O.a,{editorState:this.state.editorState,onChange:this.updateState,plugins:[T,P]}))):o.a.createElement(I.a,{small:!0})}}]),n}(l.Component),q=N(G),V=n(251),W=n.n(V),K={loadCourse:function(){return x.a.loadCourse()}},R=Object(B.b)((function(e){return{course:e.course}}),K),U=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={loading:!1},e.toggleConsentRequirement=function(){var t=e.props.course;t&&e.setState({loading:!0},(function(){L.a.updateConsent(!t.require_consent,t.text).then((function(){e.props.loadCourse().then((function(){e.setState({loading:!1})}))}))}))},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props.course;return e?o.a.createElement("div",{id:"informedConsent"},o.a.createElement("h2",null,"Informed Consent"),o.a.createElement("div",{className:"primaryContainer"},o.a.createElement("span",null,o.a.createElement(m.a,{title:"Consent is mandatory!"},o.a.createElement(p.a,{checkedChildren:o.a.createElement(h.a,null),unCheckedChildren:o.a.createElement(E.a,null),onClick:this.toggleConsentRequirement,checked:e.require_consent||!0,disabled:!0,loading:this.state.loading})),"\xa0 When checked students are required to explicitly accept the informed consent. Students that did not grant consent won't be able to use the application and their data will be excluded."),o.a.createElement(s.a,null),e.require_consent&&o.a.createElement(W.a,null,o.a.createElement(q,null)))):o.a.createElement(I.a,{small:!0})}}]),n}(l.Component),H=R(U),F=n(18),J=n(182),Q=n(962),X=n(963),Y=(n(951),n(232)),Z=n.n(Y),$=n(80),ee={loadCourse:function(){return x.a.loadCourse()}},te=Object(B.b)((function(e){return{course:e.course}}),ee),ne=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={loaded:!1,students:[],enabled:!1,accepted:[]},e.isAccepted=function(t){return e.state.accepted.includes(t)},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;J.a.getStudents().then((function(t){return e.setState({students:t,loaded:!0})})),$.a.getAcceptList().then((function(t){e.setState({accepted:t.filter((function(e){return e.accepted})).map((function(e){return e.student_login_id}))})}));var t=this.props.course;t&&this.setState({enabled:t.accept_list})}},{key:"render",value:function(){var e=this,t=this.state,n=t.loaded,a=t.students,r=t.enabled,i=t.accepted;return n?o.a.createElement("div",{id:"acceptList"},o.a.createElement("h2",null,"Accept List"),o.a.createElement("div",{className:"primaryContainer"},o.a.createElement("span",null,o.a.createElement(p.a,{checkedChildren:o.a.createElement(h.a,null),unCheckedChildren:o.a.createElement(E.a,null),checked:r,onChange:function(t){L.a.updateAcceptList(t).then((function(t){return e.setState({enabled:t},(function(){return e.props.loadCourse()}))}))}}),"\xa0 If enabled only the students with explicit access may use the application. When disabled all enrolled students are able to use the application."),o.a.createElement(s.a,null),o.a.createElement("span",null,"Accepted: ",i.length," / ",a.length," ",o.a.createElement("small",null,"(",Math.round(i.length/a.length*100),"%)")),o.a.createElement("br",null),o.a.createElement(d.b,null,o.a.createElement(z.a,{disabled:!r},"Select all"),o.a.createElement(z.a,{disabled:!r},"Deselect all"),o.a.createElement(z.a,{disabled:!r,onClick:function(){Z.a.fire({title:"Percentage of students to accept",input:"number",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Randomize",showLoaderOnConfirm:!0,preConfirm:function(e){var t=parseInt(e);return t<10?Z.a.showValidationMessage("The acceptance percentage must be above 10%!"):t>100?Z.a.showValidationMessage("Percentages can't exceed 100%."):void 0},allowOutsideClick:function(){return!Z.a.isLoading()}}).then((function(t){if(t.isConfirmed){var n=parseInt(t.value),r=Math.ceil(a.length*(n/100)),i=a.sort((function(){return.5-Math.random()})).slice(0,r);e.setState({accepted:i.map((function(e){return e.login_id}))}),Z.a.fire("Task completed!","","success")}}))}},"Random assign"),o.a.createElement(z.a,{className:"successButtonStyle",disabled:!r,onClick:function(){$.a.createAcceptList(a.map((function(e){return{student_login_id:e.login_id,accepted:i.includes(e.login_id)}}))).then((function(t){e.setState({accepted:t.filter((function(e){return e.accepted})).map((function(e){return e.student_login_id}))}),Z.a.fire("Configuration saved!","","success")}))}},"Save")),o.a.createElement(s.a,null),o.a.createElement("div",{style:{opacity:r?1:.5}},o.a.createElement(Q.a,null,a.sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(t){return o.a.createElement(X.a,{xs:12,md:8,lg:6,xl:4},o.a.createElement("div",{className:"student ".concat(e.isAccepted(t.login_id)&&"accepted"),onClick:function(){e.isAccepted(t.login_id)?e.setState({accepted:i.filter((function(e){return e!==t.login_id}))}):e.setState({accepted:[].concat(Object(F.a)(i),[t.login_id])})}},o.a.createElement("span",null,t.name),o.a.createElement("br",null),o.a.createElement("small",null,t.login_id)))})))))):o.a.createElement("div",{id:"acceptList"},o.a.createElement("h2",null,"Accept List"),o.a.createElement("div",{className:"primaryContainer"},o.a.createElement(I.a,{small:!0})))}}]),n}(l.Component),ae=te(ne),re=n(669),ie={loadCourse:function(){return x.a.loadCourse()}},ce=Object(B.b)((function(e){return{course:e.course}}),ie),le=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={loading:!0,enabled:!1,size:0,inputSize:0,inputEnabled:!1,buttonText:"Save"},e.updatePeerGroups=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e.setState({loading:!0},(function(){L.a.updateCoursePeerGroup(e.state.inputSize,!!t||e.state.inputEnabled).then((function(t){e.setState({enabled:t.personalized_peers,inputEnabled:t.personalized_peers,size:t.min_size,inputSize:t.min_size,buttonText:"Saved"},(function(){setTimeout((function(){return e.setState({buttonText:"Save",loading:!1})}),1e3)}))}))}))},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0},(function(){L.a.getCoursePeerGroups().then((function(t){e.setState({loading:!1,enabled:t.personalized_peers,inputEnabled:t.personalized_peers,size:t.min_size,inputSize:t.min_size})}))}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{id:"peerGroups"},o.a.createElement("h2",null,"Peer Groups"),o.a.createElement("div",{className:"primaryContainer"},o.a.createElement(d.b,{direction:"vertical"},o.a.createElement("div",null,o.a.createElement("span",null,o.a.createElement(p.a,{checkedChildren:o.a.createElement(h.a,null),unCheckedChildren:o.a.createElement(E.a,null),onClick:function(){e.updatePeerGroups(!e.state.inputEnabled),e.setState({inputEnabled:!e.state.inputEnabled})},checked:this.state.inputEnabled,loading:this.state.loading}),"\xa0 Enable personalized peer groups.")),o.a.createElement("div",null,"Minimum group size: \xa0",o.a.createElement(re.a,{min:2,size:"large",value:this.state.inputSize,onChange:function(t){return e.setState({inputSize:t})},disabled:!this.state.enabled||this.state.loading})),o.a.createElement(z.a,{className:"successButtonStyle",onClick:function(){return e.updatePeerGroups()},loading:this.state.loading,disabled:this.state.loading},this.state.buttonText))))}}]),n}(l.Component),oe=ce(le),ue=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return o.a.createElement(u.a,{menuKey:"settings"},o.a.createElement("h1",null,"Settings"),o.a.createElement(s.a,null),o.a.createElement(d.b,{direction:"vertical",style:{width:"100%"}},o.a.createElement(H,null),o.a.createElement(ae,null),o.a.createElement(oe,null)))}}]),n}(l.Component)},182:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(4),r=n(5),i=n(8),c=n(9),l=n(3),o=n(16),u=n(71),s=n(10),d=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,null,[{key:"getStudents",value:function(){return Object(l.a)()?Object(s.a)(u.c):this.client.get("students").then((function(e){return e.data}))}},{key:"getConsents",value:function(){return Object(l.a)()?Object(s.a)(u.a):this.client.get("consents").then((function(e){return e.data}))}},{key:"getGoalgrades",value:function(){return Object(l.a)()?Object(s.a)(u.b):this.client.get("goal-grades").then((function(e){return e.data}))}}]),n}(o.a)},188:function(e,t,n){"use strict";var a=n(6),r=n(4),i=n(5),c=n(8),l=n(9),o=n(0),u=n.n(o),s=n(201),d=n(670),m=n(78),p=n(1010),h=n(47),E=n(182),f=n(3),b=n(46),g=(n(189),Object(b.b)((function(e){return{course:e.course,user:e.user}}))),v=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={loaded:!1,students:[]},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.studentPickView&&E.a.getStudents().then((function(t){return e.setState({students:t,loaded:!0})})),this.setState({loaded:!0})}},{key:"renderInner",value:function(){var e=this;if(this.props.studentPickView){var t=this.state,n=t.students,r=t.loaded;return u.a.createElement(s.a,{id:"studentPicker",isLoading:!r,options:n.sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(e){return{label:e.name,value:e.login_id}})),placeholder:"Choose a student",onChange:function(t){return e.props.setStudent(t?n.find((function(e){return e.login_id===t.value})):null)},isClearable:!0,styles:{control:function(e,t){return Object(a.a)(Object(a.a)({},e),{},{backgroundColor:"transparent",color:"white",border:"1px solid white"})},singleValue:function(e,t){return Object(a.a)(Object(a.a)({},e),{},{color:"white"})}}})}return u.a.createElement("div",{id:"inner"},u.a.createElement("h2",null,this.props.course?this.props.course.course_name:"Loading course..."))}},{key:"render",value:function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{id:"adminHeader"},this.props.studentPickView?u.a.createElement(h.b,{to:"/admin",style:{float:"right"}},u.a.createElement("h3",null,"Admin Panel")):u.a.createElement("div",{style:{float:"right",padding:20}},u.a.createElement(d.a,{title:"Reload data"},u.a.createElement(m.a,{id:"reload",shape:"circle",style:{backgroundColor:"rgba(255, 255, 255, 0.5)",color:"white"},icon:u.a.createElement(p.a,null)}))),u.a.createElement("div",{id:"navbarContent"},u.a.createElement("div",{id:"brand"},u.a.createElement(h.b,{to:"/"},u.a.createElement("h1",null,"IGuideME"))),this.renderInner())),Object(f.a)()&&u.a.createElement("div",{id:"debugNotice"},"Application is running in ",u.a.createElement("strong",null,"demo")," mode. Changes will not be saved!"))}}]),n}(o.Component);t.a=g(v)},189:function(e,t,n){},195:function(e,t,n){},196:function(e,t,n){},197:function(e,t,n){"use strict";var a=n(4),r=n(5),i=n(8),c=n(9),l=n(0),o=n.n(l),u=n(72),s=n(188),d=n(14),m=n(962),p=n(963),h=n(260),E=n(261),f=n(1012),b=n(262),g=n(263),v=n(1011),C=n(264),y=n(265),O=n(266),S=n(267),j=n(268),k=n(269),w=n(663),_=n(47),z=(n(195),n(46)),A=Object(z.b)((function(e){return{user:e.user}})),I=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props.user;return o.a.createElement("div",{id:"adminMenu"},o.a.createElement("div",{id:"user"},o.a.createElement("h3",null,e?e.name:"Loading profile..."),o.a.createElement("strong",null,o.a.createElement(h.a,null)," Instructor")),o.a.createElement(w.a,{selectedKeys:[this.props.menuKey]},o.a.createElement(w.a.Item,{key:"datamart",icon:o.a.createElement(E.a,null)},o.a.createElement(_.b,{to:"/admin"},"Datamart")),o.a.createElement(w.a.Item,{key:"tiles",icon:o.a.createElement(f.a,null)},o.a.createElement(_.b,{to:"/admin/tiles"},"Tiles")),o.a.createElement(w.a.Item,{key:"dashboard",icon:o.a.createElement(b.a,null)},o.a.createElement(_.b,{to:"/admin/dashboard"},"Dashboard")),o.a.createElement(w.a.Item,{key:"studentOverview",icon:o.a.createElement(g.a,null)},o.a.createElement(_.b,{to:"/admin/student-overview"},"Student Overview")),o.a.createElement(w.a.SubMenu,{key:"submenu",icon:o.a.createElement(v.a,null),title:"Grades"},o.a.createElement(w.a.Item,{key:"gradePredictor",icon:o.a.createElement(C.a,null)},o.a.createElement(_.b,{to:"/admin/grade-predictor"},"Predictor")),o.a.createElement(w.a.Item,{key:"gradeAnalyzer",icon:o.a.createElement(y.a,null)},o.a.createElement(_.b,{to:"/admin/grade-analyzer"},"Analyzer"))),o.a.createElement(w.a.Item,{key:"dataWizard",icon:o.a.createElement(O.a,null)},o.a.createElement(_.b,{to:"/admin/data-wizard"},"Data Wizard")),o.a.createElement(w.a.Item,{key:"analytics",icon:o.a.createElement(S.a,null)},o.a.createElement(_.b,{to:"/admin/analytics"},"Analytics")),o.a.createElement(w.a.Item,{key:"notificationCentre",icon:o.a.createElement(j.a,null)},o.a.createElement(_.b,{to:"/admin"},"Notification Centre")),o.a.createElement(w.a.Item,{key:"settings",icon:o.a.createElement(k.a,null)},o.a.createElement(_.b,{to:"/admin/settings"},"Settings"))))}}]),n}(l.Component),x=A(I),B=(n(196),function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isAdmin,n=e.menuKey;return t?o.a.createElement("div",{id:"admin"},o.a.createElement(s.a,null),o.a.createElement(m.a,null,o.a.createElement(p.a,{xs:4},o.a.createElement(x,{menuKey:n})),o.a.createElement(p.a,{xs:20,id:"wrapper",className:"".concat("settings"!==n&&"noOverflow")},this.props.children))):o.a.createElement(d.a,{to:"/"})}}]),n}(l.Component));t.a=Object(u.a)(B)},950:function(e,t,n){},951:function(e,t,n){}}]);
//# sourceMappingURL=20.eb4d81a9.chunk.js.map