"use strict";(self.webpackChunkiguideme=self.webpackChunkiguideme||[]).push([[805],{4525:function(e,t,n){n.d(t,{Z:function(){return _}});var r=n(15671),i=n(43144),s=n(60136),o=n(54062),a=n(72791),c=n(28286),u=n(49109),d=n(64880),l=n(58686),f=n(19603),h=n(29529),p=n(78222),x=n(68961),m=n(55240),Z=n(56200),j=n(68409),v=n(30836),g=n(34633),y=n(6314),w=n(9150),k=n(752),b=n(36090),I=n(91523),D=n(60364),S=n(80184),C=(0,D.$j)((function(e){return{user:e.user}})),N=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props.user;return(0,S.jsxs)("div",{id:"adminMenu",children:[(0,S.jsxs)("div",{id:"user",children:[(0,S.jsx)("h3",{children:e?e.name:"Loading profile..."}),(0,S.jsxs)("strong",{children:[(0,S.jsx)(h.Z,{})," Instructor"]})]}),(0,S.jsxs)(b.Z,{selectedKeys:[this.props.menuKey],children:[(0,S.jsx)(b.Z.Item,{icon:(0,S.jsx)(p.Z,{}),children:(0,S.jsx)(I.rU,{to:"/admin",children:"Datamart"})},"datamart"),(0,S.jsx)(b.Z.Item,{icon:(0,S.jsx)(x.Z,{}),children:(0,S.jsx)(I.rU,{to:"/admin/tiles",children:"Tiles"})},"tiles"),(0,S.jsx)(b.Z.Item,{icon:(0,S.jsx)(m.Z,{}),children:(0,S.jsx)(I.rU,{to:"/admin/dashboard",children:"Dashboard"})},"dashboard"),(0,S.jsx)(b.Z.Item,{icon:(0,S.jsx)(Z.Z,{}),children:(0,S.jsx)(I.rU,{to:"/admin/student-overview",children:"Student Overview"})},"studentOverview"),(0,S.jsxs)(b.Z.SubMenu,{icon:(0,S.jsx)(j.Z,{}),title:"Grades",children:[(0,S.jsx)(b.Z.Item,{icon:(0,S.jsx)(v.Z,{}),children:(0,S.jsx)(I.rU,{to:"/admin/grade-predictor",children:"Predictor"})},"gradePredictor"),(0,S.jsx)(b.Z.Item,{icon:(0,S.jsx)(g.Z,{}),children:(0,S.jsx)(I.rU,{to:"/admin/grade-analyzer",children:"Analyzer"})},"gradeAnalyzer")]},"submenu"),(0,S.jsx)(b.Z.Item,{icon:(0,S.jsx)(y.Z,{}),children:(0,S.jsx)(I.rU,{to:"/admin/data-wizard",children:"Data Wizard"})},"dataWizard"),(0,S.jsx)(b.Z.Item,{icon:(0,S.jsx)(w.Z,{}),children:(0,S.jsx)(I.rU,{to:"/admin/notification-centre",children:"Notification Centre"})},"notificationCentre"),(0,S.jsx)(b.Z.Item,{icon:(0,S.jsx)(k.Z,{}),children:(0,S.jsx)(I.rU,{to:"/admin/settings",children:"Settings"})},"settings")]})]})}}]),n}(a.Component),U=C(N),E=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.isAdmin,n=e.menuKey;return t?(0,S.jsxs)("div",{id:"admin",children:[(0,S.jsx)(u.Z,{}),(0,S.jsxs)(l.Z,{children:[(0,S.jsx)(f.Z,{xs:4,children:(0,S.jsx)(U,{menuKey:n})}),(0,S.jsx)(f.Z,{xs:20,id:"wrapper",className:"".concat("settings"!==n&&"noOverflow"),children:this.props.children})]})]}):(0,S.jsx)(d.l_,{to:"/"})}}]),n}(a.Component),_=(0,c.u)(E)},50805:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var r=n(74165),i=n(15861),s=n(15671),o=n(43144),a=n(60136),c=n(54062),u=n(72791),d=n(4525),l=n(91333),f=n(62865),h=n(12740),p=n(1699),x=n(27193),m=n(8025),Z=n(62322),j=n(68944),v=n(11532),g=n(92607),y=n(97788),w=n(25581),k=n(80184),b=function(e){(0,a.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;(0,s.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={students:[],notifications:[],tiles:[],dates:[],rangeBool:!1},e}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var e=this;p.Z.getStudents().then(function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n){var i,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=0;case 1:if(!(i<n.length)){t.next=9;break}return t.next=4,g.Z.getNotificationEnable(n[i].userID);case 4:s=t.sent,n[i].notifications=s;case 6:i++,t.next=1;break;case 9:e.setState({students:n});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),h.Z.getAllNotifications().then(function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.setState({notifications:n}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Z.Z.getTiles().then(function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({tiles:n});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),g.Z.getNotificationDates().then(function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n){var i;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n[0].includes("-")?(i=[],n.forEach((function(e){return i.push(e.split("-").map((function(e){return new Date(Date.parse(e))})))})),e.setState({dates:i,rangeBool:!0})):e.setState({dates:n.map((function(e){return Date.parse(e)}))});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"getData",value:function(e,t){for(var n,r,i,s=new Map,o=0;o<e.length;o++)n=e[o],console.log("notifications",n.notifications),s.set(n.userID,new x.V(n.userID,n.name,n.notifications));for(var a=0;a<t.length;a++)if(r=t[a],i=s.get(r.userID))switch(r.status){case x.E.outperforming:r.sent?i.previous.outperforming.push(r):i.current.outperforming.push(r);break;case x.E.closing_gap:r.sent?i.previous.closing.push(r):i.current.closing.push(r);break;case x.E.more_effort:r.sent?i.previous.more_effort.push(r):i.current.more_effort.push(r)}var c=[];return s.forEach((function(e){return c.push(e)})),c}},{key:"render",value:function(){var e=this,t=this.state,n=t.students,r=t.notifications,i=t.tiles,s=t.rangeBool,o=[{title:"Student",dataIndex:"name",sorter:function(e,t){return e.name.localeCompare(t.name)},defaultSortOrder:"ascend"},{title:"Upcoming",dataIndex:"current",render:function(e){return(0,k.jsx)(m.Z,{outperforming:e.outperforming,closing:e.closing,moreEffort:e.more_effort,tiles:i})}},{title:"Last Received",dataIndex:"previous",render:function(e){return(0,k.jsx)(m.Z,{outperforming:e.outperforming,closing:e.closing,moreEffort:e.more_effort,tiles:i})}},{title:"Enabled",dataIndex:"enabled",render:function(e){return console.log("value",e),e?(0,k.jsx)("span",{className:"successText",children:(0,k.jsx)(j.Z,{})}):(0,k.jsx)("span",{className:"dangerText",children:(0,k.jsx)(v.Z,{})})}}];return(0,k.jsxs)(d.Z,{menuKey:"notificationCentre",children:[(0,k.jsx)("h1",{children:"Notification Centre"}),(0,k.jsx)(l.Z,{}),"Range?",(0,k.jsx)(w.Z,{onClick:function(t){e.setState({rangeBool:!s,dates:[]})},checked:s}),(0,k.jsx)(y.ZP,{multiple:!0,range:s,value:this.state.dates,onChange:function(t){if(e.setState({dates:t}),s){var n=[];null===t||void 0===t||t.toString().split(",").map((function(e){return n.push(e)}));for(var r="",i=0;i<n.length;i+=2)r+=n[i]+"-",r+=n[i+1]?n[i+1]:n[i],n[i+2]&&(r+=",");g.Z.setNotificationDates(r)}else g.Z.setNotificationDates(null===t||void 0===t?void 0:t.toString())}}),(0,k.jsx)("div",{id:"NotificationsTable",style:{position:"relative",overflow:"visible"},children:(0,k.jsx)(f.Z,{scroll:{x:900},bordered:!0,sticky:!0,columns:o,dataSource:this.getData(n,r)})})]})}}]),n}(u.Component)}}]);
//# sourceMappingURL=805.eba6be20.chunk.js.map